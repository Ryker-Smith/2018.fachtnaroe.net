<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Configuring Privilege and Role Authorization</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 743" />
<meta name="dcterms.created" content="2014-01-15T13:27:4Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Security Guide" />
<meta name="dcterms.identifier" content="B28531-21" />
<meta name="dcterms.isVersionOf" content="DBSEG" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="authentication.htm" title="Previous" type="text/html" />
<link rel="Next" href="app_devs.htm" title="Next" type="text/html" />
<link rel="alternate" href="../b28531.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="../B28531-21.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="../B28531-21.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>

                    <script type="text/javascript">
                      var w=window;
                      if(w.performance||w.mozPerformance||w.msPerformance||w.webkitPerformance){var d=document,AKSB=AKSB||{};AKSB.q=[];AKSB.mark=function(a,b){AKSB.q.push(["mark",a,b||(new Date).getTime()])};AKSB.measure=function(a,b,c){AKSB.q.push(["measure",a,b,c||(new Date).getTime()])};AKSB.done=function(a){AKSB.q.push(["done",a])};AKSB.mark("firstbyte",(new Date).getTime());AKSB.prof={custid:"322179",ustr:"UNKNOWN",originlat:0,clientrtt:72,ghostip:"88.221.89.231",
                      ipv6:false,pct:10,clientip:"46.7.198.110",requestid:"1b392e07",protocol:"",blver:10,akM:"dscx",akN:"ae",akTT:"O",akTX:"1",akTI:"1b392e07",ai:"206465",ra:"",pmgn:"",pmgi:"",pmp:""};(function(a){var b=
                      d.createElement("script");b.async="async";b.src=a;a=d.getElementsByTagName("script");a=a[a.length-1];a.parentNode.insertBefore(b,a)})(("https:"===d.location.protocol?"https:":"http:")+"//ds-aksb-a.akamaihd.net/aksb.min.js")};
                    </script>
                    </head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/19</span> <!-- End Header -->
<div id="DBSEG004" class="chapter"><a id="BABHFJFJ"></a>
<h1 class="chapter"><span class="secnum">4</span> Configuring Privilege and Role Authorization</h1>
<p><a id="sthref462"></a>This chapter contains:</p>
<ul>
<li>
<p><a href="#BABCHEJB">About Privileges and Roles</a></p>
</li>
<li>
<p><a href="#BABGFGHC">Who Should Be Granted Privileges?</a></p>
</li>
<li>
<p><a href="#CACEIIDF">Granting Administrative Privileges to Users</a></p>
</li>
<li>
<p><a href="#BABGGBDG">Managing System Privileges</a></p>
</li>
<li>
<p><a href="#BABCADIB">Managing User Roles</a></p>
</li>
<li>
<p><a href="#BABCIHGB">Managing Object Privileges</a></p>
</li>
<li>
<p><a href="#BABGDGJH">Granting a User Privileges and Roles</a></p>
</li>
<li>
<p><a href="#BABGFIAI">Revoking Privileges and Roles from a User</a></p>
</li>
<li>
<p><a href="#BABHJFCF">Granting to and Revoking from the PUBLIC Role</a></p>
</li>
<li>
<p><a href="#BABIEADD">Granting Roles Using the Operating System or Network</a></p>
</li>
<li>
<p><a href="#BABJEHFA">When Do Grants and Revokes Take Effect?</a></p>
</li>
<li>
<p><a href="#CIHDAJDJ">Managing Fine-Grained Access to External Network Services</a></p>
</li>
<li>
<p><a href="#BABFHBFH">Finding Information About User Privileges and Roles</a></p>
</li>
</ul>
<a id="BABCHEJB"></a>
<div id="DBSEG124" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Privileges and Roles</h2>
<p>Authorization includes primarily two processes:</p>
<ul>
<li>
<p>Permitting only certain users to access, process, or alter data.</p>
</li>
<li>
<p>Applying varying limitations on user access or actions. The limitations placed on (or removed from) users can apply to objects such as schemas, tables, or rows or to resources such as time (CPU, connect, or idle times).</p>
</li>
</ul>
<p><a id="sthref463"></a>A user <span class="bold">privilege</span> is the right to run a particular type of SQL statement, or the right to access an object that belongs to another user, run a PL/SQL package, and so on. The types of privileges are defined by Oracle Database.</p>
<p><a id="sthref464"></a><span class="bold">Roles</span> are created by users (usually administrators) to group together privileges or other roles. They are a way to facilitate the granting of multiple privileges or roles to users.</p>
<p>This section describes the following general categories:</p>
<ul>
<li>
<p><span class="bold">System privileges.</span> These privileges allow the grantee to perform standard administrator tasks in the database. Restrict them only to trusted users. <a href="#BABGGBDG">"Managing System Privileges"</a> describes system privileges in detail.</p>
</li>
<li>
<p><span class="bold">User roles.</span> A <span class="bold">role</span> groups several privileges and roles, so that they can be granted to and revoked from users simultaneously. You must enable the role for a user before the user can use it. See <a href="#BABCADIB">"Managing User Roles"</a> for more information.</p>
</li>
<li>
<p><span class="bold">Object privileges.</span> Each type of object has privileges associated with it. <a href="#BABCIHGB">"Managing Object Privileges"</a> describes how to manage privileges for different types of objects.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BABGFGHC"></a>
<div id="DBSEG97962" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Who Should Be Granted Privileges?</h2>
<p><a id="sthref465"></a>You grant privileges to users so they can accomplish tasks required for their jobs. You should grant a privilege only to a user who requires that privilege to accomplish the necessary work. Excessive granting of unnecessary privileges can compromise security. For example, you never should grant <code>SYSDBA</code> or <code>SYSOPER</code> privilege to users who do not perform administrative tasks.</p>
<p>A user can receive a privilege in two ways:</p>
<ul>
<li>
<p>You can grant privileges to users explicitly. For example, you can explicitly grant to user <code>psmith</code> the privilege to insert records into the <code>employees</code> table.</p>
</li>
<li>
<p><a id="sthref466"></a>You also can grant privileges to a role (a named group of privileges), and then grant the role to one or more users. For example, you can grant the privileges to select, insert, update, and delete records from the <code>employees</code> table to the role named <code>clerk</code>, which in turn you can grant to users <code>psmith</code> and <code>robert</code>.</p>
</li>
</ul>
<p><a id="sthref467"></a>Because roles allow for easier and better management of privileges, you should usually grant privileges to roles and not to specific users.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="guidelines.htm#CHDHFIFG">"Guidelines for Securing User Accounts and Privileges"</a> for best practices to follow when granting privileges</p>
</li>
<li>
<p><a class="olink SQLRF" href="../../server.111/b28286/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for the complete list of system privileges and their descriptions</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CACEIIDF"></a>
<div id="DBSEG331" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Granting Administrative Privileges to Users</h2>
<p>As <a id="sthref468"></a>with all powerful privileges, only grant administrative privileges to trusted users. However, be aware that there is a restriction for users whose names have non-ASCII characters (for example, the umlaut in the name <code>H&Uuml;BER</code>). You can grant administrative privileges to these users, but if the Oracle database instance is down, the authentication using the granted privilege is not supported if the user name has non-ASCII characters. If the database instance is up, then the authentication is supported.</p>
</div>
<!-- class="sect1" -->
<a id="BABGGBDG"></a>
<div id="DBSEG97963" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing System Privileges</h2>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#BABJECHH">About System Privileges</a></p>
</li>
<li>
<p><a href="#BABJCGBB">Why Is It Important to Restrict System Privileges?</a></p>
</li>
<li>
<p><a href="#i1009082">Granting and Revoking System Privileges</a></p>
</li>
<li>
<p><a href="#i1009087">Who Can Grant or Revoke System Privileges?</a></p>
</li>
<li>
<p><a href="#BABGGBBH">About ANY Privileges and the PUBLIC Role</a></p>
</li>
</ul>
<a id="BABJECHH"></a>
<div id="DBSEG40431" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About System Privileges</h3>
<p><a id="sthref469"></a><a id="sthref470"></a>A <span class="bold">system privilege</span> is the right to perform a particular action or to perform an action on any schema objects of a particular type. For example, the privileges to create tablespaces and to delete the rows of any table in a database are system privileges.</p>
<p>There are over 100 distinct system privileges. Each system privilege allows a user to perform a particular database operation or class of database operations. <span class="italic">Remember that <a id="sthref471"></a>system privileges are very powerful.</span> Only grant them when necessary to roles and trusted users of the database. You can find a complete list of system privileges and their descriptions in <a class="olink SQLRF01603" href="../../server.111/b28286/statements_9013.htm#SQLRF01603"><span class="italic">Oracle Database SQL Language Reference.</span></a>To find the system privileges that have been granted to a user, you can query the <code>DBA_SYS_PRIVS</code> data dictionary view.</p>
</div>
<!-- class="sect2" -->
<a id="BABJCGBB"></a>
<div id="DBSEG97964" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Why Is It Important to Restrict System Privileges?</h3>
<p>Because <a id="sthref472"></a>system privileges are so powerful, by default the database is configured to prevent typical (non-administrative) users from exercising the <code><a id="sthref473"></a>ANY</code> system privileges (such as <code>UPDATE ANY TABLE</code>) on the data dictionary. See <a href="guidelines.htm#CHDHFIFG">"Guidelines for Securing User Accounts and Privileges"</a> for additional guidelines about restricting system privileges.</p>
<ul>
<li>
<p><a href="#BABHIFHF">Restricting System Privileges by Securing the Data Dictionary</a></p>
</li>
<li>
<p><a href="#BABDDDBJ">Securing Scheduler Jobs That Run in the Schema of a Grantee</a></p>
</li>
<li>
<p><a href="#BABFCAFH">Allowing Access to Objects in the SYS Schema</a></p>
</li>
</ul>
<a id="BABHIFHF"></a>
<div id="DBSEG97965" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Restricting System Privileges by Securing the Data Dictionary</h4>
<p>To secure the data dictionary, set<a id="sthref474"></a> the <code><a id="sthref475"></a><a id="sthref476"></a><a id="sthref477"></a>O7_DICTIONARY_ACCESSIBILITY</code> initialization parameter to <code>FALSE</code>, which is the default value. This feature is called the <a id="sthref478"></a>dictionary protection mechanism.</p>
<p>The <code>O7_DICTIONARY_ACCESSIBILITY</code> initialization parameter controls restrictions on system privileges when you upgrade from Oracle Database release 7 to Oracle8<span class="italic">i</span> and later releases. If the parameter is set to <code>TRUE</code>, then access to objects in the <code>SYS</code> schema is allowed (Oracle Database release 7 behavior). Because the <code>ANY</code> privilege applies to the data dictionary, a malicious user with <code>ANY</code> privilege could access or alter data dictionary tables.</p>
<p>To set the <code>O7_DICTIONARY_ACCESSIBILTY</code> initialization parameter, modify it in the <code>init</code><code><span class="codeinlineitalic">SID</span></code><code>.ora</code> file. Alternatively, you can log on to SQL*Plus as user <code>SYS</code> with the <code>SYSDBA</code> privilege and then enter an <code>ALTER SYSTEM</code> statement, assuming you have started the database using a server parameter file (SPFILE).</p>
<p><a href="#BABJJIEH">Example 4-1</a> <a id="sthref479"></a>shows how to set the <code>O7_DICTIONARY_ACCESSIBILTY</code> initialization parameter to <code>FALSE</code> by issuing an <code>ALTER SYSTEM</code> statement in SQL*Plus.</p>
<div id="DBSEG97966" class="example">
<p class="titleinexample"><a id="BABJJIEH"></a>Example 4-1 Setting O7_DICTIONARY_ACCESSIBILITY to FALSE</p>
<pre>
ALTER SYSTEM SET O7_DICTIONARY_ACCESSIBILITY=FALSE SCOPE=SPFILE;
</pre></div>
<!-- class="example" -->
<p>When you set <code>O7_DICTIONARY_ACCESSIBILITY</code> to <code>FALSE</code>, system privileges that enable access to objects in any schema (for example, users who have <code>ANY</code> privileges, such as <code>CREATE ANY PROCEDURE</code>) do not allow access to objects in the <code>SYS</code> schema. This means that access to the objects in the <code>SYS</code> schema (data dictionary objects) is restricted to users who connect using the <code>SYSDBA</code> privilege. Remember that the <code>SYS</code> user must log in with either the <code>SYSDBA</code> or <code>SYSOPER</code> privilege; otherwise, an<a id="sthref480"></a><a id="sthref481"></a> <code>ORA-28009: connection as SYS should be as SYSDBA or SYSOPER</code> error is raised. If you set <code>O7_DICTIONARY_ACCESSIBILITY</code> to <code>TRUE</code>, then you would be able to log in to the database as user <code>SYS</code> without having to specify the <code>SYSDBA</code> or <code>SYSOPER</code> privilege.</p>
<p>System privileges that provide access to objects in other schemas do <span class="italic">not</span> give other users access to objects in the <code>SYS</code> schema. For example, the <code>SELECT ANY TABLE</code> privilege allows users to access views and tables in other schemas, but does not enable them to select dictionary objects (base tables of dynamic performance views, regular views, packages, and synonyms). You can, however, grant these users explicit object privileges to access objects in the <code>SYS</code> schema.</p>
<p>See <a class="olink REFRN10133" href="../../server.111/b28320/initparams149.htm#REFRN10133"><span class="italic">Oracle Database Reference</span></a> for more information about the <code>O7_DICTIONARY_ACCESSIBILITY</code> initialization parameter.</p>
</div>
<!-- class="sect3" -->
<a id="BABDDDBJ"></a>
<div id="DBSEG97967" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Securing Scheduler Jobs That Run in the Schema of a Grantee</h4>
<p>The <a id="sthref482"></a><a id="sthref483"></a><code>CREATE EXTERNAL JOB</code> privilege is automatically created in the schema of the grantee user so that operating system jobs can run outside the database. To support backward compatibility, by default, this privilege is granted to all existing users who have the <code>CREATE JOB</code> privilege. For greater security, grant the <code>CREATE EXTERNAL JOB</code> privilege only to <code>SYS</code>, database administrators, and those users who need it.</p>
</div>
<!-- class="sect3" -->
<a id="BABFCAFH"></a>
<div id="DBSEG97968" class="sect3">
<h4 class="sect3">Allowing Access to Objects in the SYS Schema</h4>
<p><a id="sthref484"></a><a id="sthref485"></a>Users with explicit object privileges or those who connect with administrative privileges (<code>SYSDBA</code>) can access objects in the <code>SYS</code> schema.</p>
<p><a href="#BABHAJCJ">Table 4-1</a> lists roles that you can grant to users who need access to objects in the <code>SYS</code> schema.</p>
<div id="DBSEG97969" class="tblhruleformal">
<p class="titleintable"><a id="sthref486"></a><a id="BABHAJCJ"></a>Table 4-1 Roles to Allow Access to SYS Schema Objects</p>
<table class="cellalignment1576" title="Roles to Allow Access to SYS Schema Objects" summary="Roles to allow access to SYS schema objects" dir="ltr">
<thead>
<tr class="cellalignment1570">
<th class="cellalignment1577" id="r1c1-t3">Role</th>
<th class="cellalignment1577" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r2c1-t3" headers="r1c1-t3">
<p><code>SELECT_CATALOG_ROLE</code><a id="sthref487"></a></p>
</td>
<td class="cellalignment1578" headers="r2c1-t3 r1c2-t3">
<p>Grant this role to allow users <code>SELECT</code> privileges on data dictionary views.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r3c1-t3" headers="r1c1-t3">
<p><code>EXECUTE_CATALOG_ROLE</code><a id="sthref488"></a></p>
</td>
<td class="cellalignment1578" headers="r3c1-t3 r1c2-t3">
<p>Grant this role to allow users <code>EXECUTE</code> privileges for packages and procedures in the data dictionary.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r4c1-t3" headers="r1c1-t3">
<p><code>DELETE_CATALOG_ROLE</code><a id="sthref489"></a></p>
</td>
<td class="cellalignment1578" headers="r4c1-t3 r1c2-t3">
<p>Grant this role to allow users to delete records from the system audit tables <code>SYS.AUD$</code> and <code>SYS.FGA_LOG$</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>Additionally, you can grant the <code>SELECT ANY DICTIONARY</code> system privilege to users who require access to tables created in the <code>SYS</code> schema. This system privilege allows query access to any object in the <code>SYS</code> schema, including tables created in that schema. It must be granted individually to each user requiring the privilege. It is not included in <code>GRANT ALL PRIVILEGES</code>, but it can be granted through a role.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
You should grant these roles and the <code>SELECT ANY DICTIONARY</code> system privilege with extreme care, because the integrity of your system can be compromised by their misuse.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1009082"></a>
<div id="DBSEG97970" class="sect2">
<h3 class="sect2">Granting and Revoking System Privileges</h3>
<p><a id="sthref490"></a><a id="sthref491"></a><a id="sthref492"></a>You can <a id="sthref493"></a><a id="sthref494"></a><a id="sthref495"></a>grant or revoke system privileges to users and roles. If you grant system privileges to roles, then you can use the roles to exercise system privileges. For example, roles permit privileges to be made selectively available. Ensure that you follow the separation of duty guidelines described in <a href="guidelines.htm#CHDGIEJE">"Guidelines for Securing Roles"</a>.</p>
<p>Use either of the following methods to grant or revoke system privileges to or from users and roles:</p>
<ul>
<li>
<p><code>GRANT</code> and <code>REVOKE</code> SQL statements</p>
</li>
<li>
<p>Oracle Enterprise Manager Database Control</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABGDGJH">"Granting a User Privileges and Roles"</a></p>
</li>
<li>
<p><a href="#BABGFIAI">"Revoking Privileges and Roles from a User"</a></p>
</li>
<li>
<p><a href="#BABJEHFA">"When Do Grants and Revokes Take Effect?"</a></p>
</li>
<li>
<p><a href="#BABFHBFH">"Finding Information About User Privileges and Roles"</a></p>
</li>
<li>
<p><a class="olink ADMQS003" href="../../server.111/b28301/em_manage.htm#ADMQS003"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about Database Control</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i1009087"></a>
<div id="DBSEG97971" class="sect2">
<h3 class="sect2">Who Can Grant or Revoke System Privileges?</h3>
<p><a id="sthref496"></a><a id="sthref497"></a><a id="sthref498"></a><a id="sthref499"></a>Only two types of users can grant system privileges to other users or revoke those privileges from them:</p>
<ul>
<li>
<p>Users who were granted a specific system privilege with the <code>ADMIN</code> <code>OPTION</code></p>
</li>
<li>
<p>Users with the system privilege <code>GRANT</code> <code>ANY</code> <code>PRIVILEGE</code></p>
</li>
</ul>
<p>For this reason, only grant these privileges to trusted users.</p>
</div>
<!-- class="sect2" -->
<a id="BABGGBBH"></a>
<div id="DBSEG97972" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About ANY Privileges and the PUBLIC Role</h3>
<p>System privileges that use the <code>ANY</code> keyword enable you to set privileges for an entire category of objects in the database. For example, the <code>CREATE ANY PROCEDURE</code> system privilege permits a user to create a procedure anywhere in the database. The behavior of an object created by users with the <code>ANY</code> privilege is not restricted to the schema in which it was created. For example, if user <code>JSMITH</code> has the <code>CREATE ANY PROCEDURE</code> privilege and creates a procedure in the schema <code>JONES</code>, then the procedure will run as <code>JONES</code>. However, <code>JONES</code> may not be aware that the procedure <code>JSMITH</code> created is running as him (<code>JONES</code>). If <code>JONES</code> has <code>DBA</code> privileges, letting <code>JSMITH</code> run a procedure as <code>JONES</code> could pose a security violation.</p>
<p>The <code>PUBLIC</code> role <a id="sthref500"></a>is a special role that every database user account automatically has when the account is created. By default, it has no privileges granted to it, but it does have numerous grants, mostly to Java objects. You cannot drop the <code>PUBLIC</code> role, and a manual grant or revoke of this role has no meaning, because the user account will always assume this role. Because all database user accounts assume the <code>PUBLIC</code> role, it does not appear in the <a id="sthref501"></a><code>DBA_ROLES</code> and <a id="sthref502"></a><code>SESSION_ROLES</code> data dictionary views.</p>
<p>You can grant privileges to the <code><a id="sthref503"></a><a id="sthref504"></a>PUBLIC</code> role, but remember that this makes the privileges available to every user in the Oracle database. For this reason, be careful about granting privileges to the <code>PUBLIC</code> role, particularly powerful privileges such as the <code>ANY</code> privileges and system privileges. For example, if <code>JSMITH</code> has the <code>CREATE PUBLIC SYNONYM</code> system privilege, he could redefine an interface that he knows everyone else uses, and then point to it with the <code>PUBLIC SYNONYM</code> that he created. Instead of accessing the correct interface, users would access the interface of <code>JSMITH</code>, which could possibly perform illegal activities such as stealing the login credentials of users.</p>
<p>These types of privileges are very powerful and could pose a <a id="sthref505"></a>security risk if given to the wrong person. Be careful about granting privileges using <code>ANY</code> or <code>PUBLIC</code>. As with all privileges, you should follow the principles of "least privilege" when granting these privileges to users.</p>
<p>To protect the data dictionary (the contents of the <code>SYS</code> schema) against users who have one or more of the powerful <code>ANY</code> system privileges, set the <code>O7_DICTIONARY_ACCESSIBILITY</code> initialization parameter to <code>FALSE</code>. You can set this parameter by using an <code>ALTER SYSTEM</code> statement (see <a href="#BABJJIEH">Example 4-1, "Setting O7_DICTIONARY_ACCESSIBILITY to FALSE"</a>) or by modifying the <code>init</code><code><span class="codeinlineitalic">SID</span></code><code>.ora</code> file. See <a href="guidelines.htm#i1007892">"Guidelines for Securing a Database Installation and Configuration"</a> for additional guidelines.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABCADIB"></a>
<div id="DBSEG97973" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing User Roles</h2>
<p><a id="sthref506"></a><a id="sthref507"></a>This section contains:</p>
<ul>
<li>
<p><a href="#i1007091">About User Roles</a></p>
</li>
<li>
<p><a href="#i1007401">Predefined Roles in an Oracle Database Installation</a></p>
</li>
<li>
<p><a href="#i1007493">Creating a Role</a></p>
</li>
<li>
<p><a href="#i1008785">Specifying the Type of Role Authorization</a></p>
</li>
<li>
<p><a href="#CHDHCEJH">Dropping Roles</a></p>
</li>
<li>
<p><a href="#CIHEJEEC">Restricting SQL*Plus Users from Using Database Roles</a></p>
</li>
<li>
<p><a href="#i1008520">Securing Role Privileges by Using Secure Application Roles</a></p>
</li>
</ul>
<a id="i1007091"></a>
<div id="DBSEG224" class="sect2"><a id="g1017669"></a>
<h3 class="sect2">About User Roles</h3>
<p>Managing and controlling privileges is easier when you use <span class="bold">roles</span><span class="bold"><a id="sthref508"></a></span>, which are named groups of related privileges that you grant as a group to users or other roles. <a id="sthref509"></a><a id="sthref510"></a>Within a database, each role name must be unique, different from all user names and all other role names. Unlike schema objects, roles are not contained in any schema. Therefore, a user who creates a role can be dropped with no effect on the role.</p>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#i14551">The Functionality of Roles</a></p>
</li>
<li>
<p><a href="#i1009383">Properties of Roles and Why They Are Advantageous</a></p>
</li>
<li>
<p><a href="#i1008309">Common Uses of Roles</a></p>
</li>
<li>
<p><a href="#i1008334">How Roles Affect the Scope of a User's Privileges</a></p>
</li>
<li>
<p><a href="#i1007304">How Roles Work in PL/SQL Blocks</a></p>
</li>
<li>
<p><a href="#i1007654">How Roles Aid or Restrict DDL Usage</a></p>
</li>
<li>
<p><a href="#i1010805">How Operating Systems Can Aid Roles</a></p>
</li>
<li>
<p><a href="#i1007449">How Roles Work in a Distributed Environment</a></p>
</li>
</ul>
<a id="i14551"></a>
<div id="DBSEG44411" class="sect3">
<h4 class="sect3">The Functionality of Roles</h4>
<p>Roles are useful for quickly and easily granting permissions to users. Although you can use Oracle Database-defined roles, you have more control and continuity if you <a id="sthref511"></a><a id="sthref512"></a>create your own roles that contain only the privileges pertaining to your requirements. Oracle may change or remove the privileges in an Oracle Database-defined role, as it has with the <a id="sthref513"></a><a id="sthref514"></a><code>CONNECT</code> role, which now has only the <a id="sthref515"></a><code>CREATE SESSION</code> privilege. Formerly, this role had eight other privileges.</p>
<p>Roles <a id="sthref516"></a>have the following functionality:</p>
<ul>
<li>
<p>A role can be granted system or object privileges.</p>
</li>
<li>
<p>Any role can be granted to any database user.</p>
</li>
<li>
<p>Each <a id="sthref517"></a><a id="sthref518"></a>role granted to a user is, at a given time, either enabled or disabled. A user's security domain includes the privileges of all roles currently enabled for the user and excludes the privileges of any roles currently disabled for the user. Oracle Database allows database applications and users to enable and disable roles to provide selective availability of privileges.</p>
</li>
<li>
<p>A <a id="sthref519"></a>role can be granted to other roles. However, a role cannot be granted to itself and cannot be granted circularly. For example, role <code>role1</code> cannot be granted to role <code>role2</code> if role <code>role2</code> has previously been granted to role <code>role1</code>.</p>
</li>
<li>
<p>If <a id="sthref520"></a><a id="sthref521"></a>a role is not password authenticated or a secure application role, then you can grant the role indirectly to the user. An indirectly granted role is a role granted to the user through another role that has already been granted to this user. For example, suppose you grant user <code>psmith</code> the <code>role1</code> role. Then you grant the <code>role2</code> and <code>role3</code> roles to the <code>role1</code> role. Roles <code>role2</code> and <code>role3</code> are now under <code>role1</code>. This means <code>psmith</code> has been indirectly granted the roles <code>role2</code> and <code>role3</code>, in addition to the direct grant of <code>role1</code>. Enabling the direct <code>role1</code> for <code>psmith</code> enables the indirect roles <code>role2</code> and <code>role3</code> for this user as well.</p>
</li>
<li>
<p>Optionally, you can make a directly granted role a default role. You enable or disable the default role status of a directly granted role by using the <code>DEFAULT ROLE</code> clause of the <code>ALTER USER</code> statement. Ensure that the <code>DEFAULT ROLE</code> clause refers only to roles that have been directly granted to the user. To find the directly granted roles for a user, query the <code>DBA_ROLE_PRIVS</code> data dictionary view. This view does not include the user's indirectly granted roles. To find roles that are granted to other roles, query the <code>ROLE_ROLE_PRIVS</code> view.</p>
</li>
<li>
<p>If the role is password authenticated or a secure application role, then you cannot grant it indirectly to the user, nor can you make it a default role. You only can grant this type of role directly to the user. Typically, you enable password authenticated or secure application roles by using the <code>SET ROLE</code> statement.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="i1009383"></a>
<div id="DBSEG97974" class="sect3">
<h4 class="sect3">Properties of Roles and Why They Are Advantageous</h4>
<p><a id="sthref522"></a><a href="#CHDCGHAG">Table 4-2</a> describes the properties of roles that enable easier privilege management within a database.</p>
<div id="DBSEG97975" class="tblhruleformal">
<p class="titleintable"><a id="sthref523"></a><a id="CHDCGHAG"></a>Table 4-2 Properties of Roles and Their Description</p>
<table class="cellalignment1576" title="Properties of Roles and Their Description" summary="This table lists and describes role properties." dir="ltr">
<thead>
<tr class="cellalignment1570">
<th class="cellalignment1577" id="r1c1-t6">Property</th>
<th class="cellalignment1577" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r2c1-t6" headers="r1c1-t6">
<p>Reduced privilege administration</p>
</td>
<td class="cellalignment1578" headers="r2c1-t6 r1c2-t6">
<p>Rather than granting the same set of privileges explicitly to several users, you can grant the privileges for a group of related users to a role, and then only the role must be granted to each member of the group.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r3c1-t6" headers="r1c1-t6">
<p>Dynamic privilege management</p>
</td>
<td class="cellalignment1578" headers="r3c1-t6 r1c2-t6">
<p>If the privileges of a group must change, then only the privileges of the role need to be modified. The security domains of all users granted the group's role automatically reflect the changes made to the role.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r4c1-t6" headers="r1c1-t6">
<p>Selective availability of privileges</p>
</td>
<td class="cellalignment1578" headers="r4c1-t6 r1c2-t6">
<p>You can selectively enable or disable the roles granted to a user. This allows specific control of a user's privileges in any given situation.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r5c1-t6" headers="r1c1-t6">
<p>Application awareness</p>
</td>
<td class="cellalignment1578" headers="r5c1-t6 r1c2-t6">
<p>The data dictionary records which roles exist, so you can design applications to query the dictionary and automatically enable (or disable) selective roles when a user attempts to execute the application by way of a given user name.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r6c1-t6" headers="r1c1-t6">
<p>Application-specific security</p>
</td>
<td class="cellalignment1578" headers="r6c1-t6 r1c2-t6">
<p>You can protect role use with a password. Applications can be created specifically to enable a role when supplied the correct password. Users cannot enable the role if they do not know the password.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><a id="sthref524"></a><a id="sthref525"></a><a id="sthref526"></a>Database administrators often create roles for a database application. You should grant a secure application role all privileges necessary to run the application. You then can grant the secure application role to other roles or users. An application can have several different roles, each granted a different set of privileges that allow for more or less data access while using the application.</p>
<p><a id="sthref527"></a><a id="sthref528"></a>The DBA can create a role with a password to prevent unauthorized use of the privileges granted to the role. Typically, an application is designed so that when it starts, it enables the proper role. As a result, an application user does not need to know the password for an application role.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1007654">"How Roles Aid or Restrict DDL Usage"</a> for information about restrictions for procedures</div>
</div>
<!-- class="sect3" -->
<a id="i1008309"></a>
<div id="DBSEG44412" class="sect3">
<h4 class="sect3">Common Uses of Roles</h4>
<p><a id="sthref529"></a>In general, you create a role to serve one of two purposes:</p>
<ul>
<li>
<p>To manage the privileges for a database application (see <a href="#i1011902">"Common Uses of Application Roles"</a>)</p>
</li>
<li>
<p>To manage the privileges for a user group (see <a href="#i1009435">"Common Uses of User Roles"</a>)</p>
</li>
</ul>
<p><a href="#i1011899">Figure 4-1</a> and the sections that follow describe the two uses of roles.</p>
<div id="DBSEG97976" class="figure">
<p class="titleinfigure"><a id="i1011899"></a>Figure 4-1 Common Uses for Roles</p>
<img width="403" height="231" src="img/cncpt082.gif" alt="Common Uses for Roles" /><br /></div>
<!-- class="figure" -->
<a id="i1011902"></a>
<div id="DBSEG41218" class="sect4">
<h5 class="sect4">Common Uses of Application Roles</h5>
<p><a id="sthref530"></a><a id="sthref531"></a>Grant an application role all privileges necessary to run a given database application. Then, grant the secure application role to other roles or to specific users. An application can have several different roles, with each role assigned a different set of privileges that allow for more or less data access while using the application.</p>
</div>
<!-- class="sect4" -->
<a id="i1009435"></a>
<div id="DBSEG41219" class="sect4">
<h5 class="sect4">Common Uses of User Roles</h5>
<p><a id="sthref532"></a><a id="sthref533"></a>Create a user role for a group of database users with common privilege requirements. You can manage user privileges by granting secure application roles and privileges to the user role and then granting the user role to appropriate users.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="i1008334"></a>
<div id="DBSEG97977" class="sect3">
<h4 class="sect3">How Roles Affect the Scope of a User's Privileges</h4>
<p><a id="sthref534"></a><a id="sthref535"></a>Each role and user has its own unique security domain. The security domain of a role includes the privileges granted to the role plus those privileges granted to any roles that are granted to the role.</p>
<p>The security domain of a user includes privileges on all schema objects in the corresponding schema, the privileges granted to the user, and the privileges of roles granted to the user that are <span class="bold">currently enabled</span>. (A role can be simultaneously enabled for one user and disabled for another.) <a id="sthref536"></a><a id="sthref537"></a>This domain also includes the privileges and roles granted to the role <code>PUBLIC</code>. The <code>PUBLIC</code> role represents all users in the database.</p>
</div>
<!-- class="sect3" -->
<a id="i1007304"></a>
<div id="DBSEG50010" class="sect3">
<h4 class="sect3">How Roles Work in PL/SQL Blocks</h4>
<p><a id="sthref538"></a><a id="sthref539"></a><a id="sthref540"></a>The use of roles in a PL/SQL block depends on whether it is an anonymous block or a named block (stored procedure, function, or trigger), and whether it executes with definer's rights or invoker's rights.</p>
<div id="DBSEG97978" class="sect4"><a id="sthref541"></a>
<h5 class="sect4">Roles Used in Named Blocks with Definer's Rights</h5>
<p><a id="sthref542"></a><a id="sthref543"></a>All roles are disabled in any named PL/SQL block (stored procedure, function, or trigger) that executes with definer's rights. Roles are not used for privilege checking and you cannot set roles within a definer's rights procedure.</p>
<p><a id="sthref544"></a>The <code>SESSION_ROLES</code> view shows all roles that are currently enabled. If a named PL/SQL block that executes with definer's rights queries <code>SESSION_ROLES</code>, then the query does not return any rows.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../../server.111/b28320/toc.htm"><span class="italic">Oracle Database Reference</span></a></div>
</div>
<!-- class="sect4" -->
<div id="DBSEG97979" class="sect4"><a id="sthref545"></a>
<h5 class="sect4">Roles Used in Named Blocks with Invoker's Rights and Anonymous PL/SQL Blocks</h5>
<p><a id="sthref546"></a><a id="sthref547"></a><a id="sthref548"></a>Named PL/SQL blocks that execute with invoker's rights and anonymous PL/SQL blocks are executed based on privileges granted through enabled roles. Current roles are used for privilege checking within an invoker's rights PL/SQL block. You can use dynamic SQL to set a role in the session.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink LNPLS00809" href="../../appdev.111/b28370/subprograms.htm#LNPLS00809"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for an explanation of invoker's and definer's rights</p>
</li>
<li>
<p><a class="olink LNPLS011" href="../../appdev.111/b28370/dynamic.htm#LNPLS011"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about dynamic SQL in PL/SQL</p>
</li>
</ul>
</div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="i1007654"></a>
<div id="DBSEG97980" class="sect3">
<h4 class="sect3">How Roles Aid or Restrict DDL Usage</h4>
<p><a id="sthref549"></a><a id="sthref550"></a>A user requires one or more privileges to successfully execute a DDL statement, depending on the statement. For example, to create a table, the user must have the <code>CREATE</code> <code>TABLE</code> or <code>CREATE</code> <code>ANY</code> <code>TABLE</code> system privilege. To create a view of a table that belongs to another user, the creator requires the <code>CREATE VIEW</code> or <code>CREATE</code> <code>ANY</code> <code>VIEW</code> system privilege and either the <code>SELECT</code> <code><span class="codeinlineitalic">object</span></code> privilege for the table or the <code>SELECT</code> <code>ANY</code> <code>TABLE</code> system privilege.</p>
<p><a id="sthref551"></a><a id="sthref552"></a><a id="sthref553"></a>Oracle Database avoids the dependencies on privileges received by way of roles by restricting the use of specific privileges in certain DDL statements. The following rules describe these privilege restrictions concerning DDL statements:</p>
<ul>
<li>
<p>All system privileges and object privileges that permit a user to perform a DDL operation are usable when received through a role. For example:</p>
<ul>
<li>
<p><span class="bold">System privileges:</span> <code>CREATE</code> <code>TABLE</code>, <code>CREATE</code> <code>VIEW,</code> and <code>CREATE</code> <code>PROCEDURE</code> privileges</p>
</li>
<li>
<p><span class="bold">Object privileges:</span> <code>ALTER</code> and <code>INDEX</code> privileges for a table</p>
<p>You cannot use the <code>REFERENCES</code> object privilege for a table to define the foreign key of a table if the privilege is received through a role.</p>
</li>
</ul>
</li>
<li>
<p>All system privileges and object privileges that allow a user to perform a DML operation that is required to issue a DDL statement are <span class="italic">not</span> usable when received through a role. The security domain does not contain roles when a <code>CREATE VIEW</code> statement is used. For example, a user who is granted the <code>SELECT</code> <code>ANY</code> <code>TABLE</code> system privilege or the <code>SELECT</code> <code><span class="codeinlineitalic">object</span></code> privilege for a table through a role cannot use either of these privileges to create a view on a table that belongs to another user. This is because views are definer's rights objects, so when creating them you cannot use any privileges (neither system privileges or object privileges) granted to you through a role. If the privilege is granted directly to you, then you can use the privilege. However, if the privilege is revoked at a later time, then the view definition becomes invalid ("contains errors") and must recompiled before it can be used again.</p>
</li>
</ul>
<p>The following example further clarifies the permitted and restricted uses of privileges received through roles.</p>
<p>Assume that a user is:</p>
<ul>
<li>
<p>Granted a role that has the <code>CREATE</code> <code>VIEW</code> system privilege</p>
</li>
<li>
<p>Directly granted a role that has the <code>SELECT</code> <code><span class="codeinlineitalic">object</span></code> privilege for the <code>employees</code> table</p>
</li>
<li>
<p>Directly granted the <code>SELECT</code> <code><span class="codeinlineitalic">object</span></code> privilege for the <code>departments</code> table</p>
</li>
</ul>
<p>Given these directly and indirectly granted privileges:</p>
<ul>
<li>
<p>The user can issue <code>SELECT</code> statements on both the <code>employees</code> and <code>departments</code> tables.</p>
</li>
<li>
<p>Although the user has both the <code>CREATE</code> <code>VIEW</code> and <code>SELECT</code> privilege for the <code>employees</code> table through a role, the user cannot create a view on the <code>employees</code> table, because the <code>SELECT</code> <code><span class="codeinlineitalic">object</span></code> privilege for the <code>employees</code> table was granted through a role.</p>
</li>
<li>
<p>The user can create a view on the <code>departments</code> table, because the user has the <code>CREATE</code>&nbsp;<code>VIEW</code> privilege through a role and the <code>SELECT</code> privilege for the <code>departments</code> table directly.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="i1010805"></a>
<div id="DBSEG44417" class="sect3">
<h4 class="sect3">How Operating Systems Can Aid Roles</h4>
<p><a id="sthref554"></a><a id="sthref555"></a>In some environments, you can administer database security using the operating system. The operating system can be used to grant and revoke database roles and to manage their password authentication. This capability is not available on all operating systems.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Your operating system-specific Oracle Database documentation for details about managing roles through the operating system</div>
</div>
<!-- class="sect3" -->
<a id="i1007449"></a>
<div id="DBSEG97981" class="sect3">
<h4 class="sect3">How Roles Work in a Distributed Environment</h4>
<p>When you use roles in a distributed database environment, ensure that all needed roles are set as the default roles for a distributed (remote) session. These roles cannot be enabled when the user connects to a remote database from within a local database session. For example, the user cannot execute a remote procedure that attempts to enable a role at the remote site.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink HETER" href="../../server.111/b28277/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity Administrator's Guide</span></a></div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1007401"></a>
<div id="DBSEG4414" class="sect2">
<h3 class="sect2">Predefined Roles in an Oracle Database Installation</h3>
<p>Oracle Database provides a set of predefined roles to help in database administration. <a id="sthref556"></a>These roles, listed in <a href="#g2199949">Table 4-3</a>, are automatically defined for Oracle databases when you run the standard scripts that are part of database creation. If you install other options or products, then other predefined roles may be created.</p>
<div id="DBSEG97982" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref557"></a><a id="g2199949"></a>Table 4-3 Oracle Database Predefined Roles</p>
<table class="cellalignment1576" title="Oracle Database Predefined Roles" summary="Column 1 contains the predefined roles. Column 2 describes the purpose of the role and contains cross-references to additional information." dir="ltr">
<thead>
<tr class="cellalignment1570">
<th class="cellalignment1577" id="r1c1-t12">Predefined Role</th>
<th class="cellalignment1577" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r2c1-t12" headers="r1c1-t12">
<p><code>AQ_ADMINISTRATOR_ROLE<a id="sthref558"></a><a id="sthref559"></a></code></p>
</td>
<td class="cellalignment1578" headers="r2c1-t12 r1c2-t12">
<p>Provides privileges to administer Advanced Queuing. Includes <code>ENQUEUE ANY QUEUE</code>, <code>DEQUEUE ANY QUEUE</code>, and <code>MANAGE ANY QUEUE</code>, <code>SELECT</code> privileges on Advanced Queuing tables and <code>EXECUTE</code> privileges on Advanced Queuing packages.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r3c1-t12" headers="r1c1-t12">
<p><code>AQ_USER_ROLE<a id="sthref560"></a><a id="sthref561"></a></code></p>
</td>
<td class="cellalignment1578" headers="r3c1-t12 r1c2-t12">
<p>Obsolete, but kept mainly for release 8.0 compatibility. Provides <code>EXECUTE</code> privileges on the <code>DBMS_AQ</code> and <code>DBMS_AQIN</code> packages.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r4c1-t12" headers="r1c1-t12">
<p><code>AUTHENTICATEDUSER</code><a id="sthref562"></a><a id="sthref563"></a></p>
</td>
<td class="cellalignment1578" headers="r4c1-t12 r1c2-t12">
<p>Used by the XDB protocols to define any user who has logged in to the system.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r5c1-t12" headers="r1c1-t12">
<p><code>CONNECT</code> <a id="sthref564"></a><a id="sthref565"></a></p>
</td>
<td class="cellalignment1578" headers="r5c1-t12 r1c2-t12">
<p>Provides the <code>CREATE SESSION</code> system privilege.</p>
<p>This role is provided for compatibility with previous releases of Oracle Database. You can determine the privileges encompassed by this role by querying the <code>DBA_SYS_PRIVS</code> data dictionary view.</p>
<p><span class="bold">Note:</span> Oracle recommends that you design your own roles for database security rather than relying on this role. This role may not be created automatically by future releases of Oracle Database.</p>
<p><span class="bold">See Also:</span> <a class="olink REFRN23274" href="../../server.111/b28320/statviews_5036.htm#REFRN23274"><span class="italic">Oracle Database Reference</span></a> for a description of the <code>DBA_SYS_PRIVS</code> view</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r6c1-t12" headers="r1c1-t12">
<p><code>CSW_USR_ROLE</code><a id="sthref566"></a><a id="sthref567"></a></p>
</td>
<td class="cellalignment1578" headers="r6c1-t12 r1c2-t12">
<p>Provides user privileges to manage the Catalog Services for the Web (CSW) component of Oracle Spatial.</p>
<p><span class="bold">See Also:</span> <a class="olink SPATL425" href="../../appdev.111/b28400/sdo_csw.htm#SPATL425"><span class="italic">Oracle Spatial Developer's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r7c1-t12" headers="r1c1-t12">
<p><code>CTXAPP</code><a id="sthref568"></a><a id="sthref569"></a></p>
</td>
<td class="cellalignment1578" headers="r7c1-t12 r1c2-t12">
<p>Provides privileges to create Oracle Text indexes and index preferences, and to use PL/SQL packages. This role should be granted to Oracle Text users.</p>
<p><span class="bold">See Also:</span> <a class="olink CCAPP" href="../../text.111/b28303/toc.htm"><span class="italic">Oracle Text Application Developer's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r8c1-t12" headers="r1c1-t12">
<p><code>CWM_USER</code><a id="sthref570"></a><a id="sthref571"></a></p>
</td>
<td class="cellalignment1578" headers="r8c1-t12 r1c2-t12">
<p>Provides privileges to manage Common Warehouse Metadata (CWM), which is a repository standard used by Oracle data warehousing and decision support.</p>
<p><span class="bold">See Also:</span> <a class="olink DWHSG" href="../../server.111/b28313/toc.htm"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r9c1-t12" headers="r1c1-t12">
<p><code>DATAPUMP_EXP_FULL_DATABASE</code><a id="sthref572"></a><a id="sthref573"></a></p>
</td>
<td class="cellalignment1578" headers="r9c1-t12 r1c2-t12">
<p>Provides privileges to export data from an Oracle database using Oracle Data Pump.</p>
<p><span class="bold">See Also:</span> <a class="olink SUTIL200" href="../../server.111/b28319/dp_export.htm#SUTIL200"><span class="italic">Oracle Database Utilities</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r10c1-t12" headers="r1c1-t12">
<p><code>DATAPUMP_IMP_FULL_DATABASE</code><a id="sthref574"></a><a id="sthref575"></a></p>
</td>
<td class="cellalignment1578" headers="r10c1-t12 r1c2-t12">
<p>Provides privileges to import data into an Oracle database using Oracle Data Pump.</p>
<p><span class="bold">See Also:</span> <a class="olink SUTIL300" href="../../server.111/b28319/dp_import.htm#SUTIL300"><span class="italic">Oracle Database Utilities</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r11c1-t12" headers="r1c1-t12">
<p><code>DBA</code><a id="sthref576"></a><a id="sthref577"></a></p>
</td>
<td class="cellalignment1578" headers="r11c1-t12 r1c2-t12">
<p>Provides all system privileges <code>WITH ADMIN OPTION</code>.</p>
<p>This role is provided for compatibility with previous releases of Oracle Database. You can determine the privileges encompassed by this role by querying the <code>DBA_SYS_PRIVS</code> data dictionary view.</p>
<p><span class="bold">Note:</span> Oracle recommends that you design your own roles for database security rather than relying on this role. This role may not be created automatically by future releases of Oracle Database.</p>
<p><span class="bold">See Also:</span> <a class="olink REFRN23274" href="../../server.111/b28320/statviews_5036.htm#REFRN23274"><span class="italic">Oracle Database Reference</span></a> for a description of the <code>DBA_SYS_PRIVS</code> view</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r12c1-t12" headers="r1c1-t12">
<p><code>DELETE_CATALOG_ROLE<a id="sthref578"></a><a id="sthref579"></a></code><a id="sthref580"></a></p>
</td>
<td class="cellalignment1578" headers="r12c1-t12 r1c2-t12">
<p>Provides the <code>DELETE</code> privilege on the system audit table (<code>AUD$</code>).</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r13c1-t12" headers="r1c1-t12">
<p><code>EJBCLIENT</code><a id="sthref581"></a><a id="sthref582"></a></p>
</td>
<td class="cellalignment1578" headers="r13c1-t12 r1c2-t12">
<p>Provides privileges to connect to EJBs from a Java stored procedure.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r14c1-t12" headers="r1c1-t12">
<p><code>EXECUTE_CATALOG_ROLE<a id="sthref583"></a><a id="sthref584"></a></code></p>
</td>
<td class="cellalignment1578" headers="r14c1-t12 r1c2-t12">
<p>Provides <code>EXECUTE</code> privileges on objects in the data dictionary. Also provides the <code>HS_ADMIN_ROLE</code> privilege.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r15c1-t12" headers="r1c1-t12">
<p><code>EXP_FULL_DATABASE</code><a id="sthref585"></a><a id="sthref586"></a></p>
</td>
<td class="cellalignment1578" headers="r15c1-t12 r1c2-t12">
<p>Provides the privileges required to perform full and incremental database exports, and includes: <code>SELECT ANY TABLE</code>, <code>BACKUP ANY TABLE</code>, <code>EXECUTE ANY PROCEDURE</code>, <code>EXECUTE ANY TYPE</code>, <code>ADMINISTER RESOURCE MANAGER</code>, and <code>INSERT</code>, <code>DELETE</code>, and <code>UPDATE</code> on the tables <code>SYS.INCVID</code>, <code>SYS.INCFIL</code>, and <code>SYS.INCEXP</code>. Also the following roles: <code>EXECUTE_CATALOG_ROLE</code> and <code>SELECT_CATALOG_ROLE</code>.</p>
<p>This role is provided for convenience in using the export and import utilities.</p>
<p><span class="bold">See Also:</span> <a class="olink SUTIL" href="../../server.111/b28319/toc.htm"><span class="italic">Oracle Database Utilities</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r16c1-t12" headers="r1c1-t12">
<p><code>GATHER_SYSTEM_STATISTICS</code><a id="sthref587"></a><a id="sthref588"></a></p>
</td>
<td class="cellalignment1578" headers="r16c1-t12 r1c2-t12">
<p>Provides privileges to update system statistics, which are collected using the <code>DBMS_STATS.GATHER_SYSTEM_STATISTICS</code> procedure</p>
<p><span class="bold">See Also:</span> <a class="olink PFGRF003" href="../../server.111/b28274/stats.htm#PFGRF003"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information about managing optimizer statistics</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r17c1-t12" headers="r1c1-t12">
<p><code>GLOBAL_AQ_USER_ROLE</code><a id="sthref589"></a><a id="sthref590"></a></p>
</td>
<td class="cellalignment1578" headers="r17c1-t12 r1c2-t12">
<p>Provides privileges to establish a connection to an LDAP server, for use with Oracle Streams AQ.</p>
<p><span class="bold">See Also:</span> <a class="olink ADQUE" href="../../server.111/b28420/toc.htm"><span class="italic">Oracle Streams Advanced Queuing User's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r18c1-t12" headers="r1c1-t12">
<p><code>HS_ADMIN_ROLE</code><a id="sthref591"></a><a id="sthref592"></a></p>
</td>
<td class="cellalignment1578" headers="r18c1-t12 r1c2-t12">
<p>Provides privileges for DBAs who need to use the <code>DBA</code> role using Oracle Database Heterogeneous Services to access appropriate tables in the data dictionary.</p>
<p>Used to protect access to the Heterogeneous Services (HS) data dictionary tables (grants <code>SELECT</code>) and packages (grants <code>EXECUTE</code>). It is granted to <code>SELECT_CATALOG_ROLE</code> and <code>EXECUTE_CATALOG_ROLE</code> such that users with generic data dictionary access also can access the HS data dictionary.</p>
<p><span class="bold">See Also:</span> <a class="olink HETER" href="../../server.111/b28277/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity Administrator's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r19c1-t12" headers="r1c1-t12">
<p><code>IMP_FULL_DATABASE</code> <a id="sthref593"></a><a id="sthref594"></a></p>
</td>
<td class="cellalignment1578" headers="r19c1-t12 r1c2-t12">
<p>Provides the privileges required to perform full database imports. Includes an extensive list of system privileges (use view <code>DBA_SYS_PRIVS</code> to view privileges) and the following roles: <code>EXECUTE_CATALOG_ROLE</code> and <code>SELECT_CATALOG_ROLE</code>.</p>
<p>This role is provided for convenience in using the export and import utilities.</p>
<p><span class="bold">See Also:</span> <a class="olink SUTIL" href="../../server.111/b28319/toc.htm"><span class="italic">Oracle Database Utilities</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r20c1-t12" headers="r1c1-t12">
<p><code>JAVADEBUGPRIV</code><a id="sthref595"></a><a id="sthref596"></a></p>
</td>
<td class="cellalignment1578" headers="r20c1-t12 r1c2-t12">
<p>Provides privileges to run the Oracle Database Java applications debugger.</p>
<p><span class="bold">See Also:</span> <a class="olink JJDEV" href="../../java.111/b31225/toc.htm"><span class="italic">Oracle Database Java Developer's Guide</span></a> for more information about managing security for Oracle Java applications</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r21c1-t12" headers="r1c1-t12">
<p><code>JAVAIDPRIV</code><a id="sthref597"></a><a id="sthref598"></a></p>
</td>
<td class="cellalignment1578" headers="r21c1-t12 r1c2-t12">
<p>Deprecated for this release.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r22c1-t12" headers="r1c1-t12">
<p><code>JAVASYSPRIV</code><a id="sthref599"></a><a id="sthref600"></a></p>
</td>
<td class="cellalignment1578" headers="r22c1-t12 r1c2-t12">
<p>Provides major permissions to use Java2, including updating Oracle JVM-protected packages.</p>
<p><span class="bold">See Also:</span> <a class="olink JJDEV" href="../../java.111/b31225/toc.htm"><span class="italic">Oracle Database Java Developer's Guide</span></a> for more information about managing security for Oracle Java applications</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r23c1-t12" headers="r1c1-t12">
<p><code>JAVAUSERPRIV</code><a id="sthref601"></a><a id="sthref602"></a></p>
</td>
<td class="cellalignment1578" headers="r23c1-t12 r1c2-t12">
<p>Provides limited permissions to use Java2.</p>
<p><span class="bold">See Also:</span> <a class="olink JJDEV" href="../../java.111/b31225/toc.htm"><span class="italic">Oracle Database Java Developer's Guide</span></a> for more information about managing security for Oracle Java applications</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r24c1-t12" headers="r1c1-t12">
<p><code>JAVA_ADMIN</code><a id="sthref603"></a><a id="sthref604"></a></p>
</td>
<td class="cellalignment1578" headers="r24c1-t12 r1c2-t12">
<p>Provides administrative permissions to update policy tables for Oracle Database Java applications.</p>
<p><span class="bold">See Also:</span> <a class="olink JJDEV" href="../../java.111/b31225/toc.htm"><span class="italic">Oracle Database Java Developer's Guide</span></a> for more information about managing security for Oracle Java applications</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r25c1-t12" headers="r1c1-t12">
<p><code>JAVA_DEPLOY</code><a id="sthref605"></a><a id="sthref606"></a></p>
</td>
<td class="cellalignment1578" headers="r25c1-t12 r1c2-t12">
<p>Provides privileges to deploy <code>ncomp</code> DLLs into the <code>javavm/admin</code> directory using the <code>ncomp</code> and <code>deployns</code> utilities. Without this role, the <code>javavm/deploy</code> and <code>javavm/admin</code> directories can be accessible.</p>
<p><span class="bold">See Also:</span> <a class="olink ADFNS" href="../../appdev.111/b28424/toc.htm"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r26c1-t12" headers="r1c1-t12">
<p><code>JMXSERVER</code><a id="sthref607"></a><a id="sthref608"></a></p>
</td>
<td class="cellalignment1578" headers="r26c1-t12 r1c2-t12">
<p>Provides privileges to start and maintain a JMX agent in a database session.</p>
<p><span class="bold">See Also:</span> <a class="olink JJDEV02000" href="../../java.111/b31225/chtwo.htm#JJDEV02000"><span class="italic">Oracle Database Java Developer's Guide</span></a> for more information about managing Oracle Java applications</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r27c1-t12" headers="r1c1-t12">
<p><code>LBAC_DBA</code><a id="sthref609"></a><a id="sthref610"></a></p>
</td>
<td class="cellalignment1578" headers="r27c1-t12 r1c2-t12">
<p>Provides permissions to use the <code>SA_SYSDBA</code> PL/SQL package.</p>
<p><span class="bold">See Also:</span> <a class="olink OLSAG044" href="../../network.111/b28529/creatpol.htm#OLSAG044"><span class="italic">Oracle Label Security Administrator's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r28c1-t12" headers="r1c1-t12">
<p><code>LOGSTDBY_ADMINISTRATOR</code><a id="sthref611"></a><a id="sthref612"></a></p>
</td>
<td class="cellalignment1578" headers="r28c1-t12 r1c2-t12">
<p>Provides administrative privileges to manage the SQL Apply (logical standby database) environment.</p>
<p><span class="bold">See Also:</span> <a class="olink SBYDB00800" href="../../server.111/b28294/manage_ls.htm#SBYDB00800"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r29c1-t12" headers="r1c1-t12">
<p><code>MGMT_USER</code><a id="sthref613"></a><a id="sthref614"></a></p>
</td>
<td class="cellalignment1578" headers="r29c1-t12 r1c2-t12">
<p>Provides administrative privileges to perform various activities with Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r30c1-t12" headers="r1c1-t12">
<p><code>OEM_ADVISOR</code><a id="sthref615"></a><a id="sthref616"></a></p>
</td>
<td class="cellalignment1578" headers="r30c1-t12 r1c2-t12">
<p>Provides privileges to create, drop, select (read), load (write), and delete a SQL tuning set through the <code>DBMS_SQLTUNE</code> PL/SQL package, and to access to the Advisor framework using the <code>ADVISOR</code> PL/SQL package.</p>
<p><span class="bold">See Also:</span> <a class="olink PFGRF02801" href="../../server.111/b28274/sql_tune.htm#PFGRF02801"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r31c1-t12" headers="r1c1-t12">
<p><code>OEM_MONITOR</code><a id="sthref617"></a><a id="sthref618"></a></p>
</td>
<td class="cellalignment1578" headers="r31c1-t12 r1c2-t12">
<p>Provides privileges needed by the Management Agent component of Oracle Enterprise Manager to monitor and manage the database.</p>
<p><span class="bold">See Also:</span> <a class="olink PFGRF02801" href="../../server.111/b28274/sql_tune.htm#PFGRF02801"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r32c1-t12" headers="r1c1-t12">
<p><code>OLAPI_TRACE_USER</code><a id="sthref619"></a><a id="sthref620"></a></p>
</td>
<td class="cellalignment1578" headers="r32c1-t12 r1c2-t12">
<p>Provides privileges to perform OLAP API tracing. Contact Oracle Support for more information.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r33c1-t12" headers="r1c1-t12">
<p><code>OLAP_DBA</code><a id="sthref621"></a><a id="sthref622"></a></p>
</td>
<td class="cellalignment1578" headers="r33c1-t12 r1c2-t12">
<p>Provides administrative privileges to create dimensional objects in different schemas for Oracle OLAP.</p>
<p><span class="bold">See Also:</span> <a class="olink OLAUG" href="../../olap.111/b28124/toc.htm"><span class="italic">Oracle OLAP User's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r34c1-t12" headers="r1c1-t12">
<p><code>OLAP_USER</code><a id="sthref623"></a><a id="sthref624"></a></p>
</td>
<td class="cellalignment1578" headers="r34c1-t12 r1c2-t12">
<p>Provides application developers privileges to create dimensional objects in their own schemas for Oracle OLAP.</p>
<p><span class="bold">See Also:</span> <a class="olink OLAUG" href="../../olap.111/b28124/toc.htm"><span class="italic">Oracle OLAP User's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r35c1-t12" headers="r1c1-t12">
<p><code>OLAP_XS_ADMIN</code><a id="sthref625"></a><a id="sthref626"></a></p>
</td>
<td class="cellalignment1578" headers="r35c1-t12 r1c2-t12">
<p>Provides privileges to administer security for Oracle OLAP.</p>
<p><span class="bold">See Also:</span> <a class="olink OLAUG" href="../../olap.111/b28124/toc.htm"><span class="italic">Oracle OLAP User's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r36c1-t12" headers="r1c1-t12">
<p><code>ORDADMIN</code><a id="sthref627"></a><a id="sthref628"></a></p>
</td>
<td class="cellalignment1578" headers="r36c1-t12 r1c2-t12">
<p>Provides privileges to administer Oracle Multimedia DICOM.</p>
<p><span class="bold">See Also:</span> <a class="olink IMDCM7000" href="../../appdev.111/b28416/ch_adm_over.htm#IMDCM7000"><span class="italic">Oracle Multimedia DICOM Developer's Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r37c1-t12" headers="r1c1-t12">
<p><code>OWB$CLIENT</code><a id="sthref629"></a><a id="sthref630"></a><a id="sthref631"></a></p>
</td>
<td class="cellalignment1578" headers="r37c1-t12 r1c2-t12">
<p>Provides privileges to perform standard client-related tasks for Oracle Warehouse Builder, such as creating projects, modules, tables, views, maps, and so on. Warehouse Builder automatically grants this role to all workspace owners and users. (That is, you do not need to explicitly grant it to anyone who must use Warehouse Builder.) For security reasons, the <code>OWB$CLIENT</code> role is not a default role for Warehouse Builder users: Oracle Warehouse Builder enables this role only when it is needed.</p>
<p><span class="bold">See Also:</span> <a class="olink WBDOD" href="../../owb.111/b31278/toc.htm"><span class="italic">Oracle Warehouse Builder User's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r38c1-t12" headers="r1c1-t12">
<p><code>OWB_DESIGNCENTER_VIEW</code><a id="sthref632"></a><a id="sthref633"></a></p>
</td>
<td class="cellalignment1578" headers="r38c1-t12 r1c2-t12">
<p>Provides privileges from the database level for any registered Oracle Warehouse Builder user to query the Warehouse Builder public views, such as <code>ALL_IV_PROJECTS</code>. A Warehouse Builder administrator can use the <code>ACCESS_PUBLICVIEW_BROWSER</code> system privilege from the Warehouse Builder security level to control an Warehouse Builder user's access to those public views.</p>
<p><span class="bold">See Also:</span> <a class="olink WBDOD" href="../../owb.111/b31278/toc.htm"><span class="italic">Oracle Warehouse Builder User's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r39c1-t12" headers="r1c1-t12">
<p><code>OWB_USER</code><a id="sthref634"></a><a id="sthref635"></a></p>
</td>
<td class="cellalignment1578" headers="r39c1-t12 r1c2-t12">
<p>Provides privileges to create and own an Oracle Warehouse Builder workspace. When a workspace owner registers other database users to this workspace, Oracle Database grants this role to these users. Users with this role also have access to Warehouse Builder Control Center public views and other Control Center utilities. Oracle Warehouse Builder grants this role to all Warehouse Builder users.</p>
<p><span class="bold">See Also:</span> <a class="olink WBDOD" href="../../owb.111/b31278/toc.htm"><span class="italic">Oracle Warehouse Builder User's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r40c1-t12" headers="r1c1-t12">
<p><code>RECOVERY_CATALOG_OWNER<a id="sthref636"></a><a id="sthref637"></a></code></p>
</td>
<td class="cellalignment1578" headers="r40c1-t12 r1c2-t12">
<p>Provides privileges for owner of the recovery catalog. Includes: <code>CREATE SESSION</code>, <code>ALTER SESSION</code>, <code>CREATE SYNONYM</code>, <code>CREATE VIEW</code>, <code>CREATE DATABASE LINK</code>, <code>CREATE TABLE</code>, <code>CREATE CLUSTER</code>, <code>CREATE SEQUENCE</code>, <code>CREATE TRIGGER</code>, and <code>CREATE PROCEDURE</code></p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r41c1-t12" headers="r1c1-t12">
<p><code>RESOURCE</code><a id="sthref638"></a><a id="sthref639"></a></p>
</td>
<td class="cellalignment1578" headers="r41c1-t12 r1c2-t12">
<p>Provides the following system privileges: <code>CREATE CLUSTER</code>, <code>CREATE INDEXTYPE</code>, <code>CREATE OPERATOR</code>, <code>CREATE PROCEDURE</code>, <code>CREATE SEQUENCE</code>, <code>CREATE TABLE</code>, <code>CREATE TRIGGER</code>, <code>CREATE TYPE</code>.</p>
<p>This role is provided for compatibility with previous releases of Oracle Database. You can determine the privileges encompassed by this role by querying the <code>DBA_SYS_PRIVS</code> data dictionary view.</p>
<p><span class="bold">Note:</span> Oracle recommends that you design your own roles for database security rather than relying on this role. This role may not be created automatically by future releases of Oracle Database.</p>
<p><span class="bold">See Also:</span> <a class="olink REFRN" href="../../server.111/b28320/toc.htm"><span class="italic">Oracle Database Reference</span></a> for a description of the <code>DBA_SYS_PRIVS</code> view</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r42c1-t12" headers="r1c1-t12">
<p><code>SCHEDULER_ADMIN</code><a id="sthref640"></a><a id="sthref641"></a></p>
</td>
<td class="cellalignment1578" headers="r42c1-t12 r1c2-t12">
<p>Allows the grantee to execute the procedures of the <code>DBMS_SCHEDULER</code> package. It includes all of the job scheduler system privileges and is included in the <code>DBA</code> role.</p>
<p><span class="bold">See Also:</span> <a class="olink ADMIN033" href="../../server.111/b28310/schedover.htm#ADMIN033"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about the <code>DBMS_SCHEDULER</code> package</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r43c1-t12" headers="r1c1-t12">
<p><code>SELECT_CATALOG_ROLE<a id="sthref642"></a><a id="sthref643"></a></code></p>
</td>
<td class="cellalignment1578" headers="r43c1-t12 r1c2-t12">
<p>Provides <code>SELECT</code> privilege on objects in the data dictionary. Also provides the <code>HS_ADMIN_ROLE</code> privilege.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r44c1-t12" headers="r1c1-t12">
<p><code>SPATIAL_CSW_ADMIN</code><a id="sthref644"></a><a id="sthref645"></a></p>
</td>
<td class="cellalignment1578" headers="r44c1-t12 r1c2-t12">
<p>Provides administrative privileges to manage the Catalog Services for the Web (CSW) component of Oracle Spatial.</p>
<p><span class="bold">See Also:</span> <a class="olink SPATL425" href="../../appdev.111/b28400/sdo_csw.htm#SPATL425"><span class="italic">Oracle Spatial Developer's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r45c1-t12" headers="r1c1-t12">
<p><code>SPATIAL_WFS_ADMIN</code><a id="sthref646"></a><a id="sthref647"></a></p>
</td>
<td class="cellalignment1578" headers="r45c1-t12 r1c2-t12">
<p>Provides administrative privileges to manage the Web Feature Service (WFS) component of Oracle Spatial.</p>
<p><span class="bold">See Also:</span> <a class="olink SPATL420" href="../../appdev.111/b28400/sdo_wfs.htm#SPATL420"><span class="italic">Oracle Spatial Developer's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r46c1-t12" headers="r1c1-t12">
<p><code>WFS_USR_ROLE</code><a id="sthref648"></a><a id="sthref649"></a></p>
</td>
<td class="cellalignment1578" headers="r46c1-t12 r1c2-t12">
<p>Provides user privileges for the Web Feature Service (WFS) component of Oracle Spatial.</p>
<p><span class="bold">See Also:</span> <a class="olink SPATL420" href="../../appdev.111/b28400/sdo_wfs.htm#SPATL420"><span class="italic">Oracle Spatial Developer's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r47c1-t12" headers="r1c1-t12">
<p><code>WKUSER</code><a id="sthref650"></a><a id="sthref651"></a></p>
</td>
<td class="cellalignment1578" headers="r47c1-t12 r1c2-t12">
<p>Provides privileges for users who need to host new Oracle Ultra Search instances.</p>
<p><span class="bold">See Also:</span> <a class="olink ULTRA" href="../../ultra.111/b28330/toc.htm"><span class="italic">Oracle Ultra Search Administrator's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r48c1-t12" headers="r1c1-t12">
<p><code>WM_ADMIN_ROLE</code><a id="sthref652"></a><a id="sthref653"></a></p>
</td>
<td class="cellalignment1578" headers="r48c1-t12 r1c2-t12">
<p>Provides administrative privileges for Oracle Workspace Manage. This enables users to run any <code>DBMS_WM</code> procedures on all version enabled tables, workspaces, and savepoints regardless of their owner. It also enables the user to modify the system parameters specific to Workspace Manager.</p>
<p><span class="bold">See Also:</span> <a class="olink ADWSM" href="../../appdev.111/b28396/toc.htm"><span class="italic">Oracle Database Workspace Manager Developer's Guide</span></a> for more information</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r49c1-t12" headers="r1c1-t12">
<p><code>XDBADMIN</code><a id="sthref654"></a><a id="sthref655"></a></p>
</td>
<td class="cellalignment1578" headers="r49c1-t12 r1c2-t12">
<p>Allows the grantee to register an XML schema globally, as opposed to registering it for use or access only by its owner. It also lets the grantee bypass access control list (ACL) checks when accessing Oracle XML DB Repository.</p>
<p><span class="bold">See Also:</span> <a class="olink ADXDB2400" href="../../appdev.111/b28369/xdb21sec.htm#ADXDB2400"><span class="italic">Oracle XML DB Developer's Guide</span></a> for information about XML schemas and the XML DB Repository</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r50c1-t12" headers="r1c1-t12">
<p><code>XDB_SET_INVOKER</code><a id="sthref656"></a><a id="sthref657"></a></p>
</td>
<td class="cellalignment1578" headers="r50c1-t12 r1c2-t12">
<p>Allows the grantee to define invoker's rights handlers and to create or update the resource configuration for XML repository triggers. By default, Oracle Database grants this role to the <code>DBA</code> role but not to the <code>XDBADMIN</code> role.</p>
<p><span class="bold">See Also:</span> <a class="olink ADXDB2400" href="../../appdev.111/b28369/xdb21sec.htm#ADXDB2400"><span class="italic">Oracle XML DB Developer's Guide</span></a> for information about Oracle Database XML repository triggers</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r51c1-t12" headers="r1c1-t12">
<p><code>XDB_WEBSERVICES</code><a id="sthref658"></a><a id="sthref659"></a></p>
</td>
<td class="cellalignment1578" headers="r51c1-t12 r1c2-t12">
<p>Allows the grantee to access Oracle Database Web services over HTTPS. However, it does not provide the user access to objects in the database that are public. To allow public access, you need to grant the user the <code>XDB_WEBSERVICES_WITH_PUBLIC</code> role. For a user to use these Web services, <code>SYS</code> must enable the Web service servlets.</p>
<p><span class="bold">See Also:</span> <a class="olink ADXDB2400" href="../../appdev.111/b28369/xdb21sec.htm#ADXDB2400"><span class="italic">Oracle XML DB Developer's Guide</span></a> for information about Oracle Database Web services</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r52c1-t12" headers="r1c1-t12">
<p><code>XDB_WEBSERVICES_OVER_HTTP</code><a id="sthref660"></a><a id="sthref661"></a></p>
</td>
<td class="cellalignment1578" headers="r52c1-t12 r1c2-t12">
<p>Allows the grantee to access Oracle Database Web services over HTTP. However, it does not provide the user access to objects in the database that are public. To allow public access, you need to grant the user the <code>XDB_WEBSERVICES_WITH_PUBLIC</code> role.</p>
<p><span class="bold">See Also:</span> <a class="olink ADXDB2400" href="../../appdev.111/b28369/xdb21sec.htm#ADXDB2400"><span class="italic">Oracle XML DB Developer's Guide</span></a> for information about Oracle Database Web services</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r53c1-t12" headers="r1c1-t12">
<p><code>XDB_WEBSERVICES_WITH_PUBLIC</code><a id="sthref662"></a><a id="sthref663"></a></p>
</td>
<td class="cellalignment1578" headers="r53c1-t12 r1c2-t12">
<p>Allows the grantee access to public objects through Oracle Database Web services.</p>
<p><span class="bold">See Also:</span> <a class="olink ADXDB2400" href="../../appdev.111/b28369/xdb21sec.htm#ADXDB2400"><span class="italic">Oracle XML DB Developer's Guide</span></a> for information about Oracle Database Web services</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwide" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Each installation should create its own roles and assign only those privileges that are needed, thus retaining detailed control of the privileges in use. This process also removes any need to adjust existing roles, privileges, or procedures whenever Oracle Database changes or removes roles that Oracle Database defines. For example, the <code>CONNECT</code> role now has only one privilege: <code>CREATE SESSION</code>.</div>
</div>
<!-- class="sect2" -->
<a id="i1007493"></a>
<div id="DBSEG97983" class="sect2">
<h3 class="sect2">Creating a Role</h3>
<p>You can create a role using the <code>CREATE ROLE</code> statement, <a id="sthref664"></a><a id="sthref665"></a>but you must have the <code>CREATE ROLE</code> system privilege to do so. Typically, only security administrators have this system privilege.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Immediately after creation, a role has no privileges associated with it. To associate privileges with a new role, you must grant privileges or other roles to the new role.</div>
<p><a id="sthref666"></a>You must give each role you create a unique name among existing user names and role names of the database. Roles are not contained in the schema of any user. <a id="sthref667"></a><a id="sthref668"></a><a id="sthref669"></a>In a database that uses a multibyte character set, Oracle recommends that each role name contain at least one single-byte character. If a role name contains only multibyte characters, then the encrypted role name and password combination is considerably less secure. See Guideline <a href="guidelines.htm#CHDDCHAH">1</a> in <a href="guidelines.htm#CHDEGEIF">"Guidelines for Securing Passwords"</a> for password guidelines.</p>
<p><a href="#BABIDDFI">Example 4-2</a> <a id="sthref670"></a>creates the <code>clerk</code> role.</p>
<div id="DBSEG97984" class="example">
<p class="titleinexample"><a id="BABIDDFI"></a>Example 4-2 Creating a User Role Authorized by a Password</p>
<pre>
CREATE ROLE clerk IDENTIFIED BY <span class="italic">password</span>;
</pre></div>
<!-- class="example" -->
<p>The <code>IDENTIFIED BY</code> clause specifies how the user must be authorized before the role can be enabled for use by a specific user to which it has been granted. If you do not specify this clause<a id="sthref671"></a><a id="sthref672"></a>, or if you specify <code>NOT IDENTIFIED</code>, then no authorization is required when the role is enabled. Roles can be specified to be authorized by:</p>
<ul>
<li>
<p>The database using a password</p>
</li>
<li>
<p>An application using a specified package</p>
</li>
<li>
<p>Externally by the operating system, network, or other external source</p>
</li>
<li>
<p>Globally by an enterprise directory service</p>
</li>
</ul>
<p>These authorizations are discussed in the following sections.</p>
<p>You <a id="sthref673"></a><a id="sthref674"></a>can set or change the authorization method for a role using the <code>ALTER ROLE</code> statement.<a id="sthref675"></a><a id="sthref676"></a><a id="sthref677"></a> Remember that you can only directly grant secure application roles or password-authenticated roles to a user.</p>
<p><a href="#BABCEHFA">Example 4-3</a> <a id="sthref678"></a>shows how to alter the <code>clerk</code> role to specify that the user must have been authorized by an external source before enabling the role.</p>
<div id="DBSEG97985" class="example">
<p class="titleinexample"><a id="BABCEHFA"></a>Example 4-3 Altering a Role to be Authorized by an External Source</p>
<pre>
ALTER ROLE clerk IDENTIFIED EXTERNALLY;
</pre></div>
<!-- class="example" -->
<p><a id="sthref679"></a><a id="sthref680"></a><a id="sthref681"></a><a id="sthref682"></a>To alter the authorization method for a role, you must have the <code>ALTER ANY ROLE</code> system privilege or have been granted the role with the <code>ADMIN OPTION</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF" href="../../server.111/b28286/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for syntax, restrictions, and authorization information about the SQL statements used to manage roles and privileges</div>
</div>
<!-- class="sect2" -->
<a id="i1008785"></a>
<div id="DBSEG97986" class="sect2">
<h3 class="sect2">Specifying the Type of Role Authorization</h3>
<p><a id="sthref683"></a><a id="sthref684"></a>The methods of authorizing roles are presented in this section. A role must be enabled for you to use it.</p>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#BABCGBAA">Authorizing a Role by Using the Database</a></p>
</li>
<li>
<p><a href="#i1007597">Authorizing a Role by Using an Application</a></p>
</li>
<li>
<p><a href="#BABHJIBF">Authorizing a Role by Using an External Source</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABJEHFA">"When Do Grants and Revokes Take Effect?"</a> for a discussion about enabling roles</div>
<a id="BABCGBAA"></a>
<div id="DBSEG97987" class="sect3">
<h4 class="sect3">Authorizing a Role by Using the Database</h4>
<p>You can protect a <a id="sthref685"></a>role authorized by the database by assigning the role a password. If a user is granted a role protected by a password, then you can enable or disable the role by supplying the proper password for the role in the <code>SET ROLE</code> statement. You cannot authenticate a password-authenticated role on logon, even if you add it to the list of default roles. You must explicitly enable it with the <code>SET ROLE</code> statement using the required password.</p>
<p><a href="#CHDCJCCJ">Example 4-4</a> <a id="sthref686"></a>shows how to set a password-authenticated role by using the <code>SET ROLE</code> statement.</p>
<div id="DBSEG97988" class="example">
<p class="titleinexample"><a id="CHDCJCCJ"></a>Example 4-4 Using SET ROLE for a Password-Authenticated Role</p>
<pre>
SET ROLE clerk IDENTIFIED BY <span class="italic">password</span>;
</pre></div>
<!-- class="example" -->
<p><a href="#BABIDDFI">Example 4-2, "Creating a User Role Authorized by a Password"</a> shows a <code>CREATE ROLE</code> statement that creates a role called <code>clerk</code>. When it is enabled, the password must be supplied.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref687"></a><a id="sthref688"></a><a id="sthref689"></a>In a database that uses a multibyte character set, passwords for roles must include only single-byte characters. Multibyte characters are not accepted in passwords. See Guideline <a href="guidelines.htm#CHDDCHAH">1</a> in <a href="guidelines.htm#CHDEGEIF">"Guidelines for Securing Passwords"</a> for password guidelines.</div>
</div>
<!-- class="sect3" -->
<a id="i1007597"></a>
<div id="DBSEG97989" class="sect3">
<h4 class="sect3">Authorizing a Role by Using an Application</h4>
<p><a id="i1007599"></a>An application role (secure application role) can be enabled only by applications using an authorized PL/SQL package. Application developers do not need to secure a role by embedding passwords inside applications. Instead, they can create an application role and specify which PL/SQL package is authorized to enable the role.</p>
<p>To create a role enabled by an authorized PL/SQL package, use the <code>IDENTIFIED USING</code> <code><span class="codeinlineitalic">package_name</span></code> clause in the <code>CREATE ROLE</code> SQL statement.</p>
<p><a href="#BABICIGC">Example 4-5</a> <a id="sthref690"></a>indicates that the role <code>admin_role</code> is an application role and the role can only be enabled by any module defined inside the PL/SQL package <code>hr.admin</code>.</p>
<div id="DBSEG97990" class="example">
<p class="titleinexample"><a id="BABICIGC"></a>Example 4-5 Creating a Role Authorized by a PL/SQL Package for an Application</p>
<pre>
CREATE ROLE admin_role IDENTIFIED USING hr.admin;
</pre></div>
<!-- class="example" -->
<p>See the following documentation for more information about secure application roles:</p>
<ul>
<li>
<p><a href="#i1008520">"Securing Role Privileges by Using Secure Application Roles"</a></p>
</li>
<li>
<p><a href="app_devs.htm#i1006262">"Creating Secure Application Roles to Control Access to Applications"</a></p>
</li>
<li>
<p><a class="olink TDPSG30032" href="../../server.111/b28337/tdpsg_privileges.htm#TDPSG30032"><span class="italic">Oracle Database 2 Day + Security Guide</span></a></p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="BABHJIBF"></a>
<div id="DBSEG97991" class="sect3">
<h4 class="sect3">Authorizing a Role by Using an External Source</h4>
<p>You can define the external role locally in the database, but you cannot grant the external role to global users, to global roles, or to any other roles in the database. You <a id="sthref691"></a><a id="sthref692"></a>can <a id="sthref693"></a>create roles that are authorized by the operating system or network clients.</p>
<p><a href="#BABJDFDC">Example 4-6</a> <a id="sthref694"></a>creates a role named <code>accts_rec</code> and requires that the user is authorized by an external source before it can be enabled:</p>
<div id="DBSEG97992" class="example">
<p class="titleinexample"><a id="BABJDFDC"></a>Example 4-6 Creating a Role Authorized by an External Source</p>
<pre>
CREATE ROLE accts_rec IDENTIFIED EXTERNALLY;
</pre></div>
<!-- class="example" -->
<div id="DBSEG97993" class="sect4"><a id="sthref695"></a>
<h5 class="sect4">Authorizing a Role by Using the Operating System</h5>
<p>Role authentication through the operating system is useful only when the operating system is able to dynamically link operating system privileges with applications. When a user starts an application, the operating system grants an operating system privilege to the user. The granted operating system privilege corresponds to the role associated with the application. At this point, the application can enable the application role. When the application is terminated, the previously granted operating system privilege is revoked from the operating system account of the user.</p>
<p>If a role is authorized by the operating system, then you must configure information for each user at the operating system level. This operation is operating system dependent.</p>
<p><a id="sthref696"></a><a id="sthref697"></a><a id="sthref698"></a>If roles are <a id="sthref699"></a>granted by the operating system, then you do not need to have the operating system authorize them also.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABIEADD">"Granting Roles Using the Operating System or Network"</a> for more information about roles granted by the operating system</div>
</div>
<!-- class="sect4" -->
<div id="DBSEG97994" class="sect4"><a id="sthref700"></a>
<h5 class="sect4">Authorizing a Role by Using a Network Client<a id="sthref701"></a></h5>
<p><a id="sthref702"></a>If users connect to the database over Oracle Net, then by default, their roles cannot be authenticated by the operating system. This includes connections through a shared server configuration, as this connection requires Oracle Net. This restriction is the default because a remote user could impersonate another operating system user over a network connection. Oracle recommends that you set <code>REMOTE_OS_ROLES</code> to <code>FALSE</code>, which is the default.</p>
<p><a id="sthref703"></a>If you are not concerned with this <a id="sthref704"></a>security risk and want to use operating system role authentication for network clients, then set the initialization parameter <code>REMOTE_OS_ROLES</code> in the database initialization parameter file to <code>TRUE</code>. The change will take effect the next time you start the instance and mount the database.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="BABFAABG"></a>
<div id="DBSEG97995" class="sect3">
<h4 class="sect3">Global Role Authorization by an Enterprise Directory Service<a id="sthref705"></a><a id="sthref706"></a><a id="sthref707"></a></h4>
<p>A role can be defined as a <a id="sthref708"></a><a id="sthref709"></a>global role, where a (global) user can only be authorized to use the role by an enterprise directory service. You define the global role locally in the database by granting privileges and roles to it, but you cannot grant the global role itself to any user or other role in the database. When a global user attempts to connect to the database, the enterprise directory is queried to obtain any global roles associated with the user.</p>
<p><a href="#BABFHAED">Example 4-7</a> <a id="sthref710"></a><a id="sthref711"></a>creates a global role.</p>
<div id="DBSEG97996" class="example">
<p class="titleinexample"><a id="BABFHAED"></a>Example 4-7 Creating a Global Role</p>
<pre>
CREATE ROLE supervisor IDENTIFIED GLOBALLY;
</pre></div>
<!-- class="example" -->
<p>Global roles are one component of enterprise user security. A global role only applies to one database, but you can grant it to an enterprise role defined in the enterprise directory. An <a id="sthref712"></a><a id="sthref713"></a>enterprise role is a directory structure that contains global roles on multiple databases and can be granted to <a id="sthref714"></a><a id="sthref715"></a>enterprise users.</p>
<p>See <a href="authentication.htm#i1006269">"Configuring Global User Authentication and Authorization"</a> for a general discussion of global authentication and authorization of users, and its role in enterprise user management.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBIMI" href="../b28528/toc.htm"><span class="italic">Oracle Database Enterprise User Security Administrator's Guide</span></a> for information about implementing enterprise user management</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1009504"></a>
<div id="DBSEG97997" class="sect2">
<h3 class="sect2">Granting and Revoking Roles</h3>
<p>You can grant system or object privileges to a role, and any role can be granted to any database user or to another role (but not to itself). However, a role cannot be granted circularly, that is, role <code>X</code> cannot be granted to role <code>Y</code> if role <code>Y</code> has previously been granted to role <code>X</code>.</p>
<p>To provide selective availability of privileges, Oracle Database permits applications and users to enable and disable roles. <a id="sthref716"></a><a id="sthref717"></a>Each role granted to a user is, at any given time, either enabled or disabled. The security domain of a user includes the privileges of all roles currently enabled for the user and excludes the privileges of any roles currently disabled for the user.</p>
<p>A role granted to a role is called an indirectly granted role. You can explicitly enable or disable it for a user. However, whenever you enable a role that contains other roles, you implicitly enable all indirectly granted roles of the directly granted role.</p>
<p><a id="sthref718"></a><a id="sthref719"></a>You grant roles to (or revoke roles from) users or other roles by using either of the following methods:</p>
<ul>
<li>
<p><a id="sthref720"></a>Oracle Enterprise Manager Database Control</p>
</li>
<li>
<p>The <code>GRANT</code> and <code>REVOKE</code> SQL statements</p>
</li>
</ul>
<p>Privileges are granted to and revoked from roles using the same options.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABGDGJH">"Granting a User Privileges and Roles"</a></p>
</li>
<li>
<p><a href="#BABGFIAI">"Revoking Privileges and Roles from a User"</a></p>
</li>
<li>
<p><a href="#BABJEHFA">"When Do Grants and Revokes Take Effect?"</a></p>
</li>
<li>
<p><a href="#BABFHBFH">"Finding Information About User Privileges and Roles"</a></p>
</li>
<li>
<p><a class="olink ADMQS003" href="../../server.111/b28301/em_manage.htm#ADMQS003"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about Database Control</p>
</li>
</ul>
</div>
<a id="i1008324"></a>
<div id="DBSEG97998" class="sect3">
<h4 class="sect3">Who Can Grant or Revoke Roles?</h4>
<p><a id="sthref721"></a>Any user with the <code>GRANT</code> <code>ANY</code> <code>ROLE</code> system privilege can grant or revoke any role except a global role to or from other users or roles of the database. (A global role is managed in a directory, such as Oracle Internet Directory, but its privileges are contained within a single database.) By default, the <code>SYS</code> or <code>SYSTEM</code> user has this privilege. You should grant this system privilege conservatively because it is very powerful.</p>
<p><a id="sthref722"></a>Any user granted a role with the <code>ADMIN</code> <code>OPTION</code> can grant or revoke that role to or from other users or roles of the database. This option allows administrative powers for roles to be granted on a selective basis.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBIMI" href="../b28528/toc.htm"><span class="italic">Oracle Database Enterprise User Security Administrator's Guide</span></a> for information about global roles</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDHCEJH"></a>
<div id="DBSEG97999" class="sect2">
<h3 class="sect2">Dropping Roles</h3>
<p><a id="sthref723"></a><a id="sthref724"></a><a id="sthref725"></a>In some cases, it may be appropriate to drop a role from the database. The security domains of all users and roles granted a dropped role are immediately changed to reflect the absence of the dropped role privileges. All indirectly granted roles of the dropped role are also removed from affected security domains. Dropping a role automatically removes the role from all user default role lists.</p>
<p>Because the existence of objects is not dependent on the privileges received through a role, tables and other objects are not dropped when a role is dropped.</p>
<p>You can drop a role using the SQL statement <code>DROP ROLE</code>. <a id="sthref726"></a><a id="sthref727"></a>To drop a role, you must have the <code>DROP ANY ROLE</code> system privilege or have been granted the role with the <code>ADMIN OPTION</code>.</p>
<p><a id="sthref728"></a>The following statement drops the role <code>CLERK</code>:</p>
<pre>
DROP ROLE clerk;
</pre></div>
<!-- class="sect2" -->
<a id="CIHEJEEC"></a>
<div id="DBSEG98000" class="sect2">
<h3 class="sect2">Restricting SQL*Plus Users from Using Database Roles<a id="sthref729"></a><a id="sthref730"></a><a id="sthref731"></a><a id="sthref732"></a><a id="sthref733"></a></h3>
<p>This section describes features that you can use to restrict SQL*Plus users from using database roles and thus, prevent serious security problems.</p>
<ul>
<li>
<p><a href="#CIHGGHAJ">Potential Security Problems of Using Ad Hoc Tools</a></p>
</li>
<li>
<p><a href="#CIHCAIAH">Limiting Roles Through the PRODUCT_USER_PROFILE Table</a></p>
</li>
<li>
<p><a href="#CIHGCAJB">Using Stored Procedures to Encapsulate Business Logic</a></p>
</li>
</ul>
<a id="CIHGGHAJ"></a>
<div id="DBSEG98001" class="sect3">
<h4 class="sect3">Potential Security Problems of Using Ad Hoc Tools</h4>
<p>Prebuilt database applications explicitly control<a id="sthref734"></a><a id="sthref735"></a> the potential actions of a user, including the enabling and disabling of user roles while using the application. By contrast, ad hoc query tools such as SQL*Plus, permit a user to submit any <a id="sthref736"></a><a id="sthref737"></a><a id="sthref738"></a>SQL statement (which may or may not succeed), including enabling and disabling a granted role.</p>
<p>Potentially, an application user can exercise the privileges attached to that application to issue destructive <a id="sthref739"></a><a id="sthref740"></a>SQL statements against database tables by using an ad hoc tool.</p>
<p>For example, consider the following scenario:</p>
<ul>
<li>
<p>The Vacation application has a corresponding <code>vacation</code> role.</p>
</li>
<li>
<p>The <code>vacation</code> role includes the privileges to issue <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> statements against the <code>emp_tab</code> table.</p>
</li>
<li>
<p>The Vacation application controls the use of privileges obtained through the <code>vacation</code> role.</p>
</li>
</ul>
<p>Now, consider a user who has been granted the <code>vacation</code> role. Suppose that, instead of using the Vacation application, the user executes SQL*Plus. At this point, the user is restricted only by the privileges granted to him explicitly or through roles, including the <code>vacation</code> role. Because SQL*Plus is an ad hoc query tool, the user is not restricted to a set of predefined actions, as with designed database applications. The user can query or modify data in the <code>emp_tab</code> table as he or she chooses.</p>
</div>
<!-- class="sect3" -->
<a id="CIHCAIAH"></a>
<div id="DBSEG98002" class="sect3">
<h4 class="sect3">Limiting Roles Through the PRODUCT_USER_PROFILE Table</h4>
<p>You can use the <a id="sthref741"></a><code>PRODUCT_USER_PROFILE</code> table, which is in the <code>SYSTEM</code> schema, to disable certain SQL and SQL*Plus commands in the SQL*Plus environment for each user. SQL*Plus, not the Oracle Database, enforces this security. You can even restrict access to the <code>GRANT</code>, <code>REVOKE</code>, and <code>SET ROLE</code> commands to control user ability to change their database privileges.</p>
<p>The <code>PRODUCT_USER_PROFILE</code> table enables you to list roles that you do not want users to activate with an application. You can also explicitly disable the use of various commands, such as <code>SET ROLE</code>.</p>
<p>For example, you could create an entry in the <code>PRODUCT_USER_PROFILE</code> table to:</p>
<ul>
<li>
<p>Disallow the use of the <code>clerk</code> and <code>manager</code> roles with SQL*Plus</p>
</li>
<li>
<p>Disallow the use of <code>SET ROLE</code> with SQL*Plus</p>
</li>
</ul>
<p>Suppose user Marla connects to the database using SQL*Plus. Marla has the <code>clerk</code>, <code>manager</code>, and <code>analyst</code> roles. As a result of the preceding entry in <code>PRODUCT_USER_PROFILE</code>, Marla is only able to exercise her <code>analyst</code> role with SQL*Plus. Also, when Ginny attempts to issue a <code>SET ROLE</code> statement, she is explicitly prevented from doing so because of the entry in the <code>PRODUCT_USER_PROFILE</code> table prohibiting use of <code>SET ROLE</code>.</p>
<p>Be aware that the <code><a id="sthref742"></a>PRODUCT_USER_PROFILE</code> table does not completely guarantee security, for multiple reasons. In the preceding example, while <code>SET ROLE</code> is disallowed with SQL*Plus, if Marla had other privileges granted to her directly, then she could exercise these using SQL*Plus.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQPUG019" href="../../server.111/b31189/ch9.htm#SQPUG019"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for more information about the <code>PRODUCT_USER_PROFILE</code> table</div>
</div>
<!-- class="sect3" -->
<a id="CIHGCAJB"></a>
<div id="DBSEG98003" class="sect3">
<h4 class="sect3">Using Stored Procedures to Encapsulate Business Logic</h4>
<p>Stored procedures encapsulate the use of privileges with business logic so that privileges are only exercised in the context of a well-formed business transaction. For example, an application developer can create a procedure to update the employee name and address in the <code>employees</code> table, which enforces that the data can only be updated in normal business hours. Also, rather than grant a human resources clerk the <code>UPDATE</code> privilege on the <code>employees</code> table, a security administrator may grant the privilege on the procedure only. Then, the human resources clerk can exercise the privilege only in the context of the procedures, and cannot update the <code>employees</code> table directly.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1008520"></a>
<div id="DBSEG524" class="sect2">
<h3 class="sect2">Securing Role Privileges by Using Secure Application Roles</h3>
<p>A <a id="sthref743"></a>secure application role is a role that can be enabled only by an authorized PL/SQL package (or procedure). The PL/SQL package itself reflects the security policies needed to control access to the application.</p>
<p>This method of role creation restricts the enabling of this type of role to the invoking application. For example, the application can perform authentication and customized authorization, such as checking whether the user has connected through a proxy.</p>
<p>This type of role strengthens security because passwords are not embedded in application source code or stored in a table. This way, the actions the database performs are based on the implementation of your security policies, and these definitions are stored in one place, the database, rather than in your applications. If you need to modify the policy, you do so in one place without having to modify your applications. No matter how users connect to the database, the result is always the same, because the policy is bound to the role.</p>
<p>To enable the secure application role, you must execute its underlying package by invoking it directly from the application when the user logs in, before the user exercises the privileges granted by the secure application role. You cannot use a<a id="sthref744"></a> logon trigger to enable a secure application role, nor can you have this type of role be a default role.</p>
<p>When you enable the secure application role, Oracle Database verifies that the authorized PL/SQL package is on the calling stack, that is, it verifies that the authorized PL/SQL package is issuing the command to enable the role.</p>
<p>You <a id="sthref745"></a>can use secure application roles to ensure the existence of a database connection. Because a secure application role is a role implemented by a package, the package can validate that users can connect to the database through a middle tier or from a specific IP address. In this way, the secure application role prevents users from accessing data outside an application. They are forced to work within the framework of the application privileges that they have been granted.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="app_devs.htm#i1006262">"Creating Secure Application Roles to Control Access to Applications"</a></p>
</li>
<li>
<p><a class="olink TDPSG30032" href="../../server.111/b28337/tdpsg_privileges.htm#TDPSG30032"><span class="italic">Oracle Database 2 Day + Security Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABCIHGB"></a>
<div id="DBSEG98004" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing Object Privileges</h2>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#BABBGHDH">About Object Privileges</a></p>
</li>
<li>
<p><a href="#BABFJDHD">Granting or Revoking Object Privileges</a></p>
</li>
<li>
<p><a href="#i1010134">Managing Object Privileges</a></p>
</li>
<li>
<p><a href="#CHDCIBCI">Managing Table Privileges</a></p>
</li>
<li>
<p><a href="#i1008214">Managing View Privileges</a></p>
</li>
<li>
<p><a href="#i1007675">Managing Procedure Privileges</a></p>
</li>
<li>
<p><a href="#i1008223">Managing Type Privileges</a></p>
</li>
</ul>
<a id="BABBGHDH"></a>
<div id="DBSEG98005" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Object Privileges</h3>
<p><a id="sthref746"></a><a id="sthref747"></a>An <span class="bold">object privilege</span> is a right that you grant to a user on a database object. Some examples of object privileges include the right to:</p>
<ul>
<li>
<p>Update a table</p>
</li>
<li>
<p>Select rows from another user's table</p>
</li>
<li>
<p>Execute a stored procedure of another user</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABFJDHD"></a>
<div id="DBSEG98006" class="sect2">
<h3 class="sect2">Granting or Revoking Object Privileges</h3>
<p><a id="sthref748"></a><a id="sthref749"></a><a id="sthref750"></a>Each type of object has different privileges associated with it.</p>
<p><a id="sthref751"></a><a id="sthref752"></a>You can specify <code>ALL</code> [<code>PRIVILEGES</code>] to grant or revoke all available object privileges for an object. <code>ALL</code> is not a privilege; rather, it is a shortcut, or a way of granting or revoking all object privileges with one <code>GRANT</code> and <code>REVOKE</code> statement. If all object privileges are granted using the <code>ALL</code> shortcut, then individual privileges can still be revoked.</p>
<p>Similarly, you can revoke all individually granted privileges by specifying <code>ALL</code>. However, if you <code>REVOKE ALL</code>, and revoking causes integrity constraints to be deleted (because they depend on a <code>REFERENCES</code> privilege that you are revoking), then you must include the <code>CASCADE CONSTRAINTS</code> option in the <code>REVOKE</code> statement.</p>
<p><a href="#BABFIGFC">Example 4-8</a> revokes all privileges on the orders table in the <code>HR</code> schema using <code>CASCADE CONSTRAINTS</code>.</p>
<div id="DBSEG98007" class="example">
<p class="titleinexample"><a id="BABFIGFC"></a>Example 4-8 Revoking All Object Privileges Using CASCADE CONSTRAINTS</p>
<pre>
REVOKE ALL 
 ON orders FROM hr
 CASCADE CONSTRAINTS;
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF01603" href="../../server.111/b28286/statements_9013.htm#SQLRF01603"><span class="italic">Oracle Database SQL Language Reference</span></a> for the complete list of <code>GRANT</code> object privileges</div>
</div>
<!-- class="sect2" -->
<a id="i1010134"></a>
<div id="DBSEG40453" class="sect2">
<h3 class="sect2">Managing Object Privileges</h3>
<p>An<a id="sthref753"></a><a id="sthref754"></a><a id="sthref755"></a><a id="sthref756"></a><a id="sthref757"></a> <span class="bold">object privilege</span> grants permission to perform a particular action on a specific schema object.</p>
<p>Different object privileges are available for different types of schema objects. The privilege to delete rows from the <code>departments</code> table is an example of an object privilege.</p>
<p>Some<a id="sthref758"></a> schema objects, such as clusters, indexes, triggers, and <a id="sthref759"></a>database links, do not have associated object privileges. Their use is controlled with system privileges. For example, to alter a cluster, a user must own the cluster or have the <code>ALTER</code> <code>ANY</code> <code>CLUSTER</code> system privilege.</p>
<p>The following sections discuss granting and revoking such privileges:</p>
<ul>
<li>
<p><a href="#i1009173">Granting and Revoking Object Privileges</a></p>
</li>
<li>
<p><a href="#i1009174">Who Can Grant Object Privileges?</a></p>
</li>
<li>
<p><a href="#i1009141">Using Object Privileges with Synonyms</a></p>
</li>
</ul>
<p>The following sections discuss object privileges that apply to specific schema objects:</p>
<ul>
<li>
<p><a href="#CHDCIBCI">Managing Table Privileges</a></p>
</li>
<li>
<p><a href="#i1008214">Managing View Privileges</a></p>
</li>
<li>
<p>Sequences (see <a class="olink ADMIN" href="../../server.111/b28310/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about managing sequences)</p>
</li>
<li>
<p><a href="#i1007675">Managing Procedure Privileges</a></p>
</li>
<li>
<p>Functions and Packages(<a class="olink ADMIN" href="../../server.111/b28310/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about managing object dependencies)</p>
</li>
<li>
<p><a href="#i1008223">Managing Type Privileges</a></p>
</li>
</ul>
<a id="i1009173"></a>
<div id="DBSEG98008" class="sect3">
<h4 class="sect3">Granting and Revoking Object Privileges</h4>
<p>Object<a id="sthref760"></a><a id="sthref761"></a><a id="sthref762"></a><a id="sthref763"></a> privileges can be granted to and revoked from users and roles. If you grant object privileges to roles, then you can make the privileges selectively available.</p>
<p>You can grant or revoke object privileges to or from users and roles using the following methods:</p>
<ul>
<li>
<p>The <code>GRANT</code> and <code>REVOKE</code> SQL statements</p>
</li>
<li>
<p>Oracle Enterprise Manager Database Control</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMQS003" href="../../server.111/b28301/em_manage.htm#ADMQS003"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about Database Control</div>
</div>
<!-- class="sect3" -->
<a id="i1009174"></a>
<div id="DBSEG98009" class="sect3">
<h4 class="sect3">Who Can Grant Object Privileges?</h4>
<p>A user automatically has all object privileges for schema objects contained in his or her schema. A user with the <code>GRANT ANY OBJECT PRIVILEGE</code> can grant any specified object privilege to another user with or without the <code>WITH GRANT OPTION</code> clause of the <code>GRANT</code> statement. A user with the <code>GRANT ANY OBJECT PRIVILEGE</code> can also use that privilege to revoke any object privilege that was granted either by the object owner or by some other user with the <code>GRANT ANY OBJECT PRIVILEGE</code> privilege. Otherwise, the grantee can use the privilege, but cannot grant it to other users.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF" href="../../server.111/b28286/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about <code>GRANT</code> and <code>GRANT ANY OBJECT PRIVILEGE</code></div>
</div>
<!-- class="sect3" -->
<a id="i1009141"></a>
<div id="DBSEG98010" class="sect3">
<h4 class="sect3">Using Object Privileges with Synonyms</h4>
<p>You <a id="sthref764"></a><a id="sthref765"></a><a id="sthref766"></a>can use the <code>CREATE SYNONYM</code> statement to create synonyms for tables, views, sequences, operators, procedures, stored functions, packages, materialized views, Java class schema objects, user-defined object types, or other synonyms. If you grant users the privilege to use the synonym, then the object privileges granted on the underlying objects apply whether the user references the base object by name or by using the synonym.</p>
<p>For example, suppose user <code>OE</code> creates the following synonym for the <code>CUSTOMERS</code> table:</p>
<pre>
CREATE SYNONYM customer_syn FOR CUSTOMERS;
</pre>
<p>Then <code>OE</code> grants the <code>SELECT</code> privilege on the <code>customer_syn</code> synonym to user <code>HR</code>.</p>
<pre>
GRANT SELECT ON customer_syn TO HR;
</pre>
<p>User <code>HR</code> then tries either of the following queries:</p>
<pre>
SELECT COUNT(*) FROM OE.customer_syn;

SELECT COUNT(*) FROM OE.CUSTOMERS;
</pre>
<p>Both queries will yield the same result:</p>
<pre>
  COUNT(*)
----------
       319
</pre>
<p>Be aware that when you grant the synonym to another user, the grant applies to the underlying object that the synonym represents, not to the synonym itself. For example, if user <code>HR</code> queries the <code>ALL_TAB_PRIVS</code> data dictionary view for his privileges, he will learn the following:</p>
<pre>
SELECT TABLE_SCHEMA, TABLE_NAME, PRIVILEGE 
FROM ALL_TAB_PRIVS 
WHERE TABLE_SCHEMA = 'OE';

TABLE_SCHEMA  TABLE_NAME  PRIVILEGE
------------  ----------  ----------
<span class="bold">OE            CUSTOMER    SELECT</span>
OE            ORDERS      UPDATE
</pre>
<p>The results show that in addition to other privileges, he has the <code>SELECT</code> privilege for the underlying object of the <code>customer_syn</code> synonym, which is the <code>OE.CUSTOMER</code> table.</p>
<p>At this point, if user <code>OE</code> then revokes the <code>SELECT</code> privilege on the <code>customer_syn</code> synonym from <code>HR</code>, here are the results if <code>HR</code> checks his privileges again:</p>
<pre>
TABLE_SCHEMA  TABLE_NAME  PRIVILEGE
------------  ----------  ---------
OE            ORDERS      UPDATE
</pre>
<p>User <code>HR</code> no longer has the <code>SELECT</code> privilege for the <code>OE.CUSTOMER</code> table. If he tries to query the <code>OE.CUSTOMERS</code> table, then the following error appears:</p>
<pre>
SELECT COUNT(*) FROM OE.CUSTOMERS;

ERROR at line 1:
ORA-00942: table or view does not exist
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDCIBCI"></a>
<div id="DBSEG98011" class="sect2">
<h3 class="sect2">Managing Table Privileges</h3>
<p>Object<a id="sthref767"></a><span class="bold"><a id="sthref768"></a><a id="sthref769"></a></span> privileges for tables enable table security at the DML (data manipulation language) or DDL (data definition language) level of operation.</p>
<p>The following sections discuss table privileges and DML and DDL operations:</p>
<ul>
<li>
<p><a href="#i1009187">How Table Privileges Affect Data Manipulation Language Operations</a></p>
</li>
<li>
<p><a href="#i1009202">How Table Privileges Affect Data Definition Language Operations</a></p>
</li>
</ul>
<a id="i1009187"></a>
<div id="DBSEG98012" class="sect3">
<h4 class="sect3">How Table Privileges Affect Data Manipulation Language Operations</h4>
<p><a id="sthref770"></a>You can grant privileges to use the <code>DELETE</code>, <code>INSERT</code>, <code>SELECT</code>, and <code>UPDATE</code> DML operations on a table or view. Grant these privileges only to users and roles that need to query or manipulate data in a table.</p>
<p>You can restrict <code>INSERT</code> and <code>UPDATE</code> privileges for a table to specific columns of the table. With a selective <code>INSERT</code> privilege, a privileged user can insert a row with values for the selected columns. All other columns receive <code>NULL</code> or the default value of the column. With a selective <code>UPDATE</code> privilege, a user can update only specific column values of a row. You can use selective <code>INSERT</code> and <code>UPDATE</code> privileges to restrict user access to sensitive data.</p>
<p>For example, if you do not want data entry users to alter the <code>salary</code> column of the <code>employees</code> table, then selective <code>INSERT</code> or <code>UPDATE</code> privileges can be granted that exclude the <code>salary</code> column. Alternatively, a view that excludes the <code>salary</code> column could satisfy this need for additional security.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF" href="../../server.111/b28286/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about DML operations</div>
</div>
<!-- class="sect3" -->
<a id="i1009202"></a>
<div id="DBSEG98013" class="sect3">
<h4 class="sect3">How Table Privileges Affect Data Definition Language Operations</h4>
<p>The <code>ALTER</code>, <code>INDEX</code>, and <code>REFERENCES</code> privileges allow DDL operations to be performed on a table. Because these privileges allow other users to alter or create dependencies on a table, you should grant these privileges conservatively.</p>
<p>A user attempting to perform a DDL operation on a table may need additional system or object privileges. For example, to create a trigger on a table, the user requires both the <code>ALTER</code> <code>TABLE</code> object privilege for the table and the <code>CREATE</code> <code>TRIGGER</code> system privilege.</p>
<p><a id="sthref771"></a>As with the <code>INSERT</code> and <code>UPDATE</code> privileges, you can grant the <code>REFERENCES</code> privilege on specific columns of a table. The <code>REFERENCES</code> privilege enables the grantee to use the table on which the grant is made as a parent key to any foreign keys that the grantee wishes to create in his or her own tables. This action is controlled with a special privilege because the presence of foreign keys restricts the data manipulation and table alterations that can be done to the parent key. A&nbsp;column-specific <code>REFERENCES</code> privilege restricts the grantee to using the named columns (which, of course, must include at least one primary or unique key of the parent table).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"Data Integrity" in <a class="olink CNCPT" href="../../server.111/b28318/toc.htm"><span class="italic">Oracle Database Concepts</span></a> for more information about primary keys, unique keys, and integrity constraints</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1008214"></a>
<div id="DBSEG98014" class="sect2">
<h3 class="sect2">Managing View Privileges</h3>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#BABHDBFG">About View Privileges</a></p>
</li>
<li>
<p><a href="#i1009219">Privileges Required to Create Views</a></p>
</li>
<li>
<p><a href="#i1009995">Increasing Table Security with Views</a></p>
</li>
</ul>
<a id="BABHDBFG"></a>
<div id="DBSEG98015" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">About View Privileges</h4>
<p><a id="sthref772"></a><a id="sthref773"></a>A <span class="bold">view</span> is a presentation of data selected from one or more tables, possibly including other views. A view shows the structure of the underlying tables. Its selected data can be thought of as the result of a stored query. A view contains no actual data but rather derives what it shows from the tables and views on which it is based. You can query a view, and change the data it represents. Data in a view can be updated or deleted, and new data inserted. These operations directly alter the tables on which the view is based, and are subject to the integrity constraints and triggers of the base tables.</p>
<p>You can apply DML object privileges to views, similar to tables. <a id="sthref774"></a><a id="sthref775"></a>Object privileges for a view allow various DML operations, which as noted affect the base tables from which the view is derived.</p>
</div>
<!-- class="sect3" -->
<a id="i1009219"></a>
<div id="DBSEG98016" class="sect3">
<h4 class="sect3">Privileges Required to Create Views</h4>
<p><a id="sthref776"></a>To create a view, you must meet the following requirements:</p>
<ul>
<li>
<p>You must have been granted one of the following system privileges, either explicitly or through a role:</p>
<ul>
<li>
<p>The <code>CREATE</code> <code>VIEW</code> system privilege (to create a view in your schema)</p>
</li>
<li>
<p>The <code>CREATE</code> <code>ANY</code> <code>VIEW</code> system privilege (to create a view in the schema of another user)</p>
</li>
</ul>
</li>
<li>
<p>You must have been explicitly granted one of the following privileges:</p>
<ul>
<li>
<p>The <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> object privileges on all base objects underlying the view</p>
</li>
<li>
<p>Th<code>e</code> <code>SELECT</code> <code>ANY</code> <code>TABLE</code>, <code>INSERT</code> <code>ANY</code> <code>TABLE</code>, <code>UPDATE</code> <code>ANY</code> <code>TABLE</code>, or <code>DELETE</code> <code>ANY</code> <code>TABLE</code> system privileges</p>
</li>
</ul>
</li>
<li>
<p>In addition, before you can grant other users access to you view, you must have object privileges to the base objects with the <code>GRANT</code> <code>OPTION</code> clause or appropriate system privileges with the <code>ADMIN</code> <code>OPTION</code> clause. If you do not have these privileges, then you cannot to grant other users access to your view. If you try, an<a id="sthref777"></a><a id="sthref778"></a> <code>ORA-01720: grant option does not exist for</code> <code><span class="codeinlineitalic">object_name</span></code> error is raised, with <code><span class="codeinlineitalic">object_name</span></code> referring to the view's underlying object for which you do not have the sufficient privilege.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF" href="../../server.111/b28286/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a></div>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="i1009995"></a>
<div id="DBSEG98017" class="sect3">
<h4 class="sect3">Increasing Table Security with Views<a id="sthref779"></a><a id="sthref780"></a></h4>
<p>To use a view, the user must have the appropriate privileges but only for the view itself, not its underlying objects. However, if access privileges for the underlying objects of the view are removed, then the user no longer has access. This behavior occurs because the security domain that is used when a user queries the view is that of the definer of the view. If the privileges on the underlying objects are revoked from the view's definer, then the view becomes invalid, and no one can use the view. Therefore, even if a user has been granted access to the view, the user may not be able to use the view if the definer's rights have been revoked from the view's underlying objects.</p>
<p>For example, suppose User A creates a view. User A has definer's rights on the underlying objects of the view. User A then grants the <code>SELECT</code> privilege on that view to User B so that User B can query the view. But if User A no longer has access to the underlying objects of that view, then User B no longer has access either.</p>
<p>Views add two more levels of security for tables, column-level security and value-based security, as follows:</p>
<ul>
<li>
<p><span class="bold">A view can provide access to selected columns of base tables.</span> For example, you can define a view on the <code>employees</code> table to show only the <code>employee_id</code>, <code>last_name</code>, and <code>manager_id</code> columns:</p>
<pre>
CREATE VIEW employees_manager AS 
    SELECT last_name, employee_id, manager_id FROM employees; 
</pre></li>
<li>
<p><span class="bold">A view can provide value-based security for the information in a table.</span> A <code>WHERE</code> clause in the definition of a view displays only selected rows of base tables. Consider the following two examples:</p>
<pre>
CREATE VIEW lowsal AS 
    SELECT * FROM employees 
    WHERE salary &lt; 10000; 
</pre>
<p>The <code>lowsal</code> view allows access to all rows of the <code>employees</code> table that have a salary value less than 10000. Notice that all columns of the <code>employees</code> table are accessible in the <code>lowsal</code> view.</p>
<pre>
CREATE VIEW own_salary AS 
    SELECT last_name, salary 
    FROM employees 
    WHERE last_name = USER; 
</pre>
<p><a id="sthref781"></a><a id="sthref782"></a><a id="sthref783"></a>In the <code>own_salary</code> view, only the rows with an <code>last_name</code> that matches the current user of the view are accessible. The <code>own_salary</code> view uses the <code>user</code> pseudo column, whose values always refer to the current user. This view combines both column-level security and value-based security.</p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1007675"></a>
<div id="DBSEG50000" class="sect2">
<h3 class="sect2">Managing Procedure Privileges</h3>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#BABDFCEB">Using the EXECUTE Privilege for Procedure Privileges</a></p>
</li>
<li>
<p><a href="#i1009236">Procedure Execution and Security Domains</a></p>
</li>
<li>
<p><a href="#CJABFDEB">How Procedure Privileges Affect Definer's Rights</a></p>
</li>
<li>
<p><a href="#CJAFCIBG">How Procedure Privileges Affect Invoker's Rights</a></p>
</li>
<li>
<p><a href="#i1009241">System Privileges Required to Create or Replace a Procedure</a></p>
</li>
<li>
<p><a href="#CACBEBFJ">System Privileges Required to Compile a Procedure</a></p>
</li>
<li>
<p><a href="#i1009246">How Procedure Privileges Affect Packages and Package Objects</a></p>
</li>
</ul>
<a id="BABDFCEB"></a>
<div id="DBSEG98018" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Using the EXECUTE Privilege for Procedure Privileges</h4>
<p>The <code>EXECUTE</code><span class="bold"><a id="sthref784"></a></span> privilege is<a id="sthref785"></a> the<a id="sthref786"></a> <a id="sthref787"></a>only <a id="sthref788"></a><a id="sthref789"></a><span class="bold">object privilege</span> for procedures, including standalone procedures and functions, and for those within packages. Grant this privilege only to users who need to run a procedure or to compile another procedure that calls a desired procedure.</p>
</div>
<!-- class="sect3" -->
<a id="i1009236"></a>
<div id="DBSEG98019" class="sect3">
<h4 class="sect3">Procedure Execution and Security Domains</h4>
<p>A user with the <code>EXECUTE</code> object privilege for a specific procedure can execute the procedure or compile a program unit that references the procedure. Oracle Database performs a run-time privilege check when any PL/SQL unit is called. A user with the <code>EXECUTE</code> <code>ANY</code> <code>PROCEDURE</code> system privilege can execute any procedure in the database. Privileges to run procedures can be granted to a user through roles.</p>
</div>
<!-- class="sect3" -->
<a id="CJABFDEB"></a>
<div id="DBSEG98020" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">How Procedure Privileges Affect Definer's Rights</h4>
<p>The <a id="sthref790"></a>owner <a id="sthref791"></a>of a procedure, called the <span class="italic">definer</span>, must have all the necessary object privileges for referenced objects. If the procedure owner grants to another user the right to use that procedure, then the privileges of the procedure owner (on the objects referenced by the procedure) apply to the grantee user's exercise of the procedure. The privileges of the procedure's definer must be granted directly to the user, not granted through roles. These are termed definer's rights.</p>
<p><a id="sthref792"></a>The user of a procedure who is not its owner is called the <span class="italic">invoker</span>. Additional privileges on referenced objects are required for invoker's rights procedures, but not for definer's rights procedures.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1007304">"How Roles Work in PL/SQL Blocks"</a></div>
<p><a id="sthref793"></a><a id="sthref794"></a>A user of a definer's rights procedure requires only the privilege to execute the procedure and no privileges on the underlying objects that the procedure accesses. This is because a definer's rights procedure operates under the security domain of the user who owns the procedure, regardless of who is executing it. The owner of the procedure must have all the necessary object privileges for referenced objects. Fewer privileges have to be granted to users of a definer's rights procedure. This results in stronger control of database access.</p>
<p><a id="sthref795"></a><a id="sthref796"></a>You can use definer's rights procedures to control access to private database objects and add a level of database security. By writing a definer's rights procedure and granting only <code>EXECUTE</code> privilege to a user, the user can be forced to access the referenced objects only through the procedure.</p>
<p>At run time, Oracle Database checks whether the privileges of the owner of a definer's rights stored procedure allow access to that procedure's referenced objects, before the procedure is executed. If a necessary privilege on a referenced object was revoked from the owner of a definer's rights procedure, then the procedure cannot be run by the owner or any other user.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref797"></a><a id="sthref798"></a>Trigger processing follows the same patterns as definer's rights procedures. The user runs a SQL statement, which that user is privileged to run. As a result of the SQL statement, a trigger is fired. The statements within the triggered action temporarily execute under the security domain of the user that owns the trigger.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"Triggers" in <a class="olink CNCPT" href="../../server.111/b28318/toc.htm"><span class="italic">Oracle Database Concepts</span></a></div>
</div>
<!-- class="sect3" -->
<a id="CJAFCIBG"></a>
<div id="DBSEG98021" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">How Procedure Privileges Affect Invoker's Rights</h4>
<p><a id="sthref799"></a><a id="sthref800"></a>An <a id="sthref801"></a>invoker's rights procedure executes with all of the invoker's privileges. Oracle Database enables the privileges that were granted to the invoker through any of the invoker's enabled roles to take effect, unless a definer's rights procedure calls the invoker's rights procedure directly or indirectly. A user of an invoker's rights procedure needs privileges (granted to the user either directly or through a role) on objects that the procedure accesses through external references that are resolved in the schema of the invoker.</p>
<p>The invoker needs privileges at run time to access program references embedded in DML statements or dynamic SQL statements, because they are effectively recompiled at run time.</p>
<p>For all other external references, such as direct PL/SQL function calls, Oracle Database checks the privileges of the owner at compile time, but does not perform a run-time check. Therefore, the user of an invoker's rights procedure does not need privileges on external references outside DML or dynamic SQL statements. Alternatively, the developer of an invoker's rights procedure must only grant privileges on the procedure itself, not on all objects directly referenced by the invoker's rights procedure.</p>
<p>You can create a software bundle that consists of multiple program units, some with definer's rights and others with invoker's rights, and restrict the program entry points <span class="italic">(controlled step-in)</span>. A user who has the privilege to run an entry-point procedure can also execute internal program units indirectly, but cannot directly call the internal programs. For very precise control over query processing, you can create a PL/SQL package specification with explicit cursors.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="vpd.htm#CIHHGFAD">"Configuring an Oracle Virtual Private Database Policy"</a></p>
</li>
<li>
<p><a class="olink LNPLS00809" href="../../appdev.111/b28370/subprograms.htm#LNPLS00809"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about how Oracle Database handles name resolution and privilege checking at runtime using invoker's and definer's rights</p>
</li>
<li>
<p><a class="olink LNPLS01371" href="../../appdev.111/b28370/create_package.htm#LNPLS01371"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about defining explicit cursors in the <code>CREATE PACKAGE</code> statement</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="i1009241"></a>
<div id="DBSEG98022" class="sect3">
<h4 class="sect3">System Privileges Required to Create or Replace a Procedure</h4>
<p>To <a id="sthref802"></a><a id="sthref803"></a><a id="sthref804"></a><a id="sthref805"></a>create or replace a<a id="sthref806"></a><a id="sthref807"></a> procedure in your own schema, you must have the <code>CREATE PROCEDURE</code> system privilege. To create or replace a procedure in another user's schema, you must have the <code>CREATE ANY PROCEDURE</code> system privilege.</p>
<p>The user who owns the procedure also must have privileges for schema objects referenced in the procedure body. To create a procedure, you need to have been explicitly granted the necessary privileges (system or object) on all objects referenced by the procedure. You cannot obtain the required privileges through roles. This includes the <code>EXECUTE</code> privilege for any procedures that are called inside the procedure being created.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Triggers also require that privileges to referenced objects be granted explicitly to the owner of the trigger. Anonymous PL/SQL blocks can use any privilege, whether the privilege is granted explicitly or through a role.</div>
</div>
<!-- class="sect3" -->
<a id="CACBEBFJ"></a>
<div id="DBSEG98023" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">System Privileges Required to Compile a Procedure</h4>
<p>To<a id="sthref808"></a><a id="sthref809"></a> compile a standalone procedure, run the <code>ALTER PROCEDURE</code> statement with the <code>COMPILE</code> clause. To compile a procedure that is part of a package, run the<a id="sthref810"></a> <code>ALTER PACKAGE</code> statement.</p>
<p><a href="#CACFJECG">Example 4-9</a> shows how to compile a standalone procedure.</p>
<div id="DBSEG98024" class="example">
<p class="titleinexample"><a id="CACFJECG"></a>Example 4-9 Compiling a Procedure</p>
<pre>
ALTER PROCEDURE psmith.remove_emp COMPILE;
</pre></div>
<!-- class="example" -->
<p>If the standalone or packaged procedure is in another user's schema, you must have the <code>ALTER ANY PROCEDURE</code> privilege to recompile it. You can recompile procedures in your own schema without any privileges.</p>
</div>
<!-- class="sect3" -->
<a id="i1009246"></a>
<div id="DBSEG98025" class="sect3">
<h4 class="sect3">How Procedure Privileges Affect Packages and Package Objects</h4>
<p><a id="sthref811"></a><a id="sthref812"></a><a id="sthref813"></a><a id="sthref814"></a><span class="bold"><a id="sthref815"></a></span>A user with the <code>EXECUTE</code> object privilege for a package can execute any public procedure or function in the package, and can access or modify the value of any public package variable. You cannot grant specific <code>EXECUTE</code> privileges for individual constructs in a package. Therefore, you may find it useful to consider two alternatives for establishing security when developing procedures, functions, and packages for a database application. The following examples describe these alternatives.</p>
<p class="subhead2"><a id="DBSEG98026"></a>Procedure Privileges and Packages and Package Objects: Example 1</p>
<p><a id="sthref816"></a><a id="sthref817"></a><a id="sthref818"></a><a id="sthref819"></a><a href="#BABGBCHI">Example 4-10</a> shows four procedures created in the bodies of two packages.</p>
<div id="DBSEG98027" class="example">
<p class="titleinexample"><a id="BABGBCHI"></a>Example 4-10 Package Objects Affected by Procedure Privileges</p>
<pre>
CREATE PACKAGE BODY hire_fire AS 
  PROCEDURE hire(...) IS 
    BEGIN 
      INSERT INTO employees . . . 
    END hire; 
  PROCEDURE fire(...) IS 
    BEGIN 
      DELETE FROM employees . . . 
    END fire; 
END hire_fire; 

CREATE PACKAGE BODY raise_bonus AS 
  PROCEDURE give_raise(...) IS 
    BEGIN 
      UPDATE employees SET salary = . . . 
    END give_raise; 
  PROCEDURE give_bonus(...) IS 
    BEGIN 
      UPDATE employees SET bonus = . . . 
    END give_bonus; 
END raise_bonus; 
</pre></div>
<!-- class="example" -->
<p>The following <code>GRANT EXECUTE</code> statements enable the <code>big_bosses</code> and <code>little_bosses</code> roles to run the appropriate procedures:</p>
<pre>
GRANT EXECUTE ON hire_fire TO big_bosses; 
GRANT EXECUTE ON raise_bonus TO little_bosses; 
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Granting <code>EXECUTE</code> privilege for a package provides uniform access to all package objects.</div>
<p class="subhead2"><a id="DBSEG98028"></a>Procedure Privileges and Packages and Package Objects: Example 2</p>
<p><a id="sthref820"></a><a id="sthref821"></a><a id="sthref822"></a><a id="sthref823"></a>This example shows four procedure definitions within the body of a single package. Two additional standalone procedures and a package are created specifically to provide access to the procedures defined in the main package.</p>
<pre>
CREATE PACKAGE BODY employee_changes AS 
  PROCEDURE change_salary(...) IS BEGIN ... END; 
  PROCEDURE change_bonus(...) IS BEGIN ... END; 
  PROCEDURE insert_employee(...) IS BEGIN ... END; 
  PROCEDURE delete_employee(...) IS BEGIN ... END; 
END employee_changes; 
 
CREATE PROCEDURE hire 
  BEGIN 
    employee_changes.insert_employee(...) 
  END hire; 
 
CREATE PROCEDURE fire 
  BEGIN 
    employee_changes.delete_employee(...) 
  END fire; 
 
PACKAGE raise_bonus IS 
  PROCEDURE give_raise(...) AS 
    BEGIN 
      employee_changes.change_salary(...) 
    END give_raise; 
 
  PROCEDURE give_bonus(...) 
    BEGIN 
      employee_changes.change_bonus(...) 
    END give_bonus; 
</pre>
<p>Using this method, the procedures that actually do the work (the procedures in the <code>employee_changes</code> package) are defined in a single package and can share declared global variables, cursors, on so on. By declaring top-level procedures, <code>hire</code> and <code>fire</code>, and an additional package, <code>raise_bonus</code>, you can grant selective <code>EXECUTE</code> privileges on procedures in the main package:</p>
<pre>
GRANT EXECUTE ON hire, fire TO big_bosses; 
GRANT EXECUTE ON raise_bonus TO little_bosses; 
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1008223"></a>
<div id="DBSEG98029" class="sect2">
<h3 class="sect2">Managing Type Privileges</h3>
<p><a id="sthref824"></a><a id="sthref825"></a><a id="sthref826"></a>The following sections describe the use of privileges for types, methods, and objects:</p>
<ul>
<li>
<p><a href="#i1009251">System Privileges for Named Types</a></p>
</li>
<li>
<p><a href="#i1009323">Object Privileges</a></p>
</li>
<li>
<p><a href="#i1009331">Method Execution Model</a></p>
</li>
<li>
<p><a href="#i1009336">Privileges Required to Create Types and Tables Using Types</a></p>
</li>
<li>
<p><a href="#i1009341">Example of Privileges for Creating Types and Tables Using Types</a></p>
</li>
<li>
<p><a href="#i1009346">Privileges on Type Access and Object Access</a></p>
</li>
<li>
<p><a href="#i1009351">Type Dependencies</a></p>
</li>
</ul>
<a id="i1009251"></a>
<div id="DBSEG98030" class="sect3">
<h4 class="sect3">System Privileges for Named Types</h4>
<p><a href="#g1012174">Table 4-4</a> lists system privileges for named types (object types, <code>VARRAY</code>s, and nested tables).</p>
<div id="DBSEG98031" class="tblhruleformal">
<p class="titleintable"><a id="sthref827"></a><a id="g1012174"></a>Table 4-4 System Privileges for Named Types</p>
<table class="cellalignment1576" title="System Privileges for Named Types" summary="This table lists system privileges for named types and explains what each privilege allows you to do." dir="ltr">
<thead>
<tr class="cellalignment1570">
<th class="cellalignment1577" id="r1c1-t36">Privilege</th>
<th class="cellalignment1577" id="r1c2-t36">Enables you to ...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r2c1-t36" headers="r1c1-t36">
<p><code>CREATE TYPE</code></p>
</td>
<td class="cellalignment1578" headers="r2c1-t36 r1c2-t36">
<p>Create named types in your own schemas</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r3c1-t36" headers="r1c1-t36">
<p><code>CREATE ANY TYPE</code></p>
</td>
<td class="cellalignment1578" headers="r3c1-t36 r1c2-t36">
<p>Create a named type in any schema</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r4c1-t36" headers="r1c1-t36">
<p><code>ALTER ANY TYPE</code></p>
</td>
<td class="cellalignment1578" headers="r4c1-t36 r1c2-t36">
<p>Alter a named type in any schema</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r5c1-t36" headers="r1c1-t36">
<p><code>DROP ANY TYPE</code></p>
</td>
<td class="cellalignment1578" headers="r5c1-t36 r1c2-t36">
<p>Drop a named type in any schema</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r6c1-t36" headers="r1c1-t36">
<p><code>EXECUTE ANY TYPE</code></p>
</td>
<td class="cellalignment1578" headers="r6c1-t36 r1c2-t36">
<p>Use and reference a named type in any schema</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>The <a id="sthref828"></a><code>RESOURCE</code> role includes the <code>CREATE</code> <code>TYPE</code> system privilege. The <code>DBA</code> role includes all of these privileges.</p>
</div>
<!-- class="sect3" -->
<a id="i1009323"></a>
<div id="DBSEG98032" class="sect3">
<h4 class="sect3">Object Privileges</h4>
<p>The only object privilege that applies to named types is <code>EXECUTE</code>. If the <code>EXECUTE</code> privilege exists on a named type, then a user can use the named type to:</p>
<ul>
<li>
<p>Define a table</p>
</li>
<li>
<p>Define a column in a relational table</p>
</li>
<li>
<p>Declare a variable or parameter of the named type</p>
</li>
</ul>
<p>The <code>EXECUTE</code> privilege permits a user to invoke the methods in the type, including the type constructor. This is similar to the <code>EXECUTE</code> privilege on a stored PL/SQL procedure.</p>
</div>
<!-- class="sect3" -->
<a id="i1009331"></a>
<div id="DBSEG98033" class="sect3">
<h4 class="sect3">Method Execution Model</h4>
<p>Method execution is the same as any other stored PL/SQL procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1007675">"Managing Procedure Privileges"</a></div>
</div>
<!-- class="sect3" -->
<a id="i1009336"></a>
<div id="DBSEG98034" class="sect3">
<h4 class="sect3">Privileges Required to Create Types and Tables Using Types</h4>
<p><a id="sthref829"></a>To create a type, you must meet the following requirements:</p>
<ul>
<li>
<p>You must have the <code>CREATE</code> <code>TYPE</code> system privilege to create a type in your schema or the <code>CREATE</code> <code>ANY</code> <code>TYPE</code> system privilege to create a type in the schema of another user. These privileges can be acquired explicitly or through a role.</p>
</li>
<li>
<p>The owner of the type must be explicitly granted the <code>EXECUTE</code> object privileges to access all other types referenced within the definition of the type, or have been granted the <code>EXECUTE</code> <code>ANY</code> <code>TYPE</code> system privilege. The owner cannot obtain the required privileges through roles.</p>
</li>
<li>
<p>If the type owner intends to grant access to the type to other users, then the owner must receive the <code>EXECUTE</code> privileges to the referenced types with the <code>GRANT</code> <code>OPTION</code> or the <code>EXECUTE</code> <code>ANY</code> <code>TYPE</code> system privilege with the <code>ADMIN</code> <code>OPTION</code>. If not, then the type owner has insufficient privileges to grant access on the type to other users.</p>
</li>
</ul>
<p>To create a table using types, you must meet the requirements for creating a table and the following additional requirements:</p>
<ul>
<li>
<p>The owner of the table must have been directly granted the <code>EXECUTE</code> object privilege to access all types referenced by the table, or has been granted the <code>EXECUTE</code> <code>ANY</code> <code>TYPE</code> system privilege. The owner cannot exercise the required privileges if these privileges were granted through roles.</p>
</li>
<li>
<p>If the table owner intends to grant access to the table to other users, then the owner must have the <code>EXECUTE</code> privilege to the referenced types with the <code>GRANT</code> <code>OPTION</code> or the <code>EXECUTE</code> <code>ANY</code> <code>TYPE</code> system privilege with the <code>ADMIN</code> <code>OPTION</code>. If not, then the table owner has insufficient privileges to grant access on the table.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCIBCI">"Managing Table Privileges"</a> for the requirements for creating a table</div>
</div>
<!-- class="sect3" -->
<a id="i1009341"></a>
<div id="DBSEG98035" class="sect3">
<h4 class="sect3">Example of Privileges for Creating Types and Tables Using Types</h4>
<p><a id="sthref830"></a><a id="sthref831"></a>Assume that three users exist with the <code>CONNECT</code> and <code>RESOURCE</code> roles:</p>
<ul>
<li>
<p><code>user1</code></p>
</li>
<li>
<p><code>user2</code></p>
</li>
<li>
<p><code>user3</code></p>
</li>
</ul>
<p>The following DDL is run in the schema of <code>user1</code>:</p>
<pre>
CREATE TYPE type1 AS OBJECT (
  attr1 NUMBER);

CREATE TYPE type2 AS OBJECT (
  attr2 NUMBER);

GRANT EXECUTE ON type1 TO user2;
GRANT EXECUTE ON type2 TO user2 WITH GRANT OPTION;
</pre>
<p>The following DDL is performed in the schema of <code>user2</code>:</p>
<pre>
CREATE TABLE tab1 OF user1.type1;
CREATE TYPE type3 AS OBJECT (
  attr3 user1.type2);
CREATE TABLE tab2 (
  col1 user1.type2);
</pre>
<p>The following statements succeed because <code>user2</code> has <code>EXECUTE</code> privilege on <code>user1.type2</code> with the <code>GRANT</code> <code>OPTION:</code></p>
<pre>
GRANT EXECUTE ON type3 TO user3;
GRANT SELECT on tab2 TO user3;
</pre>
<p>However, the following grant fails because <code>user2</code> does not have <code>EXECUTE</code> privilege on <code>user1.type1</code> with the <code>GRANT</code> <code>OPTION:</code></p>
<pre>
GRANT SELECT ON tab1 TO user3;
</pre>
<p>The following statements can be successfully run by <code>user3</code>:</p>
<pre>
CREATE TYPE type4 AS OBJECT (
  attr4 user2.type3);
CREATE TABLE tab3 OF type4;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>CONNECT</code> role retains only the <code>CREATE SESSION</code> privilege.</div>
</div>
<!-- class="sect3" -->
<a id="i1009346"></a>
<div id="DBSEG98036" class="sect3">
<h4 class="sect3">Privileges on Type Access and Object Access</h4>
<p>Existing column-level and table-level privileges for DML statements apply to both column objects and row objects.</p>
<p><a href="#g1012204">Table 4-5</a> lists the privileges for object tables.</p>
<div id="DBSEG98037" class="tblhruleformal">
<p class="titleintable"><a id="sthref832"></a><a id="g1012204"></a>Table 4-5 Privileges for Object Tables</p>
<table class="cellalignment1576" title="Privileges for Object Tables " summary="This table lists the privileges available for object tables and explains what each privilege allows you to do." dir="ltr">
<thead>
<tr class="cellalignment1570">
<th class="cellalignment1582" id="r1c1-t40">Privilege</th>
<th class="cellalignment1582" id="r1c2-t40">Enables you to...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r2c1-t40" headers="r1c1-t40">
<p><code>SELECT</code></p>
</td>
<td class="cellalignment1578" headers="r2c1-t40 r1c2-t40">
<p>Access an object and its attributes from the table</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r3c1-t40" headers="r1c1-t40">
<p><code>UPDATE</code></p>
</td>
<td class="cellalignment1578" headers="r3c1-t40 r1c2-t40">
<p>Modify the attributes of the objects that make up the rows in the table</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r4c1-t40" headers="r1c1-t40">
<p><code>INSERT</code></p>
</td>
<td class="cellalignment1578" headers="r4c1-t40 r1c2-t40">
<p>Create new objects in the table</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r5c1-t40" headers="r1c1-t40">
<p><code>DELETE</code></p>
</td>
<td class="cellalignment1578" headers="r5c1-t40 r1c2-t40">
<p>Delete rows</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>Similar table privileges and column privileges apply to column objects. Retrieving instances does not in itself reveal type information. However, clients must access named type information to interpret the type instance images. When a client requests type information, Oracle Database checks for the <code>EXECUTE</code> privilege on the type.</p>
<p>Consider the following schema:</p>
<pre>
CREATE TYPE emp_type (
    eno NUMBER, ename CHAR(31), eaddr addr_t);
CREATE TABLE emp OF emp_t;
</pre>
<p>In addition, consider the following two queries:</p>
<pre>
SELECT VALUE(emp) FROM emp;
SELECT eno, ename FROM emp;
</pre>
<p>For either query, Oracle Database checks the <code>SELECT</code> privilege of the user for the <code>emp</code> table. For the first query, the user must obtain the <code>emp_type</code> type information to interpret the data. When the query accesses the <code>emp_type</code> type, Oracle Database checks the <code>EXECUTE</code> privilege of the user.</p>
<p>Running the second query, however, does not involve named types, so Oracle Database does not check type privileges.</p>
<p>In addition, by using the schema from the previous section, <code>user3</code> can perform the following queries:</p>
<pre>
SELECT tab1.col1.attr2 FROM user2.tab1 tab1;
SELECT attr4.attr3.attr2 FROM tab3;
</pre>
<p>Note that in both <code>SELECT</code> statements, <code>user3</code> does not have explicit privileges on the underlying types, but the statement succeeds because the type and table owners have the necessary privileges with the <code>GRANT</code> <code>OPTION.</code></p>
<p>Oracle Database checks privileges on the following events, and returns an error if the client does not have the privilege for the action:</p>
<ul>
<li>
<p>Pinning an object in the object cache using its <code>REF</code> value causes Oracle Database to check for the <code>SELECT</code> privilege on the containing object table.</p>
</li>
<li>
<p>Modifying an existing object or flushing an object from the object cache causes Oracle Database to check for the <code>UPDATE</code> privilege on the destination object table.</p>
</li>
<li>
<p>Flushing a new object causes Oracle Database to check for the <code>INSERT</code> privilege on the destination object table.</p>
</li>
<li>
<p>Deleting an object causes Oracle Database to check for the <code>DELETE</code> privilege on the destination table.</p>
</li>
<li>
<p>Pinning an object of a named type causes Oracle Database to check <code>EXECUTE</code> privilege on the object.</p>
</li>
</ul>
<p>Modifying the attributes of an object in a client third-generation language application causes Oracle Database to update the entire object. Therefore, the user needs the <code>UPDATE</code> privilege on the object table. Having the <code>UPDATE</code> privilege on only certain columns of the object table is not sufficient, even if the application only modifies attributes corresponding to those columns. Therefore, Oracle Database does not support column-level privileges for object tables.</p>
</div>
<!-- class="sect3" -->
<a id="i1009351"></a>
<div id="DBSEG98038" class="sect3">
<h4 class="sect3">Type Dependencies</h4>
<p>As with stored objects, such as procedures and tables, types being referenced by other objects are called dependencies. There are some special issues for types on which tables depend. Because a table contains data that relies on the type definition for access, any change to the type causes all stored data to become inaccessible. Changes that can cause this are when necessary privileges required to use the type are revoked, or the type or dependent types are dropped. If these actions occur, then the table becomes invalid and cannot be accessed.</p>
<p>A table that is invalid because of missing privileges can automatically become valid and accessible if the required privileges are granted again. A table that is invalid because a dependent type was dropped can never be accessed again, and the only permissible action is to drop the table.</p>
<p>Because of the severe effects that revoking a privilege on a type or dropping a type can cause, the SQL statements <code>REVOKE</code> and <code>DROP</code> <code>TYPE</code>, by default, implement restricted semantics. This means that if the named type in either statement has table or type dependents, then an error is received and the statement cancels. However, if the <code>FORCE</code> clause for either statement is used, then the statement always succeeds. If there are depended-upon tables, then they are invalidated.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../../server.111/b28320/toc.htm"><span class="italic">Oracle Database Reference</span></a> for details about using the <code>REVOKE</code>, <code>DROP</code> <code>TYPE</code>, and <code>FORCE</code> clauses</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABGDGJH"></a>
<div id="DBSEG98039" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Granting a User Privileges and Roles<a id="sthref833"></a><a id="sthref834"></a><a id="sthref835"></a><a id="sthref836"></a><a id="sthref837"></a><a id="sthref838"></a></h2>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#i1008788">Granting System Privileges and Roles</a></p>
</li>
<li>
<p><a href="#i1007808">Granting Object Privileges</a></p>
</li>
<li>
<p><a href="#i1007882">Granting Privileges on Columns</a></p>
</li>
</ul>
<p>It is also possible to grant roles to a user connected through a middle tier or proxy. This is discussed in <a href="authentication.htm#i1010326">"Using a Middle Tier Server for Proxy Authentication"</a>.</p>
<a id="i1008788"></a>
<div id="DBSEG98040" class="sect2">
<h3 class="sect2">Granting System Privileges and Roles</h3>
<p>You can use the <code>GRANT</code> SQL statement to grant system privileges and roles to users and roles. <a id="sthref839"></a><a id="sthref840"></a><a id="sthref841"></a><a id="sthref842"></a>The following privileges are required:</p>
<ul>
<li>
<p>To grant a system privilege, a user must be granted the system privilege with the <code>ADMIN OPTION</code> or must be granted the <code>GRANT ANY PRIVILEGE</code> system privilege.</p>
</li>
<li>
<p>To grant a role, a user must be granted the role with the <code>ADMIN OPTION</code> or was granted the <code>GRANT ANY ROLE</code> system privilege.</p>
</li>
</ul>
<p><a href="#BABGFCHC">Example 4-11</a> <a id="sthref843"></a>grants the system privilege <code>CREATE SESSION</code> and the <code>accts_pay</code> role to the user <code>jward</code>.</p>
<div id="DBSEG98041" class="example">
<p class="titleinexample"><a id="BABGFCHC"></a>Example 4-11 Granting a System Privilege and a Role to a User</p>
<pre>
GRANT CREATE SESSION, accts_pay TO jward;
</pre></div>
<!-- class="example" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Object privileges cannot be granted along with system privileges and roles in the same <code>GRANT</code> statement.</div>
<div id="DBSEG98042" class="sect3"><a id="sthref844"></a>
<h4 class="sect3">Granting the ADMIN OPTION</h4>
<p>If <a id="sthref845"></a><a id="sthref846"></a><a id="sthref847"></a>you <a id="sthref848"></a>specify the <code>WITH ADMIN OPTION</code> clause when you grant a privilege or role to a user or role, then the privilege grant has the following expanded capabilities:</p>
<ul>
<li>
<p>The grantee can grant or revoke the system privilege or role to or from any other user or role in the database. Users cannot revoke a role from themselves.</p>
</li>
<li>
<p>The grantee can grant the system privilege or role with <code>ADMIN OPTION</code>.</p>
</li>
<li>
<p>The grantee of a role can alter or drop the role.</p>
</li>
</ul>
<p><a href="#BABEGHCH">Example 4-12</a> <a id="sthref849"></a>grants the <code>new_dba</code> role with the <code>WITH ADMIN OPTION</code> clause to user <code>michael</code>.</p>
<div id="DBSEG98043" class="example">
<p class="titleinexample"><a id="BABEGHCH"></a>Example 4-12 Granting the ADMIN OPTION</p>
<pre>
GRANT new_dba TO michael WITH ADMIN OPTION;
</pre></div>
<!-- class="example" -->
<p>User <code>michael</code> is able to not only use all of the privileges implicit in the <code>new_dba</code> role, but he can also grant, revoke, and drop the <code>new_dba</code> role as deemed necessary. Because of these powerful capabilities, use caution when granting system privileges or roles with the <code>ADMIN OPTION</code>. These privileges are usually reserved for a security administrator, and are rarely granted to other administrators or users of the system.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When a user creates a role, the role is automatically granted to the creator with the <code>ADMIN OPTION</code>.</div>
</div>
<!-- class="sect3" -->
<div id="DBSEG98044" class="sect3"><a id="sthref850"></a>
<h4 class="sect3">Creating a New User with the GRANT Statement</h4>
<p>Oracle Database enables you to create a new user with the <code><a id="sthref851"></a>GRANT</code> statement. If you specify a password using the <code>IDENTIFIED BY</code> clause, and the user name does not exist in the database, then a new user with that user name and password is created.</p>
<p><a href="#BABCAAAG">Example 4-13</a> <a id="sthref852"></a>creates <code>psmith</code> as a new user while granting <code>psmith</code> the <code>CREATE SESSION</code> system privilege.</p>
<div id="DBSEG98045" class="example">
<p class="titleinexample"><a id="BABCAAAG"></a>Example 4-13 Creating a New User with the GRANT Statement</p>
<pre>
GRANT CREATE SESSION TO psmith IDENTIFIED BY <span class="italic">password</span>;
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="users.htm#BABGIFFE">"Creating User Accounts"</a></p>
</li>
<li>
<p><a href="authentication.htm#CHDFDHAJ">"Minimum Requirements for Passwords"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1007808"></a>
<div id="DBSEG98046" class="sect2">
<h3 class="sect2">Granting Object Privileges</h3>
<p><a id="sthref853"></a><a id="sthref854"></a><a id="sthref855"></a>You can use the <code>GRANT</code> statement to grant object privileges to roles and users. To grant an object privilege, you must fulfill one of the following conditions:</p>
<ul>
<li>
<p>You own the object specified.</p>
</li>
<li>
<p>You have been granted the <code>GRANT ANY OBJECT PRIVILEGE</code> system privilege. This privilege enables you to grant and revoke privileges on behalf of the object owner.</p>
</li>
<li>
<p>The <code>WITH GRANT OPTION</code> clause was specified when you were granted the object privilege.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
System privileges and roles cannot be granted along with object privileges in the same <code>GRANT</code> statement.</div>
</li>
</ul>
<p><a href="#BABEHJDC">Example 4-14</a> <a id="sthref856"></a>grants the <code>SELECT</code>, <code>INSERT</code>, and <code>DELETE</code> object privileges for all columns of the <code>emp</code> table to the users <code>jfee</code> and <code>tsmith</code>.</p>
<div id="DBSEG98047" class="example">
<p class="titleinexample"><a id="BABEHJDC"></a>Example 4-14 Granting Object Privileges to Users</p>
<pre>
GRANT SELECT, INSERT, DELETE ON emp TO jfee, tsmith;
</pre></div>
<!-- class="example" -->
<p>To grant all object privileges on the <code>salary</code> view to user <code>jfee</code>, use the <code>ALL</code> keyword as shown in the following example:</p>
<pre>
GRANT ALL ON salary TO jfee;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
A grantee cannot regrant access to objects unless the original grant included the <code>GRANT OPTION</code>. Thus in the example just given, <code>jfee</code> cannot use the <code>GRANT</code> statement to grant object privileges to anyone else.</div>
<div id="DBSEG98048" class="sect3"><a id="sthref857"></a>
<h4 class="sect3">Specifying the GRANT OPTION Clause</h4>
<p>Specify the <code>WITH GRANT OPTION</code><a id="sthref858"></a> clause with the <code>GRANT</code> statement to enable the grantee to grant the object privileges to other users. The user whose schema contains an object is automatically granted all associated object privileges with the <code>GRANT OPTION</code>. This special privilege allows the grantee several expanded privileges:</p>
<ul>
<li>
<p>The grantee can grant the object privilege to any user in the database, with or without the <code>GRANT OPTION</code>, and to any role in the database.</p>
</li>
<li>
<p>If both of the following conditions are true, then the grantee can create views on the table, and grant the corresponding privileges on the views to any user or role in the database:</p>
<ul>
<li>
<p>The grantee receives object privileges for the table with the <code>GRANT OPTION</code>.</p>
</li>
<li>
<p>The grantee has the <code>CREATE VIEW</code> or <code>CREATE ANY VIEW</code> system privilege.</p>
</li>
</ul>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref859"></a>The <code>GRANT OPTION</code> is not valid when granting an object privilege to a role. Oracle Database prevents the propagation of object privileges through roles so that grantees of a role cannot propagate object privileges received by means of roles.</div>
</div>
<!-- class="sect3" -->
<a id="i1007837"></a>
<div id="DBSEG98049" class="sect3">
<h4 class="sect3">Granting Object Privileges on Behalf of the Object Owner<a id="sthref860"></a></h4>
<p>The <code><a id="sthref861"></a><a id="sthref862"></a>GRANT ANY OBJECT PRIVILEGE</code> system privilege enables users to grant and revoke any object privilege on behalf of the object owner. This privilege provides a convenient means for database and application administrators to grant access to objects in any schema without requiring that they connect to the schema. Login credentials do not need to be maintained for schema owners who have this privilege, which reduces the number of connections required during configuration.</p>
<p>This system privilege is part of the Oracle Database supplied <code>DBA</code> role and is thus granted (with the <code>ADMIN OPTION</code>) to any user connecting <code>AS SYSDBA</code> (user <code>SYS</code>). As with other system privileges, the <code>GRANT ANY OBJECT PRIVILEGE</code> system privilege can only be granted by a user who possesses the <code>ADMIN OPTION</code>.</p>
<p>The <span class="italic">recorded</span> grantor of access rights to an object is either the object owner or the person exercising the <code>GRANT ANY OBJECT PRIVILEGE</code> system privilege. If the grantor with <code>GRANT ANY OBJECT PRIVILEGE</code> does <span class="italic">not</span> have the object privilege with the <code>GRANT OPTION</code>, then the object owner is shown as the grantor. Otherwise, when that grantor has the object privilege with the <code>GRANT OPTION</code>, then that grantor is recorded as the grantor of the grant.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The audit record generated by the <code>GRANT</code> statement always shows the actual user who performed the grant.</div>
<p>For example, consider the following scenario. User <code>adams</code> possesses the <code>GRANT ANY OBJECT PRIVILEGE</code> system privilege. He does not possess any other grant privileges. He issues the following statement:</p>
<pre>
GRANT SELECT ON HR.EMPLOYEES TO blake WITH GRANT OPTION;
</pre>
<p>If you examine the <code>DBA_TAB_PRIVS</code> view, then you will see that <code>hr</code> is shown as the grantor of the privilege:</p>
<pre>
SELECT GRANTEE, GRANTOR, PRIVILEGE, GRANTABLE
  FROM DBA_TAB_PRIVS 
  WHERE TABLE_NAME = 'EMPLOYEES' and OWNER = 'HR';

GRANTEE  GRANTOR PRIVILEGE    GRANTABLE
-------- ------- -----------  ----------
BLAKE    HR       SELECT      YES       
</pre>
<p>Now assume that user <code>blake</code> also has the <code>GRANT ANY OBJECT PRIVILEGE</code> system. He issues the following statement:</p>
<pre>
GRANT SELECT ON HR.EMPLOYEES TO clark;
</pre>
<p>In this case, when you query the <code>DBA_TAB_PRIVS</code> view again, you see that <code>blake</code> is shown as being the grantor of the privilege:</p>
<pre>
GRANTEE  GRANTOR  PRIVILEGE  GRANTABLE
-------- -------- ---------  ----------
BLAKE    HR       SELECT     YES       
CLARK    BLAKE    SELECT     NO        
</pre>
<p>This occurs because <code>blake</code> already possesses the <code>SELECT</code> privilege on <code>HR.EMPLOYEES</code> with the <code>GRANT OPTION</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1008009">"Revoking Object Privileges on Behalf of the Object Owner"</a></div>
</div>
<!-- class="sect3" -->
<a id="i1007882"></a>
<div id="DBSEG98050" class="sect3">
<h4 class="sect3">Granting Privileges on Columns</h4>
<p><a id="sthref863"></a><a id="sthref864"></a><a id="sthref865"></a><a id="sthref866"></a><a id="sthref867"></a><a id="sthref868"></a>You can grant <code>INSERT</code>, <code>UPDATE</code>, or <code>REFERENCES</code> privileges on individual columns in a table.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Before granting a column-specific <code>INSERT</code> privilege, determine if the table contains any columns on which <code>NOT NULL</code> constraints are defined. Granting selective insert capability without including the <code>NOT NULL</code> columns prevents the user from inserting any rows into the table. To avoid this situation, ensure that each <code>NOT NULL</code> column can either be inserted into or has a non-<code>NULL</code> default value. Otherwise, the grantee will not be able to insert rows into the table and will receive an error.</div>
<p>The following statement grants the <code>INSERT</code> privilege on the <code>acct_no</code> column of the <code>accounts</code> table to user <code>psmith</code>:</p>
<pre>
GRANT INSERT (acct_no) ON accounts TO psmith;
</pre>
<p>In the following example, object privilege for the <code>ename</code> and <code>job</code> columns of the <code>emp</code> table are granted to the users <code>jfee</code> and <code>tsmith</code>:</p>
<pre>
GRANT INSERT(ename, job) ON emp TO jfee, tsmith;
</pre></div>
<!-- class="sect3" -->
<div id="DBSEG98051" class="sect3"><a id="sthref869"></a>
<h4 class="sect3">Row-Level Access Control</h4>
<p>You can also provide access control at the row level, that is, within objects, using Virtual Private Database (VPD) or Oracle Label Security (OLS).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="vpd.htm#CIHBAJGI">Chapter 7, "Using Oracle Virtual Private Database to&nbsp;Control&nbsp;Data Access"</a></p>
</li>
<li>
<p><a href="vpd.htm#i1009519">"Adding Policies for Column-Level Oracle Virtual Private Database"</a></p>
</li>
<li>
<p><a class="olink OLSAG" href="../b28529/toc.htm"><span class="italic">Oracle Label Security Administrator's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABGFIAI"></a>
<div id="DBSEG98052" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Revoking Privileges and Roles from a User</h2>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#i1008789">Revoking System Privileges and Roles</a></p>
</li>
<li>
<p><a href="#i1008790">Revoking Object Privileges</a></p>
</li>
<li>
<p><a href="#i1008791">Cascading Effects of Revoking Privileges</a></p>
</li>
</ul>
<a id="i1008789"></a>
<div id="DBSEG98053" class="sect2">
<h3 class="sect2">Revoking System Privileges and Roles</h3>
<p>You can revoke system privileges and roles using the SQL statement <code>REVOKE</code>.<a id="sthref870"></a><a id="sthref871"></a><a id="sthref872"></a><a id="sthref873"></a> <a id="sthref874"></a><a id="sthref875"></a>Any user with the <code>ADMIN OPTION</code> for a system privilege or role can revoke the privilege or role from any other database user or role. The revoker does not have to be the user that originally granted the privilege or role. Users with <code>GRANT ANY ROLE</code> can revoke <span class="italic">any</span> role.</p>
<p>The following statement revokes the <code>CREATE TABLE</code> system privilege and the <code>accts_rec</code> role from user <code>psmith</code>:</p>
<pre>
REVOKE CREATE TABLE, accts_rec FROM psmith;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>ADMIN OPTION<a id="sthref876"></a></code> for a system privilege or role cannot be selectively revoked. Instead, revoke the privilege or role, and then grant the privilege or role again but without the <code>ADMIN OPTION</code>.</div>
</div>
<!-- class="sect2" -->
<a id="i1008790"></a>
<div id="DBSEG98054" class="sect2">
<h3 class="sect2">Revoking Object Privileges</h3>
<p>To<a id="sthref877"></a><a id="sthref878"></a><a id="sthref879"></a> revoke <a id="sthref880"></a>an object privilege, you must fulfill one of the following conditions:</p>
<ul>
<li>
<p>You previously granted the object privilege to the user or role.</p>
</li>
<li>
<p>You possess the <code>GRANT ANY OBJECT PRIVILEGE</code> system privilege that enables you to grant and revoke privileges on behalf of the object owner.</p>
</li>
</ul>
<p>You can only revoke the privileges that you, the person who granted the privilege, directly authorized. You cannot revoke grants that were made by other users to whom you granted the <code>GRANT OPTION</code>. However, there is a cascading effect. If the object privileges of the user who granted the privilege are revoked, then the object privilege grants that were propagated using the <code>GRANT OPTION</code> are revoked as well.</p>
<p>Assuming you are the original grantor of the privilege, the following statement revokes the <code>SELECT</code> and <code>INSERT</code> privileges on the <code>emp</code> table from users <code>jfee</code> and <code>psmith</code>:</p>
<pre>
REVOKE SELECT, INSERT ON emp FROM jfee, psmith;
</pre>
<p>The following statement revokes all object privileges for the <code>dept</code> table that you originally granted to the <code>human_resource</code> role:</p>
<pre>
REVOKE ALL ON dept FROM human_resources;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>GRANT OPTION</code> for an object privilege cannot be selectively revoked. Instead, revoke the object privilege and then granted it again but without the <code>GRANT OPTION</code>. Users cannot revoke object privileges from themselves.</div>
<a id="i1008009"></a>
<div id="DBSEG98055" class="sect3">
<h4 class="sect3">Revoking Object Privileges on Behalf of the Object Owner<a id="sthref881"></a></h4>
<p>The <code><a id="sthref882"></a><a id="sthref883"></a>GRANT ANY OBJECT PRIVILEGE</code> system privilege enables you to revoke any specified object privilege where the object owner is the grantor. This occurs when the object privilege is granted by the object owner, or on behalf of the owner by any user holding the <code>GRANT ANY OBJECT PRIVILEGE</code> system privilege.</p>
<p>In a situation where the object privilege was granted by both the owner of the object and the user executing the <code>REVOKE</code> statement (who has both the specific object privilege and the <code>GRANT ANY OBJECT PRIVILEGE</code> system privilege), Oracle Database only revokes the object privilege granted by the user issuing the <code>REVOKE</code> statement. This can be illustrated by continuing the example started in <a href="#i1007837">"Granting Object Privileges on Behalf of the Object Owner"</a>.</p>
<p>At this point, user <code>blake</code> granted the <code>SELECT</code> privilege on <code>HR.EMPLOYEES</code> to <code>clark</code>. Even though <code>blake</code> possesses the <code>GRANT ANY OBJECT PRIVILEGE</code> system privilege, he also holds the specific object privilege, thus this grant is attributed to him. Assume that user <code>HR</code> also grants the <code>SELECT</code> privilege on <code>HR.EMPLOYEES</code> to user <code>clark</code>. A query of the <code>DBA_TAB_PRIVS</code> view shows that the following grants are in effect for the <code>HR.EMPLOYEES</code> table:</p>
<pre>
GRANTEE  GRANTOR PRIVILEGE    GRANTABLE
-------- ------- -----------  ----------
BLAKE    HR       SELECT       YES       
CLARK    BLAKE    SELECT       NO        
CLARK    HR       SELECT       NO        
</pre>
<p>User <code>blake</code> now issues the following <code>REVOKE</code> statement:</p>
<pre>
REVOKE  SELECT ON HR.EMPLOYEES FROM clark;
</pre>
<p>Only the object privilege for user <code>clark</code> granted by user <code>blake</code> is removed. The grant by the object owner, <code>HR</code>, remains.</p>
<pre>
GRANTEE  GRANTOR PRIVILEGE    GRANTABLE
-------- ------- -----------  ----------
BLAKE    HR       SELECT      YES       
CLARK    HR       SELECT      NO        
</pre>
<p>If <code>blake</code> issues the <code>REVOKE</code> statement again, then this time the effect is to remove the object privilege granted by <code>adams</code> (on behalf of <code>HR</code>), using the <code>GRANT ANY OBEJCT PRIVILEGE</code> system privilege.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1007837">"Granting Object Privileges on Behalf of the Object Owner"</a></div>
</div>
<!-- class="sect3" -->
<div id="DBSEG98056" class="sect3"><a id="sthref884"></a>
<h4 class="sect3">Revoking Column-Selective Object Privileges</h4>
<p>Although<a id="sthref885"></a><a id="sthref886"></a><a id="sthref887"></a><a id="sthref888"></a><a id="sthref889"></a><a id="sthref890"></a> users can grant column-specific <code>INSERT</code>, <code>UPDATE</code>, and <code>REFERENCES</code> privileges for tables and views, they cannot selectively revoke column-specific privileges with a similar <code>REVOKE</code> statement. Instead, the grantor must first revoke the object privilege for all columns of a table or view, and then selectively repeat the grant of the column-specific privileges that the grantor intends to keep in effect.</p>
<p>For example, assume that role <code>human_resources</code> was granted the <code>UPDATE</code> privilege on the <code>deptno</code> and <code>dname</code> columns of the table <code>dept</code>. To revoke the <code>UPDATE</code> privilege on just the <code>deptno</code> column, issue the following two statements:</p>
<pre>
REVOKE UPDATE ON dept FROM human_resources;
GRANT UPDATE (dname) ON dept TO human_resources;
</pre>
<p>The <code>REVOKE</code> statement revokes the <code>UPDATE</code> privilege on all columns of the <code>dept</code> table from the role <code>human_resources</code>. The <code>GRANT</code> statement then repeats, restores, or reissues the grant of the <code>UPDATE</code> privilege on the <code>dname</code> column to the role <code>human_resources</code>.</p>
</div>
<!-- class="sect3" -->
<div id="DBSEG98057" class="sect3"><a id="sthref891"></a>
<h4 class="sect3">Revoking the REFERENCES Object Privilege</h4>
<p><a id="sthref892"></a><a id="sthref893"></a>If the grantee of the <code>REFERENCES</code> object privilege has used the privilege to create a foreign key constraint (that currently exists), then the grantor can revoke the privilege only by specifying the <code>CASCADE CONSTRAINTS</code> option in the <code>REVOKE</code> statement:</p>
<pre>
REVOKE REFERENCES ON dept FROM jward CASCADE CONSTRAINTS;
</pre>
<p>Any foreign key constraints currently defined that use the revoked <code>REFERENCES</code> privilege are dropped when the <code>CASCADE CONSTRAINTS</code> clause is specified.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1008791"></a>
<div id="DBSEG98058" class="sect2">
<h3 class="sect2">Cascading Effects of Revoking Privileges</h3>
<p><a id="sthref894"></a><a id="sthref895"></a><a id="sthref896"></a>Depending on the type of privilege, there may be cascading effects when a privilege is revoked. This is discussed in the following sections:</p>
<ul>
<li>
<p><a href="#CHDIHCBC">Cascading Effects When Revoking System Privileges</a></p>
</li>
<li>
<p><a href="#CHDEDHFF">Cascading Effects When Revoking Object Privileges</a></p>
</li>
</ul>
<a id="CHDIHCBC"></a>
<div id="DBSEG98059" class="sect3">
<h4 class="sect3">Cascading Effects When Revoking System Privileges</h4>
<p>There <a id="sthref897"></a>are no cascading effects when revoking a system privilege related to DDL operations, regardless of whether the privilege was granted with or without the <code>ADMIN OPTION</code>. For example, assume the following:</p>
<ol>
<li>
<p>The security administrator grants the <code>CREATE TABLE</code> system privilege to user <code>jfee</code> with the <code>ADMIN OPTION</code>.</p>
</li>
<li>
<p>User <code>jfee</code> creates a table.</p>
</li>
<li>
<p>User <code>jfee</code> grants the <code>CREATE TABLE</code> system privilege to user <code>tsmith</code>.</p>
</li>
<li>
<p>User <code>tsmith</code> creates a table.</p>
</li>
<li>
<p>The security administrator revokes the <code>CREATE TABLE</code> system privilege from user <code>jfee</code>.</p>
</li>
<li>
<p>The table created by user <code>jfee</code> continues to exist. User <code>tsmith</code> still has the table and the <code>CREATE TABLE</code> system privilege.</p>
</li>
</ol>
<p>You can observe cascading effects when you revoke a system privilege related to a DML operation. If the <code>SELECT ANY TABLE</code> privilege is revoked from a user, then all procedures contained in the user's schema relying on this privilege can no longer be executed successfully until the privilege is reauthorized.</p>
</div>
<!-- class="sect3" -->
<a id="CHDEDHFF"></a>
<div id="DBSEG98060" class="sect3">
<h4 class="sect3">Cascading Effects When Revoking Object Privileges</h4>
<p><a id="sthref898"></a><a id="sthref899"></a>Revoking an object privilege can have cascading effects. Remember the following:</p>
<ul>
<li>
<p><span class="bold">Object definitions that depend on a DML object privilege can be affected if the DML object privilege is revoked.</span> For example, assume that the body of the <code>test</code> procedure includes a SQL statement that queries data from the <code>emp</code> table. If the <code>SELECT</code> privilege on the <code>emp</code> table is revoked from the owner of the <code>test</code> procedure, then the procedure can no longer be executed successfully.</p>
</li>
<li>
<p><span class="bold">When a REFERENCES privilege for a table is revoked from a user, any foreign key integrity constraints that are defined by the user and require the dropped REFERENCES privilege are automatically dropped.</span> For example, assume that user <code>jward</code> is granted the <code>REFERENCES</code> privilege for the <code>deptno</code> column of the <code>dept</code> table. This user now creates a foreign key on the <code>deptno</code> column in the <code>emp</code> table that references the <code>deptno</code> column of the <code>dept</code> table. If the <code>REFERENCES</code> privilege on the <code>deptno</code> column of the <code>dept</code> table is revoked, then the foreign key constraint on the <code>deptno</code> column of the <code>emp</code> table is dropped in the same operation.</p>
</li>
<li>
<p><span class="bold">The object privilege grants propagated using the GRANT OPTION are revoked if the object privilege of a grantor is revoked.</span> For example, assume that <code>user1</code> is granted the <code>SELECT</code> object privilege on the <code>emp</code> table with the <code>GRANT OPTION</code>, and grants the <code>SELECT</code> privilege on <code>emp</code> to <code>user2</code>. Subsequently, the <code>SELECT</code> privilege is revoked from <code>user1</code>. This <code>REVOKE</code> statement is also cascaded to <code>user2</code>. Any objects that depend on the revoked <code>SELECT</code> privilege of <code>user1</code> and <code>user2</code> can also be affected, as described earlier.</p>
</li>
</ul>
<p>Object definitions that require the <code>ALTER</code> and <code>INDEX DDL</code> object privileges are not affected if the <code>ALTER</code> or <code>INDEX</code> object privilege is revoked. For example, if the <code>INDEX</code> privilege is revoked from a user that created an index on a table that belongs to another user, then the index continues to exist after the privilege is revoked.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABHJFCF"></a>
<div id="DBSEG40048" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Granting to and Revoking from the PUBLIC Role</h2>
<p><a id="sthref900"></a><a id="sthref901"></a>You can grant and revoke privileges and roles from the role <code>PUBLIC</code>. Because <code>PUBLIC</code> is accessible to every database user, all privileges and roles granted to <code>PUBLIC</code> are accessible to every database user.</p>
<p>Security administrators and database users should grant a privilege or role to <code>PUBLIC</code> only if every database user requires the privilege or role. This recommendation reinforces the general rule that, at any given time, each database user should have only the privileges required to accomplish the current group tasks successfully.</p>
<p><a id="sthref902"></a><a id="sthref903"></a>Revoking a privilege from <code>PUBLIC</code> can cause significant cascading effects. If any privilege related to a DML operation is revoked from <code>PUBLIC</code> (for example, SELECT <code>ANY TABLE</code> or <code>UPDATE ON</code> <code>emp</code>), then all procedures in the database, including functions and packages, must be <span class="italic">reauthorized</span> before they can be used again. Therefore, be careful when you grant and revoke DML-related privileges to or from <code>PUBLIC</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>Managing Object Dependencies in <a class="olink ADMIN" href="../../server.111/b28310/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about object dependencies</p>
</li>
<li>
<p><a href="guidelines.htm#i1007433">"Guidelines for Securing Data"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABIEADD"></a>
<div id="DBSEG98061" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Granting Roles Using the Operating System or Network<a id="sthref904"></a><a id="sthref905"></a><a id="sthref906"></a><a id="sthref907"></a></h2>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#BABGBJFJ">About Granting Roles Using the Operating System or Network</a></p>
</li>
<li>
<p><a href="#i1008307">Using Operating System Role Identification</a></p>
</li>
<li>
<p><a href="#i1008799">Using Operating System Role Management</a></p>
</li>
<li>
<p><a href="#i1008800">Granting and Revoking Roles When OS_ROLES Is Set to TRUE</a></p>
</li>
<li>
<p><a href="#i1008801">Enabling and Disabling Roles When OS_ROLES Is Set to TRUE</a></p>
</li>
<li>
<p><a href="#i1008802">Using Network Connections with Operating System Role Management</a></p>
</li>
</ul>
<a id="BABGBJFJ"></a>
<div id="DBSEG98062" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Granting Roles Using the Operating System or Network</h3>
<p>Instead of a security administrator explicitly granting and revoking database roles to and from users using <code>GRANT</code> and <code>REVOKE</code> statements, the operating system on which Oracle Database runs can grant roles to users at connect time. Roles can be administered using the operating system and passed to Oracle Database when a user creates a session. As part of this mechanism, the default roles of a user and the roles granted to a user with the <code>ADMIN OPTION</code> can be identified. If the operating system is used to authorize users for roles, then all roles must be created in the database and privileges assigned to the role with <code>GRANT</code> statements.</p>
<p>Roles can also be granted through a network service.</p>
<p>The advantage of using the operating system to identify the database roles of a user is that privilege management for an Oracle database can be externalized. The security facilities offered by the operating system control user privileges. This option may offer advantages of centralizing security for several system activities, such as the following situation:</p>
<ul>
<li>
<p>MVS Oracle administrators want RACF groups to identify database user roles.</p>
</li>
<li>
<p>UNIX Oracle administrators want UNIX groups to identify database user roles.</p>
</li>
<li>
<p>VMS Oracle administrators want to use rights identifiers to identify database user roles.</p>
</li>
</ul>
<p>The main disadvantage of using the operating system to identify the database roles of a user is that privilege management can only be performed at the role level. Individual privileges cannot be granted using the operating system, but they can still be granted inside the database using <code>GRANT</code> statements.</p>
<p>A second disadvantage of using this feature is that, by default, users cannot connect to the database through the shared server or any other network connection if the operating system is managing roles. However, you can change this default as described in <a href="#i1008802">"Using Network Connections with Operating System Role Management"</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The features described in this section are available only on some operating systems. See your operating system-specific Oracle Database documentation to determine if you can use these features.</div>
</div>
<!-- class="sect2" -->
<a id="i1008307"></a>
<div id="DBSEG98063" class="sect2">
<h3 class="sect2">Using Operating System Role Identification</h3>
<p><a id="sthref908"></a><a id="sthref909"></a><a id="sthref910"></a>To cause a database to use the operating system to identify the database roles of each user when a session is created, set the initialization parameter <code>OS_ROLES</code> to <code>TRUE</code> (and restart the instance, if it is currently running). When a user tries to create a session with the database, Oracle Database initializes the user security domain using the database roles identified by the operating system.</p>
<p><a id="sthref911"></a><a id="sthref912"></a><a id="sthref913"></a>To identify database roles for a user, the operating system account for each Oracle Database user must have operating system identifiers (these may be called groups, rights identifiers, or other similar names) that indicate which database roles are to be available for the user. Role specification can also indicate which roles are the default roles of a user and which roles are available with the <code>ADMIN OPTION</code>. No matter which operating system is used, the role specification at the operating system level follows the format:</p>
<pre>
ora_<span class="italic">ID</span>_<span class="italic">ROLE</span>[[_d][_a][_da]]
</pre>
<p>In this specification:</p>
<ul>
<li>
<p><code>ID</code> has a definition that varies on different operating systems. For example, on VMS, <code>ID</code> is the instance identifier of the database; on VMS, it is the computer type; and on UNIX, it is the system <code>ID</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<code>ID</code> is case-sensitive to match your <code>ORACLE_SID</code>. <code>ROLE</code> is not case-sensitive.</div>
</li>
<li>
<p><code>ROLE</code> is the name of the database role.</p>
</li>
<li>
<p><code>d</code> is an optional character that indicates this role is to be a default role of the database user.</p>
</li>
<li>
<p><code>a</code> is an optional character that indicates this role is to be granted to the user with the <code>ADMIN OPTION</code>. This allows the user to grant the role to other roles only. Roles cannot be granted to users if the operating system is used to manage roles.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If either the <code>d</code> or <code>a</code> character is specified, then precede that character by an underscore (_).</div>
</li>
</ul>
<p>For example, an operating system account might have the following roles identified in its profile:</p>
<pre>
ora_PAYROLL_ROLE1
ora_PAYROLL_ROLE2_a
ora_PAYROLL_ROLE3_d
ora_PAYROLL_ROLE4_da
</pre>
<p>When the corresponding user connects to the <code>payroll</code> instance of Oracle Database, <code>role3</code> and <code>role4</code> are defaults, while <code>role2</code> and <code>role4</code> are available with the <code>ADMIN OPTION</code>.</p>
</div>
<!-- class="sect2" -->
<a id="i1008799"></a>
<div id="DBSEG98064" class="sect2">
<h3 class="sect2">Using Operating System Role Management</h3>
<p><a id="sthref914"></a>When you use operating system-managed roles, remember that database roles are being granted to an operating system user. Any database user to which the operating system user is able to connect will have the authorized database roles enabled. For this reason, you should consider defining all Oracle Database users as <code>IDENTIFIED EXTERNALLY</code> if you are using <code>OS_ROLES = TRUE</code>, so that the database accounts are tied to the operating system account that was granted privileges.</p>
</div>
<!-- class="sect2" -->
<a id="i1008800"></a>
<div id="DBSEG98065" class="sect2">
<h3 class="sect2">Granting and Revoking Roles When OS_ROLES Is Set to TRUE</h3>
<p><a id="sthref915"></a><a id="sthref916"></a>If the <code>OS_ROLES</code> parameter is set to <code>TRUE</code>, then the operating system completely manages the granting and revoking of roles to users. Any previous granting of roles to users using <code>GRANT</code> statements do not apply. However, they are still listed in the data dictionary. Only the role grants to users made at the operating system level apply. Users can still grant privileges to roles and users.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the operating system grants a role to a user with the <code>ADMIN OPTION</code>, then the user can grant the role only to other roles.</div>
</div>
<!-- class="sect2" -->
<a id="i1008801"></a>
<div id="DBSEG98066" class="sect2">
<h3 class="sect2">Enabling and Disabling Roles When OS_ROLES Is Set to TRUE</h3>
<p><a id="sthref917"></a><a id="sthref918"></a><a id="sthref919"></a>If the <code>OS_ROLES</code> initialization parameter is <a id="sthref920"></a><a id="sthref921"></a><a id="sthref922"></a><a id="sthref923"></a>set to <code>TRUE</code>, then any role granted by the operating system can be dynamically enabled using the <code>SET ROLE</code> statement. This still applies, even if the role was defined to require a password or operating system authorization. However, any role not identified in the operating system account of a user cannot be specified in a <code>SET ROLE</code> statement, even if a role was granted using a <code>GRANT</code> statement when <code>OS_ROLES = FALSE</code>. (If you specify such a role, then Oracle Database ignores it.)</p>
<p>When <code>OS_ROLES = TRUE</code>, a user can enable as many roles as specified by the initialization parameter <code>MAX_ENABLED_ROLES</code>.</p>
</div>
<!-- class="sect2" -->
<a id="i1008802"></a>
<div id="DBSEG98067" class="sect2">
<h3 class="sect2">Using Network Connections with Operating System Role Management</h3>
<p><a id="sthref924"></a><a id="sthref925"></a><a id="sthref926"></a>If you have the operating system manage roles, then, by default, users cannot connect to the database through the shared server. This restriction is the default because a remote user could impersonate another operating system user over an unsecure connection.</p>
<p><a id="sthref927"></a>If you are not concerned with this security risk and want to use operating system role management with the shared server, or any other network connection, then set the initialization parameter <code>REMOTE_OS_ROLES</code> to <code>TRUE</code>. The change takes effect the next time you start the instance and mount the database. The default setting of this parameter is <code>FALSE</code>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJEHFA"></a>
<div id="DBSEG98068" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">When Do Grants and Revokes Take Effect?</h2>
<p><a id="sthref928"></a><a id="sthref929"></a>Depending on what is granted or revoked, a grant or revoke takes effect at different times:</p>
<ul>
<li>
<p>All grants and revokes of system and object privileges to anything (users, roles, and <code>PUBLIC</code>) take immediate effect.</p>
</li>
<li>
<p>All grants and revokes of roles to anything (users, other roles, <code>PUBLIC</code>) take effect only when a current user session issues a <code>SET ROLE</code> statement to reenable the role after the grant and revoke, or when a new user session is created after the grant or revoke.</p>
</li>
</ul>
<p>You can see which roles are currently enabled by examining the <code>SESSION_ROLES</code> data dictionary view.</p>
<a id="i1008180"></a>
<div id="DBSEG98069" class="sect2">
<h3 class="sect2">How the SET ROLE Statement Affects Grants and Revokes</h3>
<p><a id="sthref930"></a><a id="sthref931"></a><a id="sthref932"></a><a id="sthref933"></a>During the user session, the user or an application can use the <code>SET ROLE</code> statement any number of times to change the roles currently enabled for the session. The user must already be granted the roles that are named in the <code>SET ROLE</code> statement. To specify the maximum number of roles number of roles that can be concurrently enabled, set the initialization parameter <code>MAX_ENABLED_ROLES</code>.</p>
<p><a href="#BABJCHGD">Example 4-15</a> enables the role <code>clerk</code>, which you have already been granted, and specifies the password.</p>
<div id="DBSEG98070" class="example">
<p class="titleinexample"><a id="BABJCHGD"></a>Example 4-15 Using SET ROLE to Grant a Role and Specify a Password</p>
<pre>
SET ROLE clerk IDENTIFIED BY <span class="italic">password</span>;
</pre></div>
<!-- class="example" -->
<p>Replace <code><span class="codeinlineitalic">password</span></code> with a password that is secure. <a href="authentication.htm#CHDFDHAJ">"Minimum Requirements for Passwords"</a> describes the minimum requirements for passwords.</p>
<p><a href="#BABBJEHJ">Example 4-16</a> shows how to use <code>SET ROLE</code> to disable all roles.</p>
<div id="DBSEG98071" class="example">
<p class="titleinexample"><a id="BABBJEHJ"></a>Example 4-16 Using SET ROLE to Disable All Roles</p>
<pre>
SET ROLE NONE;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<div id="DBSEG98072" class="sect2"><a id="sthref934"></a>
<h3 class="sect2">Specifying Default Roles</h3>
<p>When <a id="sthref935"></a><a id="sthref936"></a>a user logs on, Oracle Database enables all privileges granted explicitly to the user and all privileges in the default roles of the user.</p>
<p>You can set and alter a list of default roles for a user by using the <code>ALTER USER</code> SQL statement. The <code>ALTER USER</code> statement specifies roles that are to be enabled when a user connects to the database. The user must have been directly granted the roles with a <code>GRANT</code> statement, or the roles must have been created by the user with the <code>CREATE ROLE</code> privilege. For information about the restrictions of the <code>DEFAULT ROLE</code> clause of the <code>ALTER USER</code> statement, see <a class="olink SQLRF01103" href="../../server.111/b28286/statements_4003.htm#SQLRF01103"><span class="italic">Oracle Database SQL Language Reference</span></a>.</p>
<p><a href="#BABECGBA">Example 4-17</a> <a id="sthref937"></a><a id="sthref938"></a>sets the default roles <code>payclerk</code> and <code>pettycash</code> for user <code>jane</code>:</p>
<div id="DBSEG98073" class="example">
<p class="titleinexample"><a id="BABECGBA"></a>Example 4-17 Using ALTER USER to Set Default Roles</p>
<pre>
ALTER USER jane DEFAULT ROLE payclerk, pettycash;
</pre></div>
<!-- class="example" -->
<p>You cannot set default roles for a user in the <code>CREATE USER</code> statement. When you first create a user, the default user role setting is <code>ALL</code>, which causes all roles subsequently granted to the user to be default roles. Use the <code>ALTER USER</code> statement to limit the default user roles.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
When you create a role (other than a user role), it is granted implicitly and added as a default role. When the <code>MAX_ENABLED_ROLES</code> initialization parameter is set, users receive an error at login if they have more roles than <code>MAX_ENABLED_ROLES</code> specifies. You can avoid this error by changing the default user roles to be less than <code>MAX_ENABLED_ROLES</code>. Therefore, you should change the <code>DEFAULT ROLE</code> settings of <code>SYS</code> and <code>SYSTEM</code> before creating user roles. See <a class="olink REFRN10104" href="../../server.111/b28320/initparams130.htm#REFRN10104"><span class="italic">Oracle Database Reference</span></a> for more information about <code>MAX_ENABLED_ROLES</code>.</div>
</div>
<!-- class="sect2" -->
<div id="DBSEG98074" class="sect2"><a id="sthref939"></a>
<h3 class="sect2">Restricting the Number of Roles That a User Can Enable</h3>
<p><a id="sthref940"></a><a id="sthref941"></a><a id="sthref942"></a>A user <a id="sthref943"></a>can enable as many roles as specified by the initialization parameter <code>MAX_ENABLED_ROLES</code>. All indirectly granted roles enabled as a result of enabling a primary role are included in this count. The database administrator can alter this limitation by modifying the value for this parameter. Higher values permit each user session to have more concurrently enabled roles, but these values also cause more memory to be used for each user session. This occurs because the PGA size requires four bytes for each role in each session. Determine the highest number of roles that will be concurrently enabled by any one user, and use this value for the <code>MAX_ENABLED_ROLES</code> parameter.</p>
<p>For detailed information about the <code>MAX_ENABLED_ROLES</code> initialization parameter, see <a class="olink REFRN10104" href="../../server.111/b28320/initparams130.htm#REFRN10104"><span class="italic">Oracle Database Reference</span></a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHDAJDJ"></a>
<div id="DBSEG40012" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing Fine-Grained Access to External Network Services</h2>
<p>You <a id="sthref944"></a>can configure fine-grained access control for users and roles that need to access external network services from the database. This way, specific groups of users can connect to one or more host computers, based on privileges that you grant them. Typically, you use this feature to control access to applications that run on specific host addresses.</p>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#BABCBFHD">About Fine-Grained Access to External Network Services</a></p>
</li>
<li>
<p><a href="#BABICBEI">Upgrading Applications That Depend on the PL/SQL Network Utility Packages</a></p>
</li>
<li>
<p><a href="#CIHIIBGH">Creating an Access Control List for External Network Services</a></p>
</li>
<li>
<p><a href="#CIHHEGHJ">Examples of Creating Access Control Lists</a></p>
</li>
<li>
<p><a href="#CIHJBFCJ">Specifying a Group of Network Host Computers</a></p>
</li>
<li>
<p><a href="#CIHGCIGH">Precedence Order for a Host Computer in Multiple Access Control List Assignments</a></p>
</li>
<li>
<p><a href="#BABIAAFD">Precedence Order for a Host in Access Control List Assignments with Port Ranges</a></p>
</li>
<li>
<p><a href="#BABGIHGH">Checking Privilege Assignments That Affect User Access to a Network Host</a></p>
</li>
<li>
<p><a href="#BABHGBGE">Setting the Precedence of Multiple Users and Roles in One Access Control List</a></p>
</li>
<li>
<p><a href="#CIHGEHAG">Finding Information About Access Control Lists</a></p>
</li>
</ul>
<a id="BABCBFHD"></a>
<div id="DBSEG98075" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Fine-Grained Access to External Network Services</h3>
<p><a id="sthref945"></a>To configure fine-grained access to external network services, you create an access control list (ACL), which is stored in Oracle XML DB. You can create the access control list by using Oracle XML DB itself, or by using the <code>DBMS_NETWORK_ACL_ADMIN</code> and <code>DBMS_NETWORK_ACL_UTILITY</code> PL/SQL packages. This guide explains how to use these packages to create and manage the access control list. To create an access control list by using Oracle XML DB and for general conceptual information about access control lists, see <a class="olink ADXDB2400" href="../../appdev.111/b28369/xdb21sec.htm#ADXDB2400"><span class="italic">Oracle XML DB Developer's Guide</span></a>.</p>
<p>This feature enhances security for network connections because it restricts the external network hosts that a database user can connect to using the PL/SQL network utility packages such as <code>UTL_TCP</code>, <code>UTL_SMTP</code>, <code>UTL_MAIL</code>, <code>UTL_HTTP</code>, and <code>UTL_INADDR</code>. Otherwise, an intruder who gained access to the database could maliciously attack the network, because, by default, the PL/SQL utility packages are created with the <code>EXECUTE</code> privilege granted to <code>PUBLIC</code> users.</p>
</div>
<!-- class="sect2" -->
<a id="BABICBEI"></a>
<div id="DBSEG98076" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Upgrading Applications That Depend on the PL/SQL Network Utility Packages</h3>
<p><a id="sthref946"></a><a id="sthref947"></a>If you have upgraded from a release before Oracle Database 11<span class="italic">g</span> Release 1 (11.1), and your applications depend on PL/SQL network utility packages such as <code>UTL_TCP</code>, <code>UTL_SMTP</code>, <code>UTL_MAIL</code>, <code>UTL_HTTP</code>, and <code>UTL_INADDR</code>, the following error may occur when you try to run the application:</p>
<pre>
ORA-24247: network access denied by access control list (ACL)
</pre>
<p>Use the procedures in this section to reconfigure the network access for the application. See also <a class="olink UPGRD12537" href="../../server.111/b28300/app.htm#UPGRD12537"><span class="italic">Oracle Database Upgrade Guide</span></a> for compatibility issues for applications that depend on the PL/SQL network utility packages. For detailed information about the network utility packages, see <a class="olink ARPLS" href="../../appdev.111/b28419/toc.htm"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.</p>
</div>
<!-- class="sect2" -->
<a id="CIHIIBGH"></a>
<div id="DBSEG98077" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Creating an Access Control List for External Network Services</h3>
<p><a id="sthref948"></a>When you create access control lists for network connections, you should create one access control list dedicated to a group of common users, for example, users who need access to a particular application that resides on a specific host computer. For ease of administration and for good system performance, do not create too many access control lists. Network hosts accessible to the same group of users should share the same access control list.</p>
<p>To create the access control list by using the <code><a id="sthref949"></a>DBMS_NETWORK_ACL_ADMIN</code> package, follow these steps:</p>
<ul>
<li>
<p><a href="#BABFGFHJ">Step 1: Create the Access Control List and Its Privilege Definitions</a></p>
</li>
<li>
<p><a href="#BABHFIAH">Step 2: Assign the Access Control List to One or More Network Hosts</a></p>
</li>
</ul>
<a id="BABFGFHJ"></a>
<div id="DBSEG98078" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Step 1: Create the Access Control List and Its Privilege Definitions</h4>
<p>Use the <code>DBMS_NETWORK_ACL_ADMIN.CREATE_ACL</code> procedure to create the content of the access control list. It contains a name of the access control list, a brief description, and privilege settings for one user or role that you want to associate with the access control list. In an access control list, privileges for each user or role are grouped together as an access control entry (ACE). An access control list must have the privilege settings for at least one user or role.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot import or export the access control list settings by using the Oracle Database import or export utilities such as Oracle Data Pump.</div>
<p><a id="sthref950"></a>The syntax for creating an access control list is as follows:</p>
<pre>
BEGIN
 DBMS_NETWORK_ACL_ADMIN.CREATE_ACL (
  acl          =&gt; '<span class="italic">file_name</span>.xml', 
  description  =&gt; '<span class="italic">file description</span>',
  principal    =&gt; '<span class="italic">user_or_role</span>',
  is_grant     =&gt; TRUE|FALSE, 
  privilege    =&gt; 'connect|resolve',
  start_date   =&gt; null|<span class="italic">timestamp_with_time_zone</span>,
  end_date     =&gt; null|<span class="italic">timestamp_with_time_zone</span>); 
END;
</pre>
<p>In this specification:</p>
<ul>
<li>
<p><code>acl</code>: Enter a name for the access control list XML file. Oracle Database creates this file relative to the <code>/sys/acls</code> directory in the XML DB Repository in the database. Include the <code>.xml</code> extension. For example:</p>
<pre>
acl =&gt; 'us-example-com-permissions.xml',
</pre></li>
<li>
<p><code>description</code>: Enter a brief description of the purpose of this file. For example:</p>
<pre>
description =&gt; 'Network connection permission for ACCT_MGR role',
</pre></li>
<li>
<p><code>principal</code>: Enter the first user account or role being granted or denied permissions. For example:</p>
<pre>
principal =&gt; 'ACCT_MGR',
</pre>
<p>Enter the name of the user account or role in case sensitive characters. For example, if the database stores the role name <code>ACCT_MGR</code> in all capital letters, entering it in mixed or lower case will not work. You can find the user accounts and roles in the current database instance by querying the <code>DBA_USERS</code> and <code>DBA_ROLES</code> data dictionary views. Typically, user names and roles are stored in upper-case letters.</p>
<p>If you want to enter multiple users or grant additional privileges to this user or role, use the <code>DBMS_NETWORK_ACL.ADD_PRIVILEGE</code> procedure (described next) after you have created this access control list XML file.</p>
</li>
<li>
<p><code>is_grant</code>: Enter either <code>TRUE</code> or <code>FALSE</code>, to indicate whether the privilege is to be granted or denied. For example:</p>
<pre>
is_grant =&gt; TRUE,
</pre></li>
<li>
<p><code>privilege</code>: Enter either <code>connect</code> or <code>resolve</code>. This setting is case sensitive, so always enter it in lowercase. For example:</p>
<pre>
privilege =&gt; 'connect',
</pre>
<p>The <code>connect</code> privilege grants the user permission to connect to a network service at an external host. The <code>resolve</code> privilege grants the user permission to resolve a network host name or an IP address.</p>
<p>A database user must have the <code>connect</code> privilege to connect to an external network host computer if he or she is connecting using the <code>UTL_TCP</code>, <code>UTL_HTTP</code>, <code>UTL_SMTP</code>, and <code>UTL_MAIL</code> utility packages. To resolve the host name that was given a host IP address, or the IP address that was given a host name, with the <code>UTL_INADDR</code> package, grant the database user the <code>resolve</code> privilege instead.</p>
<p>You can use the data dictionary views described in <a href="#CIHGEHAG">"Finding Information About Access Control Lists"</a> to find more information about existing privileges and network connections.</p>
</li>
<li>
<p><code>start_date</code>: (Optional) Enter the start date for the access control entry (ACE), in <code>TIMESTAMP WITH TIME ZONE</code> format (YYYY-MM-DD HH:MI:SS.FF TZR). When specified, the access control entry will be valid only on or after the specified date. The default is <code>null</code>. For example, to set a start date of February 28, 2008, at 6:30 a.m. in San Francisco, California, U.S., which is in the Pacific time zone:</p>
<pre>
start_date =&gt; '2008-02-28 06:30:00.00 US/Pacific',
</pre>
<p>The <code>NLS_TIMESTAMP_FORMAT</code> initialization parameter sets the default timestamp format. See <a class="olink REFRN10131" href="../../server.111/b28320/initparams147.htm#REFRN10131"><span class="italic">Oracle Database Reference</span></a> for more information.</p>
</li>
<li>
<p><code>end_date</code>: (Optional) Enter the end date for the access control entry (ACE), in <code>TIMESTAMP WITH TIME ZONE</code> format (YYYY-MM-DD HH:MI:SS.FF TZR). When specified, the access control entry expires after the specified date. The <code>end_date</code> setting must be greater than or equal to the <code>start_date</code> setting. The default is <code>null</code>.</p>
<p>For example, to set an end date of December 10, 2008, at 11:59 p.m. in San Francisco, California, U.S., which is in the Pacific time zone:</p>
<pre>
end_date =&gt; '2008-12-10 23:59:00.00 US/Pacific');
</pre></li>
</ul>
<p>To<a id="sthref951"></a> add more users or roles to the access control list, or grant additional privileges to one user or role, use the <code>DBMS_NETWORK_ACL.ADD_PRIVILEGE</code> procedure. The syntax is as follows:</p>
<pre>
BEGIN
 DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE ( 
  acl         =&gt; '<span class="italic">file_name</span>.xml', 
  principal   =&gt; '<span class="italic">user_or_role</span>',
  is_grant    =&gt; TRUE|FALSE, 
  privilege   =&gt; 'connect|resolve', 
  position    =&gt; null|<span class="italic">value</span>, 
  start_date  =&gt; null|<span class="italic">timestamp_with_time_zone</span>,
  end_date    =&gt; null|<span class="italic">timestamp_with_time_zone</span>);
END;
/
</pre>
<p>As you can see, the parameters to add the privilege are the similar to those in the <code>CREATE_ACL</code> procedure, except that <code>description</code> is not included and the <code>position</code> parameter, which sets the order of precedence for multiple users or roles, was added. Because you now are adding more than one user or role, you may want to consider setting their precedence. <a href="#BABHGBGE">"Setting the Precedence of Multiple Users and Roles in One Access Control List"</a> provides more information.</p>
<p>Other <code>DBMS_NETWORK_ACL_ADMIN</code> procedures that are available for this step are <code>DELETE_PRIVILEGE</code> and <code>DROP_ACL</code>.</p>
<p>At this stage, you have created an access control list that defines the privileges needed to connect to a network host. However, the access control list has no effect until you complete <a href="#BABHFIAH">Step 2: Assign the Access Control List to One or More Network Hosts</a>.</p>
</div>
<!-- class="sect3" -->
<a id="BABHFIAH"></a>
<div id="DBSEG98079" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Step 2: Assign the Access Control List to One or More Network Hosts</h4>
<p>After <a id="sthref952"></a>you create the access control list, then you are ready to assign it to one or more network host computers. You can use the <code>DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL</code> procedure to do so.</p>
<p>For example:</p>
<pre>
BEGIN
 DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL (
  acl         =&gt; '<span class="italic">file_name</span>.xml',
  host        =&gt; '<span class="italic">network_host</span>', 
  lower_port  =&gt; null|<span class="italic">port_number</span>,
  upper_port  =&gt; null|<span class="italic">port_number</span>); 
END;
/
</pre>
<p>In this specification:</p>
<ul>
<li>
<p><code>acl</code>: Enter the name of the access control list XML file (from <a href="#BABFGFHJ">Step 1: Create the Access Control List and Its Privilege Definitions</a>) to assign to the network host. Oracle Database creates this file relative to the <code>/sys/acls</code> directory in the XML DB Repository in the database. Include the <code>.xml</code> extension. For example:</p>
<pre>
acl =&gt; 'us-example-com-permissions.xml',
</pre></li>
<li>
<p><code>host</code>: Enter the network host to which this access control list will be assigned. This setting can be a name or IP address of the network host, or you can enter <code>localhost</code>. Host names are case-insensitive. For example:</p>
<pre>
host =&gt; 'us.example.com',
</pre>
<p>If you specify<a id="sthref953"></a><a id="sthref954"></a> <code>localhost</code>, and if the host name has not been specified with the <code>UTL_INADDR</code> and <code>UTL_HTTP</code> PL/SQL packages in situations in which the local host is assumed, then these packages will search for and use the ACL that has been assigned <code>localhost</code> for the <code>host</code> setting.</p>
<p>See the following sections for more information about how network host computers in access control list assignments work:</p>
<ul>
<li>
<p><a href="#CIHJBFCJ">"Specifying a Group of Network Host Computers"</a></p>
</li>
<li>
<p><a href="#BABGIHGH">"Checking Privilege Assignments That Affect User Access to a Network Host"</a></p>
</li>
<li>
<p><a href="#CIHGCIGH">"Precedence Order for a Host Computer in Multiple Access Control List Assignments"</a></p>
</li>
<li>
<p><a href="#BABIAAFD">"Precedence Order for a Host in Access Control List Assignments with Port Ranges"</a></p>
</li>
</ul>
</li>
<li>
<p><code>lower_port</code>: (Optional) For TCP connections, enter the lower boundary of the port range. Use this setting for the <code>connect</code> privilege only; omit it for the <code>resolve</code> privilege. The default is <code>null</code>, which means that there is no port restriction (that is, the ACL applies to all ports). The range is between 1 and 65535.</p>
<p>For example:</p>
<pre>
lower_port =&gt; 80,
</pre></li>
<li>
<p><code>upper_port</code>: (Optional) For TCP connections, enter the upper boundary of the port range. Use this setting for <code>connect</code> privileges only; omit it for <code>resolve</code> privileges. The default is <code>null</code>, which means that there is no port restriction (that is, the ACL applies to all ports). The range is between 1 and 65535.</p>
<p>For example:</p>
<pre>
upper_port =&gt; 3999);
</pre>
<p>If you enter a value for the <code>lower_port</code> and leave the <code>upper_port</code> at <code>null</code> (or just omit it), Oracle Database assumes the <code>upper_port</code> setting is the same as the <code>lower_port</code>. For example, if you set <code>lower_port</code> to <code>80</code> and omit <code>upper_port</code>, the <code>upper_port</code> setting is assumed to be <code>80</code>.</p>
<p>The <code>resolve</code> privilege in the access control list takes no effect when a port range is specified in the access control list assignment.</p>
</li>
</ul>
<p>Only one access control list can be assigned to any host computer, domain, or IP subnet, and if specified, the TCP port range. When you assign a new access control list to a network target, Oracle Database unassigns the previous access control list that was assigned to the same target. However, Oracle Database does not drop the access control list. You can drop the access control list by using the <code>DROP_ACL</code> procedure. To remove an access control list assignment, use the <code>UNASSIGN_ACL</code> procedure.</p>
<p>Depending on how you create and maintain the access control list, the two steps may overlap. For example, you can create an access control list that has privileges for five users in it, and then apply it to two host computers. Later on, you can modify this access control list to have different or additional users and privileges, and assign it to different or additional host computers.</p>
<p>All access control list changes, including the assignment to network hosts, are transactional. They do not take effect until the transaction is committed.</p>
<p>You can find information about existing privileges and network connections by using the data dictionary views described in <a href="#CIHHCGHF">Table 4-6, "Data Dictionary Views That Display Information about Access Control Lists"</a>.</p>
<p>For information about using the <code>DBMS_NETWORK_ACL_ADMIN</code> package, see <a class="olink ARPLS148" href="../../appdev.111/b28419/d_networkacl_adm.htm#ARPLS148"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHHEGHJ"></a>
<div id="DBSEG98080" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Examples of Creating Access Control Lists</h3>
<p><a id="sthref955"></a><a id="sthref956"></a>The following examples demonstrate how to create access control lists.</p>
<ul>
<li>
<p><a href="#BABCCJDI">Example of an Access Control List for a Single Role and Network Connection</a></p>
</li>
<li>
<p><a href="#BABHBIHF">Example of an Access Control List with Multiple Roles Assigned to Multiple Hosts</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DVADM50058" href="../../server.111/b31222/cfrulset.htm#DVADM50058"><span class="italic">Oracle Database Vault Administrator's Guide</span></a> for a tutorial that demonstrates how to use an access control list when an administrator must use the <code>UTL_MAIL</code> PL/SQL package to configure an email alert</div>
<a id="BABCCJDI"></a>
<div id="DBSEG98081" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Example of an Access Control List for a Single Role and Network Connection</h4>
<p><a href="#CIHIGIBE">Example 4-18</a> shows how you would create an access control list called <code>us-example-com-permissions.xml</code> to grant users who have the <code>ACCT_MGR</code> role access to network services that run on the host <code>us.example.com</code>.</p>
<div id="DBSEG98082" class="example">
<p class="titleinexample"><a id="CIHIGIBE"></a>Example 4-18 Creating an Access Control List for a Single Role and Network Connection</p>
<pre>
<span class="bold">-- 1. Create the access control list, which includes one role:</span>
BEGIN
 DBMS_NETWORK_ACL_ADMIN.CREATE_ACL (
  acl          =&gt; 'us-example-com-permissions.xml', 
  description  =&gt; 'Network connection permission for ACCT_MGR', 
  principal    =&gt; 'ACCT_MGR', <span class="italic">-- Must be in upper case</span>
  is_grant     =&gt; TRUE, 
  privilege    =&gt; 'connect'); 
END;
/

<span class="bold">-- 2. Assign the access control list a network host:</span>
BEGIN
 DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL (
  acl         =&gt; 'us-example-com-permissions.xml',
  host        =&gt; 'www.us.example.com', 
  lower_port  =&gt; 80,
  upper_port  =&gt; 80); 
END;
/
</pre></div>
<!-- class="example" -->
<p>This example creates the <code>us-example-com-permissions.xml</code> file in the <code>/sys/acls</code> directory, which is the default location. The XML file appears as follows:</p>
<pre>
&lt;acl description="Network connection permission for ACCT_MGR" 
  xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
  xmlns:plsql="http://xmlns.oracle.com/plsql" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
  xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd    http://xmlns.oracle.com/xdb/acl.xsd"&gt;
  &lt;security-class&gt;plsql:network&lt;/security-class&gt;
  &lt;ace&gt;
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;ACCT_MGR&lt;/principal&gt;
    &lt;privilege&gt;&lt;plsql:connect/&gt;&lt;/privilege&gt;
 &lt;/ace&gt;
&lt;/acl&gt;
</pre>
<p>The <code>xmlns</code> and <code>xsi</code> elements are fixed and should not be modified, for example, in a text editor.</p>
<p>You can check the contents of the access control list in SQL*Plus. See <a class="olink ADXDB2425" href="../../appdev.111/b28369/xdb21sec.htm#ADXDB2425"><span class="italic">Oracle XML DB Developer's Guide</span></a> for examples.</p>
</div>
<!-- class="sect3" -->
<a id="BABHBIHF"></a>
<div id="DBSEG98083" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Example of an Access Control List with Multiple Roles Assigned to Multiple Hosts</h4>
<p><a href="#CIHFGHGJ">Example 4-19</a> shows how to create a slightly more complex version of the <code>us-example-com-permissions.xml</code> access control list. In this example, you specify multiple role privileges and their precedence position, and assigned to multiple host computers.</p>
<p>See<a href="#CIHJBFCJ">"Specifying a Group of Network Host Computers"</a> and <a href="#CIHGCIGH">"Precedence Order for a Host Computer in Multiple Access Control List Assignments"</a> for more information about host names. See also <a href="#BABHGBGE">"Setting the Precedence of Multiple Users and Roles in One Access Control List"</a> to determine the order of multiple <code>ACE</code> elements in the access control list XML file.</p>
<div id="DBSEG98084" class="example">
<p class="titleinexample"><a id="CIHFGHGJ"></a>Example 4-19 Creating an Access Control List for Multiple Roles and Network Connections</p>
<pre>
<span class="bold">-- 1. Create the access control list:</span>
BEGIN
 DBMS_NETWORK_ACL_ADMIN.CREATE_ACL (
  acl          =&gt; 'us-example-com-permissions.xml', 
  description  =&gt; 'Network connection permission for ACCT_MGR and ACCT_CLERK', 
  principal    =&gt; 'ACCT_MGR', <span class="italic">-- Must be in upper case</span>
  is_grant     =&gt; TRUE,
  privilege    =&gt; 'resolve');
 DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE ( <span class="italic">-- Creates the second role privilege</span>
  acl          =&gt; 'us-example-com-permissions.xml',
  principal    =&gt; 'ACCT_CLERK',
  is_grant     =&gt; TRUE, 
  privilege    =&gt; 'connect',
  position     =&gt; null);
END;
/

<span class="bold">-- 2. Assign the access control list to hosts:</span>
BEGIN
 DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL ( <span class="italic">-- Creates the first target host</span>
  acl          =&gt; 'us-example-com-permissions.xml',
  host         =&gt; '*.us.example.com'); 
 DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL ( <span class="italic">-- Creates the second target host </span>
  acl          =&gt; 'us-example-com-permissions.xml',
  host         =&gt; '*.uk.example.com',
  lower_port   =&gt; 80,
  upper_port   =&gt; 99); 
END;
/
</pre></div>
<!-- class="example" -->
<p>The <code>us-example-com-permissions.xml</code> appears as follows:</p>
<pre>
&lt;acl description="Network connection permission for ACCT_MGR and ACCT_CLERK" 
  xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
  xmlns:plsql="http://xmlns.oracle.com/plsql" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
  xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd    http://xmlns.oracle.com/xdb/acl.xsd"&gt;
  &lt;security-class&gt;plsql:network&lt;/security-class&gt;
  &lt;ace&gt;
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;ACCT_MGR&lt;/principal&gt;
    &lt;privilege&gt;&lt;plsql:resolve/&gt;&lt;/privilege&gt;
  &lt;/ace&gt;
  &lt;ace&gt;
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;ACCT_CLERK&lt;/principal&gt;
    &lt;privilege&gt;&lt;plsql:connect/&gt;&lt;/privilege&gt;
  &lt;/ace&gt;
&lt;/acl&gt;
</pre>
<p><a href="#BABDEDIF">Example 4-20</a> shows how the <code>DBA_NETWORK_ACL_PRIVILEGES</code> data dictionary view displays the privilege granted in the previous access control list.</p>
<div id="DBSEG98085" class="example">
<p class="titleinexample"><a id="BABDEDIF"></a>Example 4-20 Using the DBA_NETWORK_ACL_PRIVILEGES View to Show Granted Privileges</p>
<pre>
ACL  
ACLID                                  PRINCIPAL  PRIVILEGE IS_GRANT INVERT
START_DATE END_DATE
------------------------------------------
-------------------------------- ---------- -------   -------- -------
---------- ----------
/sys/acls/us-example-com-permissions.xml 2EF86135D0E29B2AE040578CE4043250 ACCT_
MGR   resolve   true       false
/sys/acls/us-example-com-permissions.xml 2EF86135D0E29B2AE040578CE4043250 ACCT_
CLERK connect   true       false
</pre></div>
<!-- class="example" -->
<pre>
</pre>
<p><a href="#BABIHDJC">Example 4-21</a> shows how the <code>DBA_NETWORK_ACLS</code> data dictionary view displays the host assignment of the access control list.</p>
<div id="DBSEG98086" class="example">
<p class="titleinexample"><a id="BABIHDJC"></a>Example 4-21 Using the DBA_NETWORK_ACLS View to Show Host Assignments</p>
<pre>
HOST                       LOWER_PORT UPPER_PORT
ACL
ACLID
-------------------- ---------- ----------
------------------------------------------
--------------------------------
*.us.example.com                   
/sys/acls/us-example-com-permissions.xml 2EF86135D0E29B2AE040578CE4043250
*.uk.example.com      80             99
/sys/acls/us-example-com-permissions.xml 2EF86135D0E29B2AE040578CE4043250
</pre></div>
<!-- class="example" -->
<p>In these examples, the <code>ACCT_MGR</code> role has the <code>resolve</code> privilege to the first host, and the <code>ACCT_CLERK</code> role has the connect privilege to the first and second target hosts. The <code>ACCT_MGR</code> role does not have the <code>resolve</code> privilege to the second host because a port range is specified in the assignment to the second host.</p>
<p>To check the contents of the access control list in SQL*Plus, see <a class="olink ADXDB2425" href="../../appdev.111/b28369/xdb21sec.htm#ADXDB2425"><span class="italic">Oracle XML DB Developer's Guide</span></a> for examples.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHJBFCJ"></a>
<div id="DBSEG98087" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Specifying a Group of Network Host Computers</h3>
<p><a id="sthref957"></a>If you want to assign an access control list to a group of network host computers, you can use the asterisk (*) wildcard character. For example, enter <code>*.example.com</code> for host computers that belong to a domain or <code>192.0.2.*</code> for IP addresses that belong to an IP subnet. The asterisk wildcard must be at the beginning, before a period (.) in a domain, or at the end, after a period (.), in an IP subnet. For example, <code>*.example.com</code> is valid, but <code>*example.com</code> and <code>*.example.*</code> are not.</p>
<p>Be aware that the use of wildcard characters affects the order of precedence for multiple access control lists that are assigned to the same host computer.</p>
</div>
<!-- class="sect2" -->
<a id="CIHGCIGH"></a>
<div id="DBSEG98088" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Precedence Order for a Host Computer in Multiple Access Control List Assignments</h3>
<p><a id="sthref958"></a>For multiple access control lists that are assigned to the host computer and its domains, the access control list that is assigned to the host computer takes precedence over those assigned to the domains. The access control list assigned to a domain has a lower precedence than those assigned to the subdomains.</p>
<p>For example, Oracle Database first selects the access control list assigned to the host <code>server.us.example.com</code>, ahead of other access control lists assigned to its domains. If additional access control lists were assigned to the sub domains, their order of precedence is as follows:</p>
<ol>
<li>
<p><code>server.us.example.com</code></p>
</li>
<li>
<p><code>*.us.example.com</code></p>
</li>
<li>
<p><code>*.example.com</code></p>
</li>
<li>
<p><code>*.com</code></p>
</li>
<li>
<p><code>*</code></p>
</li>
</ol>
<p>Similarly, here is how the order of precedence works for the IP address <code>192.0.2.4</code>:</p>
<ol>
<li>
<p><code>192.0.2.4</code></p>
</li>
<li>
<p><code>192.0.2.*</code></p>
</li>
<li>
<p><code>192.0.*</code></p>
</li>
<li>
<p><code>192.*</code></p>
</li>
<li>
<p><code>*</code></p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABIAAFD"></a>
<div id="DBSEG98089" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Precedence Order for a Host in Access Control List Assignments with Port Ranges</h3>
<p>When<a id="sthref959"></a> an access control list is assigned to a host computer, a domain, or an IP subnet with a port range, it takes precedence over the access control list assigned to the same host, domain, or IP subnet without a port range.</p>
<p>For example, for TCP connections to any port between port 80 and 99 at <code>server.us.example.com</code>, Oracle Database first selects the access control list assigned to port 80 through 99 at <code>server.us.example.com</code>, ahead of the other access control list assigned to <code>server.us.example.com</code> that is without a port range.</p>
</div>
<!-- class="sect2" -->
<a id="BABGIHGH"></a>
<div id="DBSEG98090" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Checking Privilege Assignments That Affect User Access to a Network Host</h3>
<p><a id="sthref960"></a><a id="sthref961"></a>Database administrators can use the <code><a id="sthref962"></a><a id="sthref963"></a>DBA_NETWORK_ACL_PRIVILEGES</code> data dictionary view to query network privileges that have been granted to or denied from database users and roles in the access control lists, and whether those privileges take effect during certain times only. Using the information provided by the view, you may need to combine the data to determine if a user is granted the privilege at the current time, the roles the user has, the order of the access control entries, and so on. To simplify this privilege evaluation, you can use the following <code>DBMS_NETWORK_ACL_ADMIN</code> functions to check the privilege granted to a user in an access control list:</p>
<ul>
<li>
<p><code>CHECK_PRIVILEGE</code>: Checks if the specified privilege is granted to or denied from the specified user in an access control list. This procedure identifies the access control list by its path in the XML DB Repository. Use <code>CHECK_PRIVILEGE</code> if you want to evaluate a single access control list with a known path.</p>
</li>
<li>
<p><code>CHECK_PRIVILEGE_ACLID</code>: Similar to the <code>CHECK_PRIVILEGE</code> procedure, except that it enables you to specify the object ID of the access control list. Use <code>CHECK_PRIVILEGE_ACLID</code> if you need to evaluate multiple access control lists, when you query the <code>DBA_NETWORK_ACLS</code> data dictionary view. For better performance, call <code>CHECK_PRIVILEGE_ACLID</code> on multiple access control lists rather than using <code>CHECK_PRIVILEGE</code> on each one individually.</p>
</li>
</ul>
<p>Users without database administrator privileges do not have the privilege to access the access control lists or to invoke those <code>DBMS_NETWORK_ACL_ADMIN</code> functions. However, they can query the <code>USER_NETWORK_ACL_PRIVILEGES</code> data dictionary view to check their privileges instead.</p>
<p>Both database administrators and users can use the following <code>DBMS_NETWORK_ACL_UTILITY</code> functions to generate the list of domains or IP subnet a host belongs to and to sort the access control lists by their order of precedence according to their host assignments:</p>
<ul>
<li>
<p><code>DOMAINS</code>: Returns a list of the domains or IP subnets whose access control lists may affect permissions to a specified network host, subdomain, or IP subnet</p>
</li>
<li>
<p><code>DOMAIN_LEVEL</code>: Returns the domain level of a given host</p>
</li>
</ul>
<p>The following sections explain how database administrators and users can check permissions for the user to connect to a network host or to perform domain name resolutions:</p>
<ul>
<li>
<p><a href="#BABJJBJI">How a DBA Can Check User Network Connection and Domain Privileges</a></p>
</li>
<li>
<p><a href="#BABCEJJB">How Users Can Check Their Network Connection and Domain Privileges</a></p>
</li>
</ul>
<a id="BABJJBJI"></a>
<div id="DBSEG98091" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">How a DBA Can Check User Network Connection and Domain Privileges</h4>
<p><a id="sthref964"></a>A database administrator can query the <code>DBA_NETWORK_ACLS</code> view to determine which access control lists are present for a specified host computer. This view shows the access control lists that determine the access to the network connection or domain, and then determines if each access control list grants (<code>GRANTED</code>), denies (<code>DENIED</code>), or does not apply (<code>NULL</code>) to the access privilege of the user. Only the database administrator can query this view.</p>
<p>The following sections provide examples that demonstrate how the database administrator can check user privileges for network connections and domain name resolution.</p>
<ul>
<li>
<p><a href="#BABEDIHE">Database Administrator Checking User Connection Privileges</a></p>
</li>
<li>
<p><a href="#BABJECID">Database Administrator Checking User Privileges for Domain Name Resolution</a></p>
</li>
</ul>
<p class="subhead2"><a id="BABEDIHE"></a><a id="DBSEG98092"></a>Database Administrator Checking User Connection Privileges</p>
<p><a href="#BABDCBDD">Example 4-22</a> shows how a database administrator can check the privileges for user <code>preston</code> to connect to <code>www.us.example.com</code>. Remember that the user name you enter for the <code>user</code> parameter in the <code>CHECK_PRIVILEGE_ACLID</code> procedure is case sensitive. In this example, entering the user name <code>preston</code> is correct, but entering <code>Preston</code> or <code>preston</code> is incorrect.</p>
<p>You can find the users in the current database instance by querying the <code>DBA_USERS</code> data dictionary view, for example:</p>
<pre>
SELECT USERNAME FROM DBA_USERS;
</pre>
<div id="DBSEG98093" class="example">
<p class="titleinexample"><a id="BABDCBDD"></a>Example 4-22 Administrator Checking User Permissions for Network Host Connections</p>
<pre>
SELECT HOST, LOWER_PORT, UPPER_PORT, ACL,
   DECODE(
     DBMS_NETWORK_ACL_ADMIN.CHECK_PRIVILEGE_ACLID(aclid,  'PRESTON', 'connect'),
     1, 'GRANTED', 0, 'DENIED', null) PRIVILEGE
FROM DBA_NETWORK_ACLS
WHERE host IN
  (SELECT * FROM
     TABLE(DBMS_NETWORK_ACL_UTILITY.DOMAINS('www.us.example.com')))
 ORDER BY 
  DBMS_NETWORK_ACL_UTILITY.DOMAIN_LEVEL(host) DESC, LOWER_PORT, UPPER_PORT;

 HOST                 LOWER_PORT UPPER_PORT ACL                  PRIVILEGE
 -------------------- ---------- ---------- -------------------- ---------
 www.us.example.com           80         80 /sys/acls/www.xml    GRANTED
 www.us.example.com         3000       3999 /sys/acls/www.xml    GRANTED
 www.us.example.com                         /sys/acls/www.xml    GRANTED
 *.example.com                              /sys/acls/all.xml
 *                                          /sys/acls/all.xml
</pre></div>
<!-- class="example" -->
<p>In this example, user <code>preston</code> was granted privileges for all the network host connections found for <code>www.us.example.com</code>. However, suppose <code>preston</code> had been granted access to a host connection on port 80, but then denied access to the host connections on ports 3000&ndash;3999. In this case, you need to create one access control list for the host connection on port 80, and a separate access control list for the host connection on ports 3000&ndash;3999.</p>
<p class="subhead2"><a id="BABJECID"></a><a id="DBSEG98094"></a>Database Administrator Checking User Privileges for Domain Name Resolution</p>
<p><a href="#BABDAJBF">Example 4-23</a> shows how a database administrator can check the privileges of user <code>preston</code> to perform domain name resolution for the host <code>www.us.example.com</code>. In this example, only the access control lists assigned to hosts without a port range because the <code>resolve</code> privilege has no effect to those with a port range. (Remember that the user name you enter for the <code>user</code> parameter in <code>CHECK_PRIVILEGE_ACLID</code> is case sensitive.)</p>
<div id="DBSEG98095" class="example">
<p class="titleinexample"><a id="BABDAJBF"></a>Example 4-23 Administrator Checking Permissions for Domain Name Resolution</p>
<pre>
SELECT HOST, ACL, DECODE(
     DBMS_NETWORK_ACL_ADMIN.CHECK_PRIVILEGE_ACLID(aclid, 'PRESTON', 'resolve'),
     1, 'GRANTED', 0, 'DENIED', null) privilege
FROM DBA_NETWORK_ACLS
WHERE host IN
 (SELECT * FROM
    TABLE(DBMS_NETWORK_ACL_UTILITY.DOMAINS('www.us.example.com'))) AND
 LOWER_PORT IS NULL AND UPPER_PORT IS NULL
ORDER BY DBMS_NETWORK_ACL_UTILITY.DOMAIN_LEVEL(host) DESC;

 HOST                 ACL                  PRIVILEGE
 -------------------- -------------------- ---------
 www.us.example.com   /sys/acls/www.xml    GRANTED
 *.example.com        /sys/acls/all.xml
 *                    /sys/acls/all.xml
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<a id="BABCEJJB"></a>
<div id="DBSEG98096" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">How Users Can Check Their Network Connection and Domain Privileges</h4>
<p><a id="sthref965"></a>Users can query the <code>USER_NETWORK_ACL_PRIVILEGES</code> view to check their network and domain permissions. The <code>USER_NETWORK_ACL_PRIVILEGES</code> view is <code>PUBLIC</code>, so all users can select from it.</p>
<p>This view hides the access control lists from the user. It evaluates the permission status for the user (<code>GRANTED</code> or <code>DENIED</code>) and filters out the <code>NULL</code> case because the user does not need to know when the access control lists do not apply to him or her. In other words, Oracle Database only shows the user on the network hosts that explicitly grant or deny access to him or her. Therefore, the output does not display the <code>*.example.com</code> and <code>*</code> that appear in the output from the database administrator-specific <code>DBA_NETWORK_ACLS</code> view.</p>
<p>The following sections provide examples that demonstrate how a database administrator can check user permissions for network connections and domain name resolution.</p>
<ul>
<li>
<p><a href="#BABCJJAC">User Checking His or Her Network Connection Privileges</a></p>
</li>
<li>
<p><a href="#BABHHFEA">User Checking Own Privileges for Domain Name Resolution</a></p>
</li>
</ul>
<p class="subhead2"><a id="BABCJJAC"></a><a id="DBSEG98097"></a>User Checking His or Her Network Connection Privileges</p>
<p><a href="#BABDCBDD">Example 4-22</a> shows how user <code>preston</code> can check her privileges to connect to <code>www.us.example.com</code>.</p>
<div id="DBSEG98098" class="example">
<p class="titleinexample"><a id="sthref966"></a>Example 4-24 User Checking Permissions for Network Host Connections</p>
<pre>
SELECT HOST, LOWER_PORT, UPPER_PORT, STATUS PRIVILEGE
FROM USER_NETWORK_ACL_PRIVILEGES
WHERE host IN
   (SELECT * FROM
      TABLE(DBMS_NETWORK_ACL_UTILITY.DOMAINS('www.us.example.com'))) AND
      PRIVILEGE = 'connect'
ORDER BY DBMS_NETWORK_ACL_UTILITY.DOMAIN_LEVEL(host) DESC, LOWER_PORT;

 HOST                 LOWER_PORT UPPER_PORT ACL                  PRIVILEGE
 -------------------- ---------- ---------- -------------------- ---------
 www.us.example.com           80         80 /sys/acls/www.xml    GRANTED
 www.us.example.com         3000       3999 /sys/acls/www.xml    GRANTED
 www.us.example.com                         /sys/acls/www.xml    GRANTED
</pre></div>
<!-- class="example" -->
<p class="subhead2"><a id="BABHHFEA"></a><a id="DBSEG98099"></a>User Checking Own Privileges for Domain Name Resolution</p>
<p><a href="#BABDAJBF">Example 4-23</a> shows how the user <code>preston</code> can check her privileges to perform domain name resolution for <code>www.us.example.com</code>:</p>
<div id="DBSEG98100" class="example">
<p class="titleinexample"><a id="sthref967"></a>Example 4-25 User Checking Privileges for Domain Name Resolution</p>
<pre>
SELECT host, status privilege
  FROM user_network_acl_privileges
 WHERE host IN
   (SELECT * FROM
      TABLE(DBMS_NETWORK_ACL_UTILITY.DOMAINS('www.us.example.com'))) AND
      privilege = 'resolve'
ORDER BY DBMS_NETWORK_ACL_UTILITY.DOMAIN_LEVEL(host) DESC;

 HOST                 PRIVILEGE
 -------------------- ---------
 www.us.example.com GRANTED
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABHGBGE"></a>
<div id="DBSEG98101" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Setting the Precedence of Multiple Users and Roles in One Access Control List</h3>
<p><a id="sthref968"></a>By default, <a id="sthref969"></a>Oracle Database grants or denies privileges to users and roles based on their physical position in the access control list. The first user or role listed is granted or denied privileges first, followed the second user or role, and so on. For instance, suppose the code in <a href="#CIHFGHGJ">Example 4-19</a> defined one role, <code>ACCT_MGR</code>, and two users, <code>sebastian</code> and <code>preston</code>, and the access control list XML file ordered these three as follows:</p>
<pre>
&lt;acl ...&gt;
  ...
  &lt;ace&gt;
    &lt;principal&gt;ACCT_MGR&lt;/principal&gt;
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;privilege&gt;&lt;plsql:connect/&gt;&lt;/privilege&gt;
   &lt;/ace&gt;
  &lt;ace&gt;
    &lt;principal&gt;SEBASTIAN&lt;/principal&gt;
    &lt;grant&gt;false&lt;/grant&gt;
    &lt;privilege&gt;&lt;plsql:connect/&gt;&lt;/privilege&gt;
  &lt;/ace&gt;
  &lt;ace&gt;
    &lt;principal&gt;PRESTON&lt;/principal&gt;
    &lt;grant&gt;false&lt;/grant&gt;
    &lt;privilege&gt;&lt;plsql:connect/&gt;&lt;/privilege&gt;
  &lt;/ace&gt;
&lt;/acl&gt;
</pre>
<p><code>ACCT_MGR</code> is granted permissions first, followed by permission denials for <code>sebastian</code> and then <code>preston</code>. However, if <code>sebastian</code> and <code>preston</code> have been granted the <code>ACCT_MGR</code> role, they still could log in, because the <code>ACCT_MGR</code> role appears first in the list.</p>
<p>Even though these two users were granted the <code>acct_mgr</code> role, their specific jobs do not require them to have access to the <code>www.example.com</code> host. If the positions were reversed&mdash;the <code>acct_mgr</code> role listed after <code>sebastian</code> and <code>preston</code>&mdash;they would be denied the privilege of connecting to the network. To set the order of precedence of the <code>ACE</code> elements irrespective of their physical location in the <code>CREATE_ACL</code> and <code>ADD_PRIVILEGE</code> statements, you can use the <code>position</code> attribute.</p>
<p>For example, the following statements set the <code>ACE</code> elements in the resultant XML file in this order:</p>
<ol>
<li>
<p>The <code>ACE</code> element for <code>sebastian</code> appears first.</p>
</li>
<li>
<p>The <code>ACE</code> element for <code>preston</code> appears second.</p>
</li>
<li>
<p>The <code>acct_mgr</code> role appears last.</p>
</li>
</ol>
<p>In this case, neither of these users will be able to connect, because their grant privileges, which are set to <code>FALSE</code>, are evaluated before the <code>acct_mgr</code> role.</p>
<pre>
BEGIN
 DBMS_NETWORK_ACL_ADMIN.CREATE_ACL (
  acl          =&gt; 'us-example-com-permissions.xml', 
  description  =&gt; 'Network connection permission for ACCT_MGR and users', 
  principal    =&gt; 'ACCT_MGR',
  is_grant     =&gt; TRUE,
  privilege    =&gt; 'connect');
 DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE ( 
  acl          =&gt; 'us-example-com-permissions.xml', 
  principal    =&gt; 'SEBASTIAN', 
  is_grant     =&gt; FALSE, 
  privilege    =&gt; 'connect',
  position     =&gt; 1); 
 DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE ( 
  acl          =&gt; 'us-example-com-permissions.xml', 
  principal    =&gt; 'PRESTON', 
  is_grant     =&gt; FALSE, 
  privilege    =&gt; 'connect',
  position     =&gt; 2); 
END;
/
</pre></div>
<!-- class="sect2" -->
<a id="CIHGEHAG"></a>
<div id="DBSEG98102" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Finding Information About Access Control Lists</h3>
<p><a href="#CIHHCGHF">Table 4-6</a> <a id="sthref970"></a><a id="sthref971"></a>lists data dictionary views that you can use to find information about existing access control lists. See <a class="olink REFRN" href="../../server.111/b28320/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about these views.</p>
<div id="DBSEG98103" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref972"></a><a id="CIHHCGHF"></a>Table 4-6 Data Dictionary Views That Display Information about Access Control Lists</p>
<table class="cellalignment1576" title="Data Dictionary Views That Display Information about Access Control Lists" summary="ACL views" dir="ltr">
<thead>
<tr class="cellalignment1570">
<th class="cellalignment1577" id="r1c1-t63">View</th>
<th class="cellalignment1577" id="r1c2-t63">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r2c1-t63" headers="r1c1-t63">
<p><code>DBA_NETWORK_ACLS</code><a id="sthref973"></a></p>
</td>
<td class="cellalignment1578" headers="r2c1-t63 r1c2-t63">
<p>Shows the access control list assignments to the network hosts. The <code>SELECT</code> privilege on this view is granted to the <code>SELECT_CATALOG_ROLE</code> role only.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r3c1-t63" headers="r1c1-t63">
<p><code>DBA_NETWORK_ACL_PRIVILEGES</code><a id="sthref974"></a></p>
</td>
<td class="cellalignment1578" headers="r3c1-t63 r1c2-t63">
<p>Shows the network privileges defined in all access control lists that are currently assigned to network hosts. The <code>SELECT</code> privilege on this view is granted to the <code>SELECT_CATALOG_ROLE</code> role only.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r4c1-t63" headers="r1c1-t63">
<p><code>USER_NETWORK_ACL_PRIVILEGES</code><a id="sthref975"></a></p>
</td>
<td class="cellalignment1578" headers="r4c1-t63 r1c2-t63">
<p>Shows the status of the network privileges for the current user to access network hosts. The <code>SELECT</code> privilege on the view is granted to <code>PUBLIC</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwide" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABFHBFH"></a>
<div id="DBSEG98104" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Finding Information About User Privileges and Roles</h2>
<p><a href="#BABJHDIC">Table 4-7</a> <a id="sthref976"></a><a id="sthref977"></a><a id="sthref978"></a><a id="sthref979"></a><a id="sthref980"></a>lists data dictionary views that you can query to access information about grants of privileges and roles. See <a class="olink REFRN" href="../../server.111/b28320/toc.htm"><span class="italic">Oracle Database Reference</span></a> for detailed information about these views.</p>
<div id="DBSEG98105" class="tblhruleformal">
<p class="titleintable"><a id="sthref981"></a><a id="BABJHDIC"></a>Table 4-7 Data Dictionary Views That Display Information about Privileges and Roles</p>
<table class="cellalignment1576" title="Data Dictionary Views That Display Information about Privileges and Roles" summary="Data dictionary views" dir="ltr">
<thead>
<tr class="cellalignment1570">
<th class="cellalignment1577" id="r1c1-t64">View</th>
<th class="cellalignment1577" id="r1c2-t64">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r2c1-t64" headers="r1c1-t64">
<p><code>ALL_COL_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r2c1-t64 r1c2-t64">
<p>Describes all column object grants for which the current user or <code>PUBLIC</code> is the object owner, grantor, or grantee</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r3c1-t64" headers="r1c1-t64">
<p><code>ALL_COL_PRIVS_MADE</code></p>
</td>
<td class="cellalignment1578" headers="r3c1-t64 r1c2-t64">
<p>Lists column object grants for which the current user is object owner or grantor.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r4c1-t64" headers="r1c1-t64">
<p><code>ALL_COL_PRIVS_RECD</code></p>
</td>
<td class="cellalignment1578" headers="r4c1-t64 r1c2-t64">
<p>Describes column object grants for which the current user or <code>PUBLIC</code> is the grantee</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r5c1-t64" headers="r1c1-t64">
<p><code>ALL_TAB_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r5c1-t64 r1c2-t64">
<p>Lists the grants on objects where the user or <code>PUBLIC</code> is the grantee</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r6c1-t64" headers="r1c1-t64">
<p><code>ALL_TAB_PRIVS_MADE</code></p>
</td>
<td class="cellalignment1578" headers="r6c1-t64 r1c2-t64">
<p>Lists the all object grants made by the current user or made on the objects owned by the current user.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r7c1-t64" headers="r1c1-t64">
<p><code>ALL_TAB_PRIVS_RECD</code></p>
</td>
<td class="cellalignment1578" headers="r7c1-t64 r1c2-t64">
<p>Lists object grants for which the user or <code>PUBLIC</code> is the grantee</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r8c1-t64" headers="r1c1-t64">
<p><code>DBA_COL_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r8c1-t64 r1c2-t64">
<p>Describes all column object grants in the database</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r9c1-t64" headers="r1c1-t64">
<p><code>DBA_TAB_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r9c1-t64 r1c2-t64">
<p>Lists all grants on all objects in the database</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r10c1-t64" headers="r1c1-t64">
<p><code>DBA_ROLES</code></p>
</td>
<td class="cellalignment1578" headers="r10c1-t64 r1c2-t64">
<p>This view lists all roles that exist in the database, including secure application roles<a id="sthref982"></a>. Note that it does not list the <code>PUBLIC</code> role.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r11c1-t64" headers="r1c1-t64">
<p><code>DBA_ROLE_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r11c1-t64 r1c2-t64">
<p>Lists roles granted to users and roles</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r12c1-t64" headers="r1c1-t64">
<p><code>DBA_SYS_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r12c1-t64 r1c2-t64">
<p>Lists system privileges granted to users and roles</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r13c1-t64" headers="r1c1-t64">
<p><code>SESSION_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r13c1-t64 r1c2-t64">
<p>Lists the privileges that are currently enabled for the user</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r14c1-t64" headers="r1c1-t64">
<p><code>SESSION_ROLES</code></p>
</td>
<td class="cellalignment1578" headers="r14c1-t64 r1c2-t64">
<p>Lists all roles that are enabled for the current user. Note that it does not list the <code>PUBLIC</code> role.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r15c1-t64" headers="r1c1-t64">
<p><code>ROLE_ROLE_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r15c1-t64 r1c2-t64">
<p>This view describes roles granted to other roles. Information is provided only about roles to which the user has access.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r16c1-t64" headers="r1c1-t64">
<p><code>ROLE_SYS_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r16c1-t64 r1c2-t64">
<p>This view contains information about system privileges granted to roles. Information is provided only about roles to which the user has access.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r17c1-t64" headers="r1c1-t64">
<p><code>ROLE_TAB_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r17c1-t64 r1c2-t64">
<p>This view contains information about object privileges granted to roles. Information is provided only about roles to which the user has access.</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r18c1-t64" headers="r1c1-t64">
<p><code>USER_COL_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r18c1-t64 r1c2-t64">
<p>Describes column object grants for which the current user is the object owner, grantor, or grantee</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r19c1-t64" headers="r1c1-t64">
<p><code>USER_COL_PRIVS_MADE</code></p>
</td>
<td class="cellalignment1578" headers="r19c1-t64 r1c2-t64">
<p>Describes column object grants for which the current user is the grantor</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r20c1-t64" headers="r1c1-t64">
<p><code>USER_COL_PRIVS_RECD</code></p>
</td>
<td class="cellalignment1578" headers="r20c1-t64 r1c2-t64">
<p>Describes column object grants for which the current user is the grantee</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r21c1-t64" headers="r1c1-t64">
<p><code>USER_ROLE_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r21c1-t64 r1c2-t64">
<p>Lists roles granted to the current user</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r22c1-t64" headers="r1c1-t64">
<p><code>USER_TAB_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r22c1-t64 r1c2-t64">
<p>Lists grants on all objects where the current user is the grantee</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r23c1-t64" headers="r1c1-t64">
<p><code>USER_SYS_PRIVS</code></p>
</td>
<td class="cellalignment1578" headers="r23c1-t64 r1c2-t64">
<p>Lists system privileges granted to the current user</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r24c1-t64" headers="r1c1-t64">
<p><code>USER_TAB_PRIVS_MADE</code></p>
</td>
<td class="cellalignment1578" headers="r24c1-t64 r1c2-t64">
<p>Lists grants on all objects owned by the object owner</p>
</td>
</tr>
<tr class="cellalignment1570">
<td class="cellalignment1578" id="r25c1-t64" headers="r1c1-t64">
<p><code>USER_TAB_PRIVS_RECD</code></p>
</td>
<td class="cellalignment1578" headers="r25c1-t64 r1c2-t64">
<p>Lists object grants for which the current user is the grantee</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><a id="sthref983"></a><a id="sthref984"></a>This section provides some examples of using these views. For these examples, assume the following statements were issued:</p>
<pre>
CREATE ROLE security_admin IDENTIFIED BY <span class="italic">password</span>;

GRANT CREATE PROFILE, ALTER PROFILE, DROP PROFILE,
    CREATE ROLE, DROP ANY ROLE, GRANT ANY ROLE, AUDIT ANY,
    AUDIT SYSTEM, CREATE USER, BECOME USER, ALTER USER, DROP USER
    TO security_admin WITH ADMIN OPTION;

GRANT SELECT, DELETE ON SYS.AUD$ TO security_admin;

GRANT security_admin, CREATE SESSION TO swilliams;

GRANT security_admin TO system_administrator;

GRANT CREATE SESSION TO jward;

GRANT SELECT, DELETE ON emp TO jward;

GRANT INSERT (ename, job) ON emp TO swilliams, jward;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../../server.111/b28320/toc.htm"><span class="italic">Oracle Database Reference</span></a> for a detailed description of these data dictionary views</div>
<div id="DBSEG98106" class="sect2"><a id="sthref985"></a>
<h3 class="sect2">Listing All System Privilege Grants</h3>
<p><a id="sthref986"></a><a id="sthref987"></a>The<a id="sthref988"></a> following query returns all system privilege grants made to roles and users:</p>
<pre>
SELECT * FROM DBA_SYS_PRIVS;

GRANTEE            PRIVILEGE                         ADM
--------------     --------------------------------- ---
SECURITY_ADMIN     ALTER PROFILE                     YES
SECURITY_ADMIN     ALTER USER                        YES
SECURITY_ADMIN     AUDIT ANY                         YES
SECURITY_ADMIN     AUDIT SYSTEM                      YES
SECURITY_ADMIN     BECOME USER                       YES
SECURITY_ADMIN     CREATE PROFILE                    YES
SECURITY_ADMIN     CREATE ROLE                       YES
SECURITY_ADMIN     CREATE USER                       YES
SECURITY_ADMIN     DROP ANY ROLE                     YES
SECURITY_ADMIN     DROP PROFILE                      YES
SECURITY_ADMIN     DROP USER                         YES
SECURITY_ADMIN     GRANT ANY ROLE                    YES
SWILLIAMS          CREATE SESSION                    NO
JWARD              CREATE SESSION                    NO
</pre>
<p>See <a class="olink REFRN23274" href="../../server.111/b28320/statviews_5036.htm#REFRN23274"><span class="italic">Oracle Database Reference</span></a> for detailed information about the <code>DBA_SYS_PRIVS</code> view.</p>
</div>
<!-- class="sect2" -->
<div id="DBSEG98107" class="sect2"><a id="sthref989"></a>
<h3 class="sect2">Listing All Role Grants</h3>
<p><a id="sthref990"></a><a id="sthref991"></a>The following <a id="sthref992"></a>query returns all the roles granted to users and other roles:</p>
<pre>
SELECT * FROM DBA_ROLE_PRIVS;

GRANTEE            GRANTED_ROLE                         ADM
------------------ ------------------------------------ ---
SWILLIAMS          SECURITY_ADMIN                       NO
</pre>
<p>See <a class="olink REFRN23230" href="../../server.111/b28320/statviews_4206.htm#REFRN23230"><span class="italic">Oracle Database Reference</span></a> for detailed information about the <code>DBA_ROLE_PRIVS</code> view.</p>
</div>
<!-- class="sect2" -->
<div id="DBSEG98108" class="sect2"><a id="sthref993"></a>
<h3 class="sect2">Listing Object Privileges Granted to a User</h3>
<p><a id="sthref994"></a>The following query returns all object privileges (not including column-specific privileges) granted to the specified user:</p>
<pre>
SELECT TABLE_NAME, PRIVILEGE, GRANTABLE FROM DBA_TAB_PRIVS
    WHERE GRANTEE = 'jward';

TABLE_NAME   PRIVILEGE    GRANTABLE
-----------  ------------ ----------
EMP          SELECT       NO
EMP          DELETE       NO
</pre>
<p><a id="sthref995"></a>To list all the column-specific privileges that have been granted, use the following query<a id="sthref996"></a>:</p>
<pre>
SELECT GRANTEE, TABLE_NAME, COLUMN_NAME, PRIVILEGE
    FROM DBA_COL_PRIVS;

GRANTEE      TABLE_NAME     COLUMN_NAME      PRIVILEGE
-----------  ------------   -------------    --------------
SWILLIAMS    EMP            ENAME            INSERT
SWILLIAMS    EMP            JOB              INSERT
JWARD        EMP            NAME             INSERT
JWARD        EMP            JOB              INSERT
</pre>
<p>See <a class="olink REFRN23282" href="../../server.111/b28320/statviews_5046.htm#REFRN23282"><span class="italic">Oracle Database Reference</span></a> for detailed information about the <code>DBA_TAB_PRIVS</code> view.</p>
</div>
<!-- class="sect2" -->
<div id="DBSEG98109" class="sect2"><a id="sthref997"></a>
<h3 class="sect2">Listing the Current Privilege Domain of Your Session</h3>
<p><a id="sthref998"></a>The <a id="sthref999"></a>following query lists all roles currently enabled for the issuer:</p>
<pre>
SELECT * FROM SESSION_ROLES;
</pre>
<p>If user <code>swilliams</code> has the <code>security_admin</code> role enabled and issues the previous query, then Oracle Database returns the following information:</p>
<pre>
ROLE
------------------------------
SECURITY_ADMIN
</pre>
<p><a id="sthref1000"></a>The following query lists all system privileges currently available in the security domain of the issuer, both from explicit privilege grants and from enabled roles:</p>
<pre>
SELECT * FROM SESSION_PRIVS;
</pre>
<p>If user <code>swilliams</code> has the <code>security_admin</code> role enabled and issues the previous query, then Oracle Database returns the following results:</p>
<pre>
PRIVILEGE
----------------------------------------
AUDIT SYSTEM
CREATE SESSION
CREATE USER
BECOME USER
ALTER USER
DROP USER
CREATE ROLE
DROP ANY ROLE
GRANT ANY ROLE
AUDIT ANY
CREATE PROFILE
ALTER PROFILE
DROP PROFILE
</pre>
<p>If the <code>security_admin</code> role is disabled for user <code>swilliams</code>, then the first query would return no rows, while the second query would only return a row for the <code>CREATE SESSION</code> privilege grant.</p>
<p>See <a class="olink REFRN29028" href="../../server.111/b28320/statviews_5149.htm#REFRN29028"><span class="italic">Oracle Database Reference</span></a> for detailed information about the <code>SESSION_ROLES</code> view.</p>
</div>
<!-- class="sect2" -->
<div id="DBSEG98110" class="sect2"><a id="sthref1001"></a>
<h3 class="sect2">Listing Roles of the Database</h3>
<p><a id="sthref1002"></a>You can use the <code>DBA_ROLES</code> <a id="sthref1003"></a>data dictionary view to list all roles of a database and the authentication used for each role. For example, the following query lists all the roles in the database:</p>
<pre>
SELECT * FROM DBA_ROLES;

ROLE                  PASSWORD
----------------      --------
CONNECT               NO
RESOURCE              NO
DBA                   NO
SECURITY_ADMIN        YES
</pre>
<p>See <a class="olink REFRN23231" href="../../server.111/b28320/statviews_4207.htm#REFRN23231"><span class="italic">Oracle Database Reference</span></a> for detailed information about the <code>DBA_ROLES</code> view.</p>
</div>
<!-- class="sect2" -->
<div id="DBSEG98111" class="sect2"><a id="sthref1004"></a>
<h3 class="sect2">Listing Information About the Privilege Domains of Roles</h3>
<p><a id="sthref1005"></a>The <code>ROLE_ROLE_PRIVS<a id="sthref1006"></a></code>, <code>ROLE_SYS_PRIVS</code><a id="sthref1007"></a>, and <code>ROLE_TAB_PRIVS</code><a id="sthref1008"></a> data dictionary views contain information about the privilege domains of roles. For example, the following query lists all the roles granted to the <code>system_admin</code> role:</p>
<pre>
SELECT GRANTED_ROLE, ADMIN_OPTION
   FROM ROLE_ROLE_PRIVS
   WHERE ROLE = 'SYSTEM_ADMIN';

GRANTED_ROLE              ADM
----------------          ----
SECURITY_ADMIN            NO
</pre>
<p>The following query lists all the system privileges granted to the <code>security_admin</code> role:</p>
<pre>
SELECT * FROM ROLE_SYS_PRIVS WHERE ROLE = 'SECURITY_ADMIN';

ROLE                    PRIVILEGE                      ADM
----------------------- -----------------------------  ---
SECURITY_ADMIN           ALTER PROFILE                 YES
SECURITY_ADMIN           ALTER USER                    YES
SECURITY_ADMIN           AUDIT ANY                     YES
SECURITY_ADMIN           AUDIT SYSTEM                  YES
SECURITY_ADMIN           BECOME USER                   YES
SECURITY_ADMIN           CREATE PROFILE                YES
SECURITY_ADMIN           CREATE ROLE                   YES
SECURITY_ADMIN           CREATE USER                   YES
SECURITY_ADMIN           DROP ANY ROLE                 YES
SECURITY_ADMIN           DROP PROFILE                  YES
SECURITY_ADMIN           DROP USER                     YES
SECURITY_ADMIN           GRANT ANY ROLE                YES
</pre>
<p>The following query lists all the object privileges granted to the <code>security_admin</code> role:</p>
<pre>
SELECT TABLE_NAME, PRIVILEGE FROM ROLE_TAB_PRIVS
    WHERE ROLE = 'SECURITY_ADMIN';

TABLE_NAME                     PRIVILEGE
---------------------------    ----------------
AUD$                           DELETE
AUD$                           SELECT
</pre>
<p>See <a class="olink REFRN" href="../../server.111/b28320/toc.htm"><span class="italic">Oracle Database Reference</span></a> for detailed information about the <a class="olink REFRN29059" href="../../server.111/b28320/statviews_5142.htm#REFRN29059"><code>ROLE_ROLE_PRIVS</code></a>, <a class="olink REFRN29060" href="../../server.111/b28320/statviews_5143.htm#REFRN29060"><code>ROLE_SYS_PRIVS</code></a>, and <a class="olink REFRN29061" href="../../server.111/b28320/statviews_5144.htm#REFRN29061"><code>ROLE_TAB_PRIVS</code></a> views.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1569">
<tr>
<td class="cellalignment1578">
<table class="cellalignment1574">
<tr>
<td class="cellalignment1573"><a href="authentication.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1573"><a href="app_devs.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1581">
<table class="cellalignment1572">
<tr>
<td class="cellalignment1573"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1573"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1573"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1573"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1573"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1573"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
