<!DOCTYPE html>
<!--#include virtual="/includes/head.shtml" -->
<body onload="onloadProc()">
<!--#include virtual="/includes/inprogress.shtml" -->
<!--#include virtual="/includes/animation.shtml" -->
<div id="pagewrap">
<!--#include virtual="/includes/sitename.shtml" -->
<div id="topstripe"></div>
<!--#include virtual="/includes/sidemenu.shtml" -->
<div id="content">
<!--#include virtual="/includes/topblurb.shtml" -->
<h1>Game loop timing</h1>
<p>The duration of a game loop, as well as the time between iterations, can be controlled. Each move handler and show handler is called back in the order in which they were registered.</p>
<p>The portion of an iteration elapsed is conveyed as the first parameter to the move handler (in these examples $step is the name).</p>
<p>The duration of time since the calling of <b>run</b> is in the variable <b>t</b>, the third parameter. (You may use different variable names if you wish, but the order is fixed).</p>
<pre>
...SNIP...

# First create a new App
$application = SDLx::App-&gt;new(
    title  =&gt; "Some Generic Game",
    width  =&gt; 800, # use same width as background image
    height =&gt; 600, # use same height as background image
    depth  =&gt; 24, 
    dt =&gt; 0.1, # units: sec - duration of one game loop
    delay=&gt;6, # units: ms - delay between game loop iterations
    min_t =&gt; 0.01, # units: sec - minimum time between show handlers
    exit_on_quit =&gt; 1 # Enable 'X' button
);

...SNIP...

...SNIP...
sub move_badguy {
  my ($step, $app, $t) = @_;
  
  # $step is the portion of a game loop iteration that has passed:
  # multiply the move value by this. From SDL documentation:
  # "...the portion of the step, which will be 1 for a full step, and less than 1 for a partial step."
  # "...the [number] of dt [elapsed] between calls..."
  
  $badguy_x = $badguy_x + ($badguy_step * $step);
 
}
...SNIP...
<i><big>OR</big></i>
...SNIP...
sub move_badguy {
  my ($step, $app, $t) = @_;

  # This makes the character move only half as often:
  # I'm using a *global* variable which I call $mystepcheck
  $mystepcheck += $step;
  if ($mystepcheck &lt; 2) {
    return;
  }
...
  $badguy_x += ($badguy_step * $mystepcheck);
...  
  $mystepcheck=0;

}
...SNIP...
</pre>
<small><!--#config timefmt="%Y%m%d-%H:%M" -->Last updated: <!--#flastmod file="SDLx-App-Sample_05.shtml" --></small>
</div> <!-- #content -->
<!--#include virtual="/includes/backtotop.shtml" -->
</div> <!-- #pagewrap -->
</body>
</html>
